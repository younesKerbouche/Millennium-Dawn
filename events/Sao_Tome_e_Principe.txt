add_namespace = Sao_Tome_e_Principe
add_namespace = Sao_Tome_e_PrincipeNews

#2001 São Toméan presidential election
country_event = {
	id = Sao_Tome_e_Principe.1
	title = Sao_Tome_e_Principe.1.t
	desc = Sao_Tome_e_Principe.1.d
	picture = GFX_SAO_Election
	is_triggered_only = yes
	trigger = {
		original_tag = SAO
		has_country_leader = { name = "Miguel Trovoada" ruling_only = yes }
	}
	immediate = {
		clr_country_flag = generic_election_killswitch
	}
	option = {
		name = Sao_Tome_e_Principe.1.a
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_Principe.1.a executed"

		custom_effect_tooltip = SAO_Histoical_path_TT

		hidden_effect = {
			retire_country_leader = yes
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 14 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			set_leader = yes
			set_politics = {
				ruling_party = neutrality
				elections_allowed = yes
			}
		}

		create_country_leader = {
			name = "Fradique de Menezes"
			picture = "Fradique_de_Menezes.dds"
			ideology = Neutral_conservatism
			traits = {
				neutrality_Neutral_conservatism
				businessman
			}
		}

		ai_chance = {
			base = 0
			modifier = {
				factor = 5
				is_historical_focus_on = yes
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 1
				is_historical_focus_on = no
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 5
				OR = {
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_COUP
					}
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_FOILED_COUP
					}
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_NO_ATTEMPTED_COUP
					}
				}
			}
		}
	}
	option = {
		name = Sao_Tome_e_Principe.1.b
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_Principe.1.b executed"

		hidden_effect = {
			retire_country_leader = yes
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 5 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			set_leader = yes
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
		}

		create_country_leader = {
			name = "Manuel Pinto da Costa"
			picture = "manuel_pinto_da_costa.dds"
			ideology = anarchist_communism
			traits = {
				emerging_anarchist_communism
				career_politician
			}
		}

		ai_chance = {
			base = 0
			modifier = {
				factor = 1
				is_historical_focus_on = no
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 10
				SAF = {
					emerging_anarchist_communism_are_in_power = yes
				}
				check_variable = { influence_array^0 = SAF }
				check_variable = { influence_array_val^0 > 14.999 }
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
				NOT = {
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_FOILED_COUP
					}
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_COUP
					}
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_NO_ATTEMPTED_COUP
					}
				}
			}
			modifier = {
				factor = 5
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_COSTA_WINS
				}
			}
		}
	}
}
#2003 Political Deadlock Over Constitutional Reforms
country_event = {
	id = Sao_Tome_e_Principe.2
	title = Sao_Tome_e_Principe.2.t
	desc = Sao_Tome_e_Principe.2.d
	is_triggered_only = yes
	trigger = {
		original_tag = SAO
		has_country_leader = { name = "Fradique de Menezes" ruling_only = yes }
	}
	option = {
		name = Sao_Tome_e_Principe.2.a
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_Principe.2.a executed"

		custom_effect_tooltip = SAO_Histoical_path_TT
		set_country_flag = SAO_dissolved_parliament
		add_stability = -0.05

		ai_chance = {
			base = 0
			modifier = {
				factor = 5
				is_historical_focus_on = yes
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 1
				is_historical_focus_on = no
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 5
				OR = {
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_FOILED_COUP
					}
					has_game_rule = {
						rule = SAO_ai_behavior
						option = SAO_MENEZES_WINS_COUP
					}
				}
			}
		}
	}
	option = {
		name = Sao_Tome_e_Principe.2.b
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_Principe.2.b executed"

		add_political_power = -75
		set_party_index_to_ruling_party = yes
		set_temp_variable = { party_popularity_increase = -0.10 }
		add_relative_party_popularity = yes

		ai_chance = {
			base = 0
			modifier = {
				factor = 1
				is_historical_focus_on = no
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 5
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_MENEZES_WINS_NO_ATTEMPTED_COUP
				}
			}
		}
	}
}

#2003 Major Fernando Commences Coup d'état. 
country_event = {
	id = Sao_Tome_e_Principe.3
	title = Sao_Tome_e_Principe.3.t
	desc = Sao_Tome_e_Principe.3.d
	picture = GFX_SAO_coup
	is_triggered_only = yes
	trigger = {
		original_tag = SAO
		has_country_leader = { name = "Fradique de Menezes" ruling_only = yes }
		has_country_flag = SAO_dissolved_parliament
	}
	option = {
		name = Sao_Tome_e_Principe.3.a
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_Principe.3.a executed"

		custom_effect_tooltip = SAO_Histoical_path_TT

		hidden_effect = {
			news_event = {
				id = Sao_Tome_e_PrincipeNews.1000
				days = 2
				random_hours = 6
			}
		}

		ai_chance = {
			base = 0
			modifier = {
				factor = 5
				is_historical_focus_on = yes
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 1
				is_historical_focus_on = no
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 5
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_MENEZES_WINS_FOILED_COUP
				}
			}
		}
	}
	option = {
		name = Sao_Tome_e_Principe.3.b
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_Principe.3.b executed"

		set_country_flag = SAO_Junta

		hidden_effect = {
			news_event = {
				id = Sao_Tome_e_PrincipeNews.1001
				days = 2
				random_hours = 6
			}
		}

		hidden_effect = {
			retire_country_leader = yes
			clear_array = ruling_party
			clear_array = gov_coalition_array
			add_to_array = { ruling_party = 22 }
			update_government_coalition_strength = yes
			update_party_name = yes
			set_coalition_drift = yes
			set_ruling_leader = yes
			set_leader = yes
			set_politics = {
				ruling_party = nationalist
				elections_allowed = yes
			}
			set_temp_variable = { party_index = 22 }
			set_temp_variable = { party_popularity_increase = 0.15 }
			set_temp_variable = { temp_outlook_increase = 0.15 }
			add_relative_party_popularity = yes
		}

		create_country_leader = {
			name = "Fernando 'Cobo' Pereira"
			picture = "fernando_pereira.dds"
			ideology = Nat_Autocracy
			traits = {
				nationalist_Nat_Autocracy
				army_general
			}
		}

		ai_chance = {
			base = 0
			modifier = {
				factor = 1
				is_historical_focus_on = no
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_DYNAMIC
				}
			}
			modifier = {
				factor = 5
				has_game_rule = {
					rule = SAO_ai_behavior
					option = SAO_MENEZES_WINS_COUP
				}
			}
		}
	}
}

news_event = {
	id = Sao_Tome_e_PrincipeNews.1000
	title = Sao_Tome_e_PrincipeNews.1000.t
	desc = Sao_Tome_e_PrincipeNews.1000.d
	picture = GFX_news_SAO_coup
	major = yes
	is_triggered_only = yes

	option = {
		name = Sao_Tome_e_PrincipeNews.1000.a
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_PrincipeNews.1000.a executed"
	}
}

news_event = {
	id = Sao_Tome_e_PrincipeNews.1001
	title = Sao_Tome_e_PrincipeNews.1001.t
	desc = Sao_Tome_e_PrincipeNews.1001.d
	picture = GFX_news_SAO_coup
	major = yes
	is_triggered_only = yes

	option = {
		name = Sao_Tome_e_PrincipeNews.1001.a
		log = "[GetDateText]: [This.GetName]: Sao_Tome_e_PrincipeNews.1001.a executed"
	}
}
