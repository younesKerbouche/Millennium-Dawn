add_namespace = Sahrawi
add_namespace = Sahrawi_news

#Lahbib Ayoub Defects
country_event = {
	id = Sahrawi.1
	title = Sahrawi.1.t
	desc = Sahrawi.1.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.1.a executed"
		name = Sahrawi.1.a
		ai_chance = {
			base = 0
			modifier = {
				factor = 500
				is_historical_focus_on = yes
			}
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.2.a executed"
		name = Sahrawi.1.b
		custom_effect_tooltip = SHA_aligns_the_banditsTT
		set_country_flag = SHA_align_with_bandits
	}
}
#if you get Al-Sahrawi
country_event = {
	id = Sahrawi.2
	title = Sahrawi.2.t
	desc = Sahrawi.2.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.2.a executed"
		name = Sahrawi.2.a
	}
}
#The Mauritanian Defector
country_event = {
	id = Sahrawi.3
	title = Sahrawi.3.t
	desc = Sahrawi.3.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.3.a executed"
		name = Sahrawi.3.a
		MAU = {
			SHA_saleh_ould_hanenna = {
				set_nationality = SHA
			}
			SHA_moulaye_ould_boukhreiss = {
				set_nationality = SHA
			}
		}
		SHA_saleh_ould_hanenna = {
			set_nationality = SHA
			add_corps_commander_role = {
				traits = { combined_arms_expert }
				skill = 2
				attack_skill = 2
				defense_skill = 1
				planning_skill = 4
				logistics_skill = 2
			}
		}
		SHA_moulaye_ould_boukhreiss = {
			set_nationality = SHA
			add_corps_commander_role = {
				traits = { scavenger }
				skill = 2
				attack_skill = 1
				defense_skill = 1
				planning_skill = 2
				logistics_skill = 2
			}
		}
		division_template = {
			name = "Brigade d'Infanterie"
			is_locked = yes
			regiments = {
				Mot_Militia_Bat = { x = 0 y = 0 }
				Mot_Militia_Bat = { x = 0 y = 1 }
				Mot_Militia_Bat = { x = 0 y = 2 }
				L_Inf_Bat = { x = 1 y = 0 }
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"Brigade d'Infanterie\" division_template = \"Brigade d'Infanterie\" start_experience_factor = 0.1 start_equipment_factor = 0.75"
				owner = ROOT
				count = 2
			}
		}
		declare_war_on = {
			target = MAU
			type = annex_everything
		}
	}
}
#Asking Mauritanian for Weapons
country_event = {
	id = Sahrawi.4
	title = Sahrawi.4.t
	desc = Sahrawi.4.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.4.a executed"
		name = Sahrawi.4.a
		FROM = {
			country_event = Sahrawi.5
			effect_tooltip = {
				MAU= {
					set_temp_variable = { treasury_change = -5 }
					modify_treasury_effect = yes
				}
				add_equipment_to_stockpile = {
					type = medium_tank_chassis_0
					variant_name = "T-55"
					amount = 25
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = medium_tank_flame_chassis_0
					variant_name = "BMP-1"
					amount = 50
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = artillery_0	#D-30
					amount = 45
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = medium_tank_artillery_chassis_0
					variant_name = "2S1 Gvozdika"
					amount = 10
					producer = SOV
				}
				add_equipment_to_stockpile = {
					type = infantry_weapons
					amount = 3500
					producer = SOV
				}
				set_temp_variable = { percent_change = 3 }
				set_temp_variable = { tag_index = MAU }
				set_temp_variable = { influence_target = SHA }
				change_influence_percentage = yes
				add_opinion_modifier = {
					target = MAU
					modifier = military_aid
				}
			}
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.4.b executed"
		name = Sahrawi.1.b
		FROM = {
			country_event = Sahrawi.6
			effect_tooltip = {
				add_opinion_modifier = {
					target = MAU
					modifier = military_aid_denied
				}
			}
		}
	}
}
#Mauritania Accepts
country_event = {
	id = Sahrawi.5
	title = Sahrawi.5.t
	desc = Sahrawi.5.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.5.a executed"
		name = Sahrawi.5.a
		MAU= {
			set_temp_variable = { treasury_change = -5 }
			modify_treasury_effect = yes
		}
		add_equipment_to_stockpile = {
			type = medium_tank_chassis_0
			variant_name = "T-55"
			amount = 25
			producer = SOV
		}
		add_equipment_to_stockpile = {
			type = medium_tank_flame_chassis_0
			variant_name = "BMP-1"
			amount = 50
			producer = SOV
		}
		add_equipment_to_stockpile = {
			type = artillery_0	#D-30
			amount = 45
			producer = SOV
		}
		add_equipment_to_stockpile = {
			type = medium_tank_artillery_chassis_0
			variant_name = "2S1 Gvozdika"
			amount = 10
			producer = SOV
		}
		add_equipment_to_stockpile = {
			type = infantry_weapons
			amount = 3500
			producer = SOV
		}
		set_temp_variable = { percent_change = 3 }
		set_temp_variable = { tag_index = MAU }
		set_temp_variable = { influence_target = SHA }
		change_influence_percentage = yes
		add_opinion_modifier = {
			target = MAU
			modifier = military_aid
		}
	}
}
#Mauritania Rejects
country_event = {
	id = Sahrawi.6
	title = Sahrawi.6.t
	desc = Sahrawi.6.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.6.a executed"
		name = Sahrawi.6.a
		add_opinion_modifier = {
			target = MAU
			modifier = military_aid_denied
		}
	}
}

#Morcco get request to peace out
country_event = {
	id = Sahrawi.7
	title = Sahrawi.7.t
	desc = Sahrawi.7.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.7.a executed"
		name = Sahrawi.7.a
		SHA = { country_event = Sahrawi.8 }
		ai_chance = {
			base = 10
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.7.b executed"
		name = Sahrawi.7.b
	}
}

#They Propose peace
country_event = {
	id = Sahrawi.8
	title = Sahrawi.8.t
	desc = Sahrawi.8.d

	#picture = GFX_country_event_amazon_rainforest_devastation

	is_triggered_only = yes

	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.6.a executed"
		name = Sahrawi.8.a
		hidden_effect = { 
			news_event = { id = Sahrawi_news.1 days = 3 }
			373 = { transfer_state_to = SHA }
			white_peace = MOR
		}
		ai_chance = {
			base = 10
			modifier = { NOT = { has_government = fascism } factor = -10 }
		}
	}
	option = {
		log = "[GetDateText]: [This.GetName]: Sahrawi.6.b executed"
		name = Sahrawi.8.b
		ai_chance = {
			base = 0
			modifier = { has_government = fascism factor = 50 }
		}
	}
}

news_event = {
	id = Sahrawi_news.1
	title = Sahrawi_news.1.t
	desc = Sahrawi_news.1.d
	picture = GFX_AIQ_prepares_attacks_on_Iraq_news
	major = yes
	is_triggered_only = yes

	option = {
		name = Sahrawi_news.1.a
		log = "[GetDateText]: [This.GetName]: Sahrawi_news.1.a executed"
	}
}

news_event = {
	id = Sahrawi_news.2
	title = Sahrawi_news.2.t
	desc = Sahrawi_news.2.d
	picture = GFX_AIQ_prepares_attacks_on_Iraq_news
	major = yes
	is_triggered_only = yes

	option = {
		name = Sahrawi_news.2.a
		log = "[GetDateText]: [This.GetName]: Sahrawi_news.2.a executed"
	}
}

