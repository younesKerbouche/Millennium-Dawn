# Author(s): TheGeneral
# Armor
CHI_norinco_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_Norinco_CHI

	task_capacity = 18

	equipment_type = {
		Inf_equipment
		artillery_equipment
		L_AT_Equipment
		H_AT_Equipment
		util_vehicle_equipment
		mio_cat_all_armor
		sam_missile_equipment
		guided_missile_equipment
	}

	research_categories = {
		CAT_infrastructure
		CAT_excavation_tech
		CAT_fuel_oil
		CAT_missile
		CAT_armor
		CAT_artillery
		CAT_inf
	}

	tree_header_text = {
		text = "Infantry Equipment & Mobility"
		x = 1
	}
	tree_header_text = {
		text = "Armored Vehicles & AFV Systems"
		x = 5
	}
	tree_header_text = {
		text = "Missiles, Air Defence & Drones"
		x = 8
	}

	initial_trait = {
		name = CHI_norinco_company_trait

		equipment_bonus = {
			reliability = 0.03
			build_cost_ic = -0.03
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.08
			military_industrial_organization_funds_gain = 0.02
		}
	}
	trait = {
		token = CHI_norinco_trait_field_proven_rifle_design
		name = CHI_norinco_trait_field_proven_rifle_design
		icon = GFX_generic_mio_trait_icon_smallarms_reliability
		position = { x = 1 y = 0 }

		limit_to_equipment_type = {
			Inf_equipment
		}

		equipment_bonus = {
			reliability = 0.03
			soft_attack = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_suppressed_pdw_systems
		name = CHI_norinco_trait_suppressed_pdw_systems
		icon = GFX_generic_mio_trait_icon_smallarms_attack

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = -1 y = 1 }
		all_parents = { CHI_norinco_trait_field_proven_rifle_design }

		limit_to_equipment_type = {
			Inf_equipment
		}

		equipment_bonus = {
			soft_attack = 0.06
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_high_velocity_propellant
		name = CHI_norinco_trait_high_velocity_propellant
		icon = GFX_generic_mio_trait_icon_soft_attack

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 0 y = 1 }
		all_parents = { CHI_norinco_trait_field_proven_rifle_design }

		limit_to_equipment_type = {
			Inf_equipment
			artillery_equipment
		}

		equipment_bonus = { soft_attack = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_precision_fuzing_suite
		name = CHI_norinco_trait_precision_fuzing_suite
		icon = GFX_generic_mio_trait_icon_artillery_soft_attack

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 1 }
		all_parents = { CHI_norinco_trait_field_proven_rifle_design }

		limit_to_equipment_type = {
			artillery_equipment
		}

		equipment_bonus = { soft_attack = 0.04 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_rapid_artillery_traverse
		name = CHI_norinco_trait_rapid_artillery_traverse
		icon = GFX_generic_mio_trait_icon_artillery_speed

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = -1 y = 2 }
		all_parents = { CHI_norinco_trait_precision_fuzing_suite }

		limit_to_equipment_type = {
			artillery_equipment
		}

		equipment_bonus = { maximum_speed = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_lightweight_transport_chassis
		name = CHI_norinco_trait_lightweight_transport_chassis
		icon = GFX_generic_mio_trait_icon_util_speed

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 0 y = 2 }
		all_parents = {
			CHI_norinco_trait_high_velocity_propellant
			CHI_norinco_trait_precision_fuzing_suite
		}

		limit_to_equipment_type = {
			util_vehicle_equipment
		}

		equipment_bonus = {
			maximum_speed = 0.08
			fuel_consumption = -0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_hardened_logistic_shelters
		name = CHI_norinco_trait_hardened_logistic_shelters
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 2 }
		all_parents = { CHI_norinco_trait_precision_fuzing_suite }

		limit_to_equipment_type = {
			util_vehicle_equipment
			artillery_equipment
		}

		equipment_bonus = { reliability = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_integrated_ammo_handling
		name = CHI_norinco_trait_integrated_ammo_handling
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = -1 y = 3 }
		all_parents = { CHI_norinco_trait_lightweight_transport_chassis }

		limit_to_equipment_type = {
			util_vehicle_equipment
			artillery_equipment
		}

		production_bonus = { production_efficiency_gain_factor = 0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_artillery_modular_fire_control
		name = CHI_norinco_trait_artillery_modular_fire_control
		icon = GFX_generic_mio_trait_icon_artillery_breaktrough

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 3 }
		all_parents = { CHI_norinco_trait_hardened_logistic_shelters }

		limit_to_equipment_type = {
			artillery_equipment
		}

		equipment_bonus = {
			soft_attack = 0.03
			breakthrough = 0.08
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_export_certified_artillery
		name = CHI_norinco_trait_export_certified_artillery
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 4 }
		all_parents = { CHI_norinco_trait_artillery_modular_fire_control }

		limit_to_equipment_type = {
			artillery_equipment
		}

		production_bonus = { production_capacity_factor = 0.05 }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_red_arrow_L_AT_Equipment_suite
		name = CHI_norinco_trait_red_arrow_L_AT_Equipment_suite
		icon = GFX_generic_mio_trait_icon_atgm_hard_attack

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = -1 y = 4 }
		all_parents = {
			CHI_norinco_trait_artillery_modular_fire_control
			CHI_norinco_trait_integrated_ammo_handling
		}

		limit_to_equipment_type = {
			L_AT_Equipment
		}

		equipment_bonus = { hard_attack = 0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_tandem_heat_optimization
		name = CHI_norinco_trait_tandem_heat_optimization
		icon = GFX_generic_mio_trait_icon_atgm_ap_attack

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 0 y = 5 }
		all_parents = { CHI_norinco_trait_red_arrow_L_AT_Equipment_suite }

		limit_to_equipment_type = {
			L_AT_Equipment
		}

		equipment_bonus = { ap_attack = 0.06 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_multi_role_warhead_options
		name = CHI_norinco_trait_multi_role_warhead_options
		icon = GFX_generic_mio_trait_icon_breakthrough

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 5 }
		all_parents = {
			CHI_norinco_trait_red_arrow_L_AT_Equipment_suite
			CHI_norinco_trait_export_certified_artillery
		}

		limit_to_equipment_type = {
			L_AT_Equipment
			artillery_equipment
		}

		equipment_bonus = {
			breakthrough = 0.06
			build_cost_ic = -0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_night_optics_fire_control
		name = CHI_norinco_trait_night_optics_fire_control
		icon = GFX_generic_mio_trait_icon_soft_attack

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = -1 y = 6 }
		all_parents = { CHI_norinco_trait_red_arrow_L_AT_Equipment_suite }

		limit_to_equipment_type = {
			Inf_equipment
			L_AT_Equipment
		}

		equipment_bonus = {
			soft_attack = 0.06
			reliability = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_rapid_rearm_trucks
		name = CHI_norinco_trait_rapid_rearm_trucks
		icon = GFX_generic_mio_trait_icon_util_efficiency_gain

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 0 y = 6 }
		all_parents = { CHI_norinco_trait_tandem_heat_optimization }

		limit_to_equipment_type = {
			util_vehicle_equipment
		}

		production_bonus = { production_efficiency_gain_factor = 0.04 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_ballistics_research_cell
		name = CHI_norinco_trait_ballistics_research_cell
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 6 }
		all_parents = { CHI_norinco_trait_multi_role_warhead_options }

		organization_modifier = { military_industrial_organization_research_bonus = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_hardened_cold_start_systems
		name = CHI_norinco_trait_hardened_cold_start_systems
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 0 y = 7 }
		all_parents = { CHI_norinco_trait_rapid_rearm_trucks }

		limit_to_equipment_type = {
			util_vehicle_equipment
			artillery_equipment
		}

		equipment_bonus = {
			reliability = 0.06
			build_cost_ic = -0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_lightweight_towed_howitzer
		name = CHI_norinco_trait_lightweight_towed_howitzer
		icon = GFX_generic_mio_trait_icon_artillery_speed

		relative_position_id = CHI_norinco_trait_field_proven_rifle_design
		position = { x = 1 y = 7 }
		all_parents = { CHI_norinco_trait_ballistics_research_cell }

		limit_to_equipment_type = {
			artillery_equipment
		}

		equipment_bonus = {
			soft_attack = 0.02
			maximum_speed = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_norinco_trait_modular_armor_tiles
		name = CHI_norinco_trait_modular_armor_tiles
		icon = GFX_generic_mio_trait_icon_armor_value
		position = { x = 4 y = 0 }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { armor_value = 0.04 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_active_protection_array
		name = CHI_norinco_trait_active_protection_array
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 0 y = 1 }
		all_parents = { CHI_norinco_trait_modular_armor_tiles }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { defense = 0.06 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_composite_hull_integration
		name = CHI_norinco_trait_composite_hull_integration
		icon = GFX_generic_mio_trait_icon_weight

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 1 y = 1 }
		all_parents = { CHI_norinco_trait_modular_armor_tiles }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { defense = 0.03 weight = -0.01 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_hydropneumatic_suspension
		name = CHI_norinco_trait_hydropneumatic_suspension
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 2 y = 1 }
		all_parents = { CHI_norinco_trait_modular_armor_tiles }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { maximum_speed = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_common_chassis_family
		name = CHI_norinco_trait_common_chassis_family
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 1 y = 2 }
		all_parents = { CHI_norinco_trait_composite_hull_integration }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		production_bonus = { production_efficiency_cap_factor = 0.10 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_diesel_hybrid_drive
		name = CHI_norinco_trait_diesel_hybrid_drive
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 2 y = 2 }
		all_parents = { CHI_norinco_trait_hydropneumatic_suspension }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { fuel_consumption = -0.02 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_thermal_signature_suppression
		name = CHI_norinco_trait_thermal_signature_suppression
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 0 y = 2 }
		all_parents = { CHI_norinco_trait_active_protection_array }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { max_organisation = 0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_slat_spaced_armor
		name = CHI_norinco_trait_slat_spaced_armor
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 0 y = 3 }
		all_parents = { CHI_norinco_trait_thermal_signature_suppression }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = {
			defense = 0.06
			armor_value = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_remote_weapon_station
		name = CHI_norinco_trait_remote_weapon_station
		icon = GFX_generic_mio_trait_icon_hard_attack

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 1 y = 3 }
		all_parents = { CHI_norinco_trait_common_chassis_family }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { hard_attack = 0.02 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_high_cap_cooling
		name = CHI_norinco_trait_high_cap_cooling
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 2 y = 3 }
		all_parents = { CHI_norinco_trait_diesel_hybrid_drive }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = { reliability = 0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_command_control_canopy
		name = CHI_norinco_trait_command_control_canopy
		icon = GFX_generic_mio_trait_icon_task

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 0 y = 4 }
		all_parents = { CHI_norinco_trait_remote_weapon_station }

		available = {
			CHI = { NOT = { has_idea = CHI_PLA_Business_Ventures } }
		}

		organization_modifier = { military_industrial_organization_task_capacity = 1 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_rapid_armor_repair
		name = CHI_norinco_trait_rapid_armor_repair
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 1 y = 4 }
		all_parents = { CHI_norinco_trait_remote_weapon_station }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		production_bonus = { production_efficiency_gain_factor = 0.10 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_light_reactive_arrays
		name = CHI_norinco_trait_light_reactive_arrays
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 2 y = 4 }
		all_parents = { CHI_norinco_trait_high_cap_cooling CHI_norinco_trait_remote_weapon_station }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = {
			defense = 0.05
			build_cost_ic = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_ballistic_testing_lab
		name = CHI_norinco_trait_ballistic_testing_lab
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 1 y = 5 }
		all_parents = { CHI_norinco_trait_rapid_armor_repair }

		organization_modifier = { military_industrial_organization_research_bonus = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_amphibious_mobility_kit
		name = CHI_norinco_trait_amphibious_mobility_kit
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 2 y = 5 }
		all_parents = { CHI_norinco_trait_light_reactive_arrays }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_composite_repair_docks
		name = CHI_norinco_trait_composite_repair_docks
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_norinco_trait_modular_armor_tiles
		position = { x = 1 y = 6 }
		all_parents = { CHI_norinco_trait_ballistic_testing_lab }

		limit_to_equipment_type = {
			mio_cat_all_armor
		}

		production_bonus = {
			production_capacity_factor = 0.08
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_norinco_trait_networked_fire_distribution
		name = CHI_norinco_trait_networked_fire_distribution
		icon = GFX_generic_mio_trait_icon_research
		position = { x = 7 y = 0 }

		organization_modifier = { military_industrial_organization_research_bonus = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_multi_mode_seeker
		name = CHI_norinco_trait_multi_mode_seeker
		icon = GFX_generic_mio_trait_icon_air_attack

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 0 y = 1 }
		all_parents = { CHI_norinco_trait_networked_fire_distribution }

		limit_to_equipment_type = {
			sam_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			air_attack = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_adaptive_thrust_management
		name = CHI_norinco_trait_adaptive_thrust_management
		icon = GFX_generic_mio_trait_icon_guided_missile_range

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 1 y = 1 }
		all_parents = { CHI_norinco_trait_networked_fire_distribution }

		limit_to_equipment_type = {
			guided_missile_equipment
		}

		equipment_bonus = {
			air_range = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_anti_jamming_guidance
		name = CHI_norinco_trait_anti_jamming_guidance
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 2 y = 1 }
		all_parents = { CHI_norinco_trait_networked_fire_distribution }

		limit_to_equipment_type = {
			sam_missile_equipment
			guided_missile_equipment
		}

		equipment_bonus = {
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_vertical_launch_module
		name = CHI_norinco_trait_vertical_launch_module
		icon = GFX_generic_mio_trait_icon_sam_defense

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 0 y = 2 }
		all_parents = { CHI_norinco_trait_multi_mode_seeker }

		limit_to_equipment_type = {
			sam_missile_equipment
		}

		equipment_bonus = {
			air_defence = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_multi_warhead_configurations
		name = CHI_norinco_trait_multi_warhead_configurations
		icon = GFX_generic_mio_trait_icon_guided_missile_strategic_attack

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 1 y = 2 }
		all_parents = { CHI_norinco_trait_adaptive_thrust_management }

		limit_to_equipment_type = {
			guided_missile_equipment
		}

		equipment_bonus = {
			strategic_attack = 0.06
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_localised_warhead_production
		name = CHI_norinco_trait_localised_warhead_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 2 y = 2 }
		all_parents = { CHI_norinco_trait_anti_jamming_guidance }

		limit_to_equipment_type = {
			guided_missile_equipment
			sam_missile_equipment
		}

		production_bonus = {
			production_capacity_factor = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_boost_phase_extension
		name = CHI_norinco_trait_boost_phase_extension
		icon = GFX_generic_mio_trait_icon_guided_missile_range

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 0 y = 3 }
		all_parents = { CHI_norinco_trait_vertical_launch_module }

		limit_to_equipment_type = {
			guided_missile_equipment
		}

		equipment_bonus = {
			air_range = 0.04
			build_cost_ic = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_seeker_calibration_ranges
		name = CHI_norinco_trait_seeker_calibration_ranges
		icon = GFX_generic_mio_trait_icon_task

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 1 y = 3 }
		all_parents = { CHI_norinco_trait_multi_warhead_configurations }

		available = {
			CHI = { NOT = { has_idea = CHI_PLA_Business_Ventures } }
		}

		organization_modifier = { military_industrial_organization_task_capacity = 1 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_hpm_jammer
		name = CHI_norinco_trait_hpm_jammer
		icon = GFX_generic_mio_trait_icon_sam_defense

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 2 y = 3 }
		all_parents = { CHI_norinco_trait_localised_warhead_production }

		limit_to_equipment_type = {
			sam_missile_equipment
		}

		equipment_bonus = {
			air_defence = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_swarm_control_architecture
		name = CHI_norinco_trait_swarm_control_architecture
		icon = GFX_generic_mio_trait_icon_uav_defense

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 0 y = 4 }
		all_parents = {
			CHI_norinco_trait_hpm_jammer
			CHI_norinco_trait_boost_phase_extension
		}

		limit_to_equipment_type = {
			mio_cat_eq_only_uav
		}

		equipment_bonus = {
			air_attack = 0.02
			air_defence = 0.06
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_composite_drone_frames
		name = CHI_norinco_trait_composite_drone_frames
		icon = GFX_generic_mio_trait_icon_uav_weight

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 1 y = 4 }
		all_parents = { CHI_norinco_trait_hpm_jammer }

		equipment_bonus = {
			reliability = 0.02
			weight = -0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_autonomous_recon_relay
		name = CHI_norinco_trait_autonomous_recon_relay
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 2 y = 4 }
		all_parents = { CHI_norinco_trait_hpm_jammer }

		limit_to_equipment_type = {
			mio_cat_eq_only_uav
		}

		equipment_bonus = { air_range = 0.02 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_loiter_endurance_batteries
		name = CHI_norinco_trait_loiter_endurance_batteries
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 0 y = 5 }
		all_parents = { CHI_norinco_trait_swarm_control_architecture }

		limit_to_equipment_type = {
			mio_cat_eq_only_uav
		}

		equipment_bonus = { air_range = 0.03 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_norinco_trait_rapid_drone_launch_canister
		name = CHI_norinco_trait_rapid_drone_launch_canister
		icon = GFX_generic_mio_trait_icon_uav_efficiency_gain

		relative_position_id = CHI_norinco_trait_networked_fire_distribution
		position = { x = 1 y = 5 }
		all_parents = {
			CHI_norinco_trait_autonomous_recon_relay
			CHI_norinco_trait_composite_drone_frames
		}

		limit_to_equipment_type = {
			mio_cat_eq_only_uav
		}

		production_bonus = { production_efficiency_gain_factor = 0.10 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_caic_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_Changhe_Aircraft_Corp_CHI

	equipment_type = {
		mio_cat_helicopters
	}

	research_categories = {
		CAT_heli
	}


	task_capacity = 8

	research_bonus = 0.03

	tree_header_text = { text = "Attack & Strike Rotary" x = 2 }
	tree_header_text = { text = "Lift & Naval Rotary"   x = 7 }

	initial_trait = {
		name = CHI_caic_manufacturer_trait

		equipment_bonus = {
			maximum_speed = 0.10
		}

		organization_modifier = {
			military_industrial_organization_industrial_manufacturer_assign_cost = -0.25
		}
	}

	trait = {
		token = CHI_changhe_trait_fbw_response_tuning
		name = CHI_changhe_trait_fbw_response_tuning
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 2 y = 0 }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			defense = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_fadec_hot_high_mapping
		name = CHI_changhe_trait_fadec_hot_high_mapping
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = -2 y = 1 }

		all_parents = {
			CHI_changhe_trait_fbw_response_tuning
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			max_organisation = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_ir_suppressor_plenum
		name = CHI_changhe_trait_ir_suppressor_plenum
		icon = GFX_generic_mio_trait_icon_ap_attack

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 2 y = 1 }

		all_parents = {
			CHI_changhe_trait_fbw_response_tuning
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			ap_attack = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_hmd_eo_fusion
		name = CHI_changhe_trait_hmd_eo_fusion
		icon = GFX_generic_mio_trait_icon_hard_attack

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 0 y = 1 }

		all_parents = {
			CHI_changhe_trait_fbw_response_tuning
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			hard_attack = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_mast_sensor_harmonization
		name = CHI_changhe_trait_mast_sensor_harmonization
		icon = GFX_generic_mio_trait_icon_breakthrough

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = -2 y = 2 }

		all_parents = {
			CHI_changhe_trait_fadec_hot_high_mapping
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			breakthrough = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_digital_stores_management
		name = CHI_changhe_trait_digital_stores_management
		icon = GFX_generic_mio_trait_icon_soft_attack

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 2 y = 2 }

		all_parents = {
			CHI_changhe_trait_ir_suppressor_plenum
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_crashworthy_systems
		name = CHI_changhe_trait_crashworthy_systems
		icon = GFX_generic_mio_trait_icon_armor_value

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 0 y = 2 }

		all_parents = {
			CHI_changhe_trait_hmd_eo_fusion
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_vibration_isolation
		name = CHI_changhe_trait_vibration_isolation
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = -2 y = 3 }

		all_parents = {
			CHI_changhe_trait_mast_sensor_harmonization
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			maximum_speed = 0.02
			max_organisation = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_hardened_avionics_bay
		name = CHI_changhe_trait_hardened_avionics_bay
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 2 y = 3 }

		all_parents = {
			CHI_changhe_trait_digital_stores_management
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_countermeasures_calibration
		name = CHI_changhe_trait_countermeasures_calibration
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 0 y = 3 }

		all_parents = {
			CHI_changhe_trait_crashworthy_systems
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			defense = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_gunship_final_assembly
		name = CHI_changhe_trait_gunship_final_assembly
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = -2 y = 4 }

		all_parents = {
			CHI_changhe_trait_vibration_isolation
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		production_bonus = {
			production_capacity_factor = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_avionics_common_benches
		name = CHI_changhe_trait_avionics_common_benches
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 2 y = 4 }

		all_parents = {
			CHI_changhe_trait_hardened_avionics_bay
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_pilot_workload_reduction
		name = CHI_changhe_trait_pilot_workload_reduction
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_changhe_trait_fbw_response_tuning
		position = { x = 0 y = 4 }

		all_parents = {
			CHI_changhe_trait_countermeasures_calibration
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			maximum_speed = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_changhe_trait_high_lift_rotor_design
		name = CHI_changhe_trait_high_lift_rotor_design
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 7 y = 0 }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			maximum_speed = 0.05
			fuel_consumption = -0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_composite_corrosion_coating
		name = CHI_changhe_trait_composite_corrosion_coating
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = -1 y = 1 }

		all_parents = {
			CHI_changhe_trait_high_lift_rotor_design
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_foldable_rotor_system
		name = CHI_changhe_trait_foldable_rotor_system
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 1 y = 1 }

		all_parents = {
			CHI_changhe_trait_high_lift_rotor_design
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			max_organisation = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_deck_handling_lugs
		name = CHI_changhe_trait_deck_handling_lugs
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 2 y = 1 }

		all_parents = {
			CHI_changhe_trait_high_lift_rotor_design
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			defense = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_salt_resistant_materials
		name = CHI_changhe_trait_salt_resistant_materials
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = -1 y = 2 }

		all_parents = {
			CHI_changhe_trait_composite_corrosion_coating
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_heavy_gearbox_reinforcement
		name = CHI_changhe_trait_heavy_gearbox_reinforcement
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 1 y = 2 }

		all_parents = {
			CHI_changhe_trait_foldable_rotor_system
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_cabin_modular_rails
		name = CHI_changhe_trait_cabin_modular_rails
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 2 y = 2 }

		all_parents = {
			CHI_changhe_trait_deck_handling_lugs
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_sar_hoist_integration
		name = CHI_changhe_trait_sar_hoist_integration
		icon = GFX_generic_mio_trait_icon_breakthrough

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = -1 y = 3 }

		all_parents = {
			CHI_changhe_trait_salt_resistant_materials
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			breakthrough = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_blade_deicing_network
		name = CHI_changhe_trait_blade_deicing_network
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 1 y = 3 }

		all_parents = {
			CHI_changhe_trait_heavy_gearbox_reinforcement
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_naval_flow_cells
		name = CHI_changhe_trait_naval_flow_cells
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 2 y = 3 }

		all_parents = {
			CHI_changhe_trait_cabin_modular_rails
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		production_bonus = {
			production_capacity_factor = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_shipborne_maintenance_standard
		name = CHI_changhe_trait_shipborne_maintenance_standard
		icon = GFX_generic_mio_trait_icon_task

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = -1 y = 4 }

		available = {
			CHI = { NOT = { has_idea = CHI_PLA_Business_Ventures } }
		}

		all_parents = {
			CHI_changhe_trait_sar_hoist_integration
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		organization_modifier = {
			military_industrial_organization_task_capacity = 1
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_amphibious_sealant_package
		name = CHI_changhe_trait_amphibious_sealant_package
		icon = GFX_generic_mio_trait_icon_armor_value

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 1 y = 4 }

		all_parents = {
			CHI_changhe_trait_blade_deicing_network
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			armor_value = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_changhe_trait_ramp_loading_integration
		name = CHI_changhe_trait_ramp_loading_integration
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_changhe_trait_high_lift_rotor_design
		position = { x = 2 y = 4 }

		all_parents = {
			CHI_changhe_trait_naval_flow_cells
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		production_bonus = {
			production_resource_need_factor = -0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}

CHI_inner_mongolia_first_machinery_tank_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_Inner_Mongolia_First_Machinery_CHI

	task_capacity = 8

	equipment_type = {
		medium_tank_chassis
		util_vehicle_equipment
	}

	research_categories = {
		CAT_armor
		CAT_util
	}

	tree_header_text = { text = "Tracked Armor Works" x = 2 }
	tree_header_text = { text = "Heavy Truck & Logistics" x = 7 }

	initial_trait = {
		name = CHI_imfm_company_trait

		equipment_bonus = {
			armor_value = 0.03
			reliability = 0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

	}
	trait = {
		token = CHI_imfm_trait_welded_rolled_hull
		name = CHI_imfm_trait_welded_rolled_hull
		icon = GFX_generic_mio_trait_icon_mbt_armor

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_new_era_composite_arrays
		name = CHI_imfm_trait_new_era_composite_arrays
		icon = GFX_generic_mio_trait_icon_mbt_armor

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = -2 y = 1 }
		all_parents = { CHI_imfm_trait_welded_rolled_hull }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			armor_value = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_glacis_angle_tuning
		name = CHI_imfm_trait_glacis_angle_tuning
		icon = GFX_generic_mio_trait_icon_mbt_breakthrough

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 2 y = 1 }
		all_parents = { CHI_imfm_trait_welded_rolled_hull }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			breakthrough = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_apu_silent_watch
		name = CHI_imfm_trait_apu_silent_watch
		icon = GFX_generic_mio_trait_icon_mbt_reliability

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 0 y = 1 }
		all_parents = { CHI_imfm_trait_welded_rolled_hull }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			fuel_consumption = -0.03
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_hydropneumatic_upgrade
		name = CHI_imfm_trait_hydropneumatic_upgrade
		icon = GFX_generic_mio_trait_icon_mbt_speed

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = -2 y = 2 }
		all_parents = { CHI_imfm_trait_new_era_composite_arrays }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			maximum_speed = 0.03
			reliability = -0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_long_rod_ammo_line
		name = CHI_imfm_trait_long_rod_ammo_line
		icon = GFX_generic_mio_trait_icon_mbt

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 2 y = 2 }
		all_parents = {
			CHI_imfm_trait_glacis_angle_tuning
			CHI_imfm_trait_apu_silent_watch
		}

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.03
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_remote_weapon_station
		name = CHI_imfm_trait_remote_weapon_station
		icon = GFX_generic_mio_trait_icon_mbt_defense

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 0 y = 2 }
		all_parents = { CHI_imfm_trait_apu_silent_watch }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			soft_attack = 0.03
			defense = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_aps_interceptor_grid
		name = CHI_imfm_trait_aps_interceptor_grid
		icon = GFX_generic_mio_trait_icon_mbt_armor

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = -1 y = 3 }
		all_parents = {
			CHI_imfm_trait_hydropneumatic_upgrade
			CHI_imfm_trait_remote_weapon_station
		}

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			armor_value = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_automated_gun_laying
		name = CHI_imfm_trait_automated_gun_laying
		icon = GFX_generic_mio_trait_icon_mbt_breakthrough

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 3 y = 3 }
		all_parents = {
			CHI_imfm_trait_long_rod_ammo_line
			CHI_imfm_trait_remote_weapon_station
		}

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			breakthrough = 0.03
			soft_attack = 0.01
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_silica_erp_coatings
		name = CHI_imfm_trait_silica_erp_coatings
		icon = GFX_generic_mio_trait_icon_mbt_reliability

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 1 y = 3 }
		all_parents = { CHI_imfm_trait_remote_weapon_station }

		limit_to_equipment_type = { medium_tank_chassis }

		equipment_bonus = {
			reliability = 0.03
			fuel_consumption = -0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_baotou_armored_flow
		name = CHI_imfm_trait_baotou_armored_flow
		icon = GFX_generic_mio_trait_icon_mbt_efficiency_cap

		relative_position_id = CHI_imfm_trait_welded_rolled_hull
		position = { x = 1 y = 4 }
		all_parents = {
			CHI_imfm_trait_automated_gun_laying
			CHI_imfm_trait_silica_erp_coatings
			CHI_imfm_trait_aps_interceptor_grid
		}

		limit_to_equipment_type = { medium_tank_chassis }

		production_bonus = {
			production_cost_factor = -0.05
			production_efficiency_cap_factor = 0.10
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_imfm_trait_modular_ladder_frame
		name = CHI_imfm_trait_modular_ladder_frame
		icon = GFX_generic_mio_trait_icon_util_speed

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { util_vehicle_equipment }

		equipment_bonus = {
			maximum_speed = 0.03
			reliability = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_all_wheel_drive_hubs
		name = CHI_imfm_trait_all_wheel_drive_hubs
		icon = GFX_generic_mio_trait_icon_util_reliability

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = -1 y = 1 }
		all_parents = { CHI_imfm_trait_modular_ladder_frame }

		limit_to_equipment_type = { util_vehicle_equipment }

		equipment_bonus = {
			reliability = 0.03
			breakthrough = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_high_clearance_axles
		name = CHI_imfm_trait_high_clearance_axles
		icon = GFX_generic_mio_trait_icon_util_speed

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 1 y = 1 }
		all_parents = { CHI_imfm_trait_modular_ladder_frame }

		limit_to_equipment_type = { util_vehicle_equipment }

		equipment_bonus = {
			maximum_speed = 0.02
			fuel_consumption = -0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_turbo_diesel_mapping
		name = CHI_imfm_trait_turbo_diesel_mapping
		icon = GFX_generic_mio_trait_icon_util_reliability

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 2 y = 5 }
		all_parents = { CHI_imfm_trait_baotou_truck_flow }

		limit_to_equipment_type = { util_vehicle_equipment }

		equipment_bonus = {
			fuel_consumption = -0.03
			reliability = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_cold_weather_packages
		name = CHI_imfm_trait_cold_weather_packages
		icon = GFX_generic_mio_trait_icon_util_reliability

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = -1 y = 2 }
		all_parents = { CHI_imfm_trait_all_wheel_drive_hubs }

		limit_to_equipment_type = { util_vehicle_equipment }

		equipment_bonus = {
			reliability = 0.03
			defense = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_heavy_axle_supply_chain
		name = CHI_imfm_trait_heavy_axle_supply_chain
		icon = GFX_generic_mio_trait_icon_util_efficiency_gain

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 1 y = 2 }
		all_parents = { CHI_imfm_trait_high_clearance_axles }

		limit_to_equipment_type = { util_vehicle_equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.06
			production_capacity_factor = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_diesel_emissions_benchmark
		name = CHI_imfm_trait_diesel_emissions_benchmark
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 0 y = 5 }
		all_parents = { CHI_imfm_trait_baotou_truck_flow }

		equipment_bonus = {
			fuel_consumption = -0.02
		}

		production_bonus = {
			production_resource_need_factor = -0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_quick_swap_cab_modules
		name = CHI_imfm_trait_quick_swap_cab_modules
		icon = GFX_generic_mio_trait_icon_util_buildcost

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 0 y = 3 }
		all_parents = { CHI_imfm_trait_cold_weather_packages }

		limit_to_equipment_type = { util_vehicle_equipment }

		equipment_bonus = {
			build_cost_ic = -0.06
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_logistics_telematics
		name = CHI_imfm_trait_logistics_telematics
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 2 y = 3 }
		all_parents = { CHI_imfm_trait_heavy_axle_supply_chain }

		limit_to_equipment_type = { util_vehicle_equipment }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
			military_industrial_organization_funds_gain = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_localized_supplier_pool
		name = CHI_imfm_trait_localized_supplier_pool
		icon = GFX_generic_mio_trait_icon_util_resources

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 1 y = 6 }
		all_parents = {
			CHI_imfm_trait_diesel_emissions_benchmark
			CHI_imfm_trait_turbo_diesel_mapping
		}

		limit_to_equipment_type = { util_vehicle_equipment }

		production_bonus = {
			production_resource_need_factor = -0.06
			production_resource_penalty_factor = -0.06
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_imfm_trait_baotou_truck_flow
		name = CHI_imfm_trait_baotou_truck_flow
		icon = GFX_generic_mio_trait_icon_util

		relative_position_id = CHI_imfm_trait_modular_ladder_frame
		position = { x = 1 y = 4 }
		all_parents = {
			CHI_imfm_trait_logistics_telematics
			CHI_imfm_trait_quick_swap_cab_modules
		}

		limit_to_equipment_type = { util_vehicle_equipment }

		production_bonus = {
			production_cost_factor = -0.04
			production_efficiency_cap_factor = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}


# Air
CHI_avic_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_avic_company

	task_capacity = 13

	equipment_type = {
		mio_cat_eq_only_all_light_aircraft
		mio_cat_eq_only_large_aircraft
		mio_cat_eq_only_uav
		mio_cat_helicopters
	}

	research_categories = {
		CAT_air_eqp
	}

	tree_header_text = { text = "Fixed Wing & UAV Systems" x = 2 }
	tree_header_text = { text = "Rotor & Heavy Lift Systems" x = 7 }

	initial_trait = {
		name = CHI_avic_manufacturer_trait

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
			mio_cat_eq_only_uav
			mio_cat_helicopters
		}

		equipment_bonus = {
			maximum_speed = 0.025
			reliability = 0.015
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}
	}

	trait = {
		token = CHI_avic_trait_streamlined_airframe
		name = CHI_avic_trait_streamlined_airframe
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 2 y = 0 }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			maximum_speed = 0.04
			fuel_consumption = -0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_stealth_composites
		name = CHI_avic_trait_stealth_composites
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_avic_trait_streamlined_airframe
		position = { x = -2 y = 1 }
		all_parents = { CHI_avic_trait_streamlined_airframe }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			air_agility = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_high_cycle_engines
		name = CHI_avic_trait_high_cycle_engines
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_avic_trait_streamlined_airframe
		position = { x = 2 y = 1 }
		all_parents = { CHI_avic_trait_streamlined_airframe }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			reliability = 0.03
			maximum_speed = 0.015
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_long_endurance_fuelcells
		name = CHI_avic_trait_long_endurance_fuelcells
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_avic_trait_stealth_composites
		position = { x = 0 y = 1 }
		all_parents = { CHI_avic_trait_stealth_composites }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
			mio_cat_eq_only_uav
		}

		equipment_bonus = {
			air_range = 0.03
			reliability = 0.015
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_uav_autonomy_suite
		name = CHI_avic_trait_uav_autonomy_suite
		icon = GFX_generic_mio_trait_icon_uav_reliability

		relative_position_id = CHI_avic_trait_streamlined_airframe
		position = { x = 2 y = 2 }
		all_parents = {
			CHI_avic_trait_high_cycle_engines
		}

		limit_to_equipment_type = {
			mio_cat_eq_only_uav
		}

		equipment_bonus = {
			air_attack = 0.035
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_composite_wings_flex
		name = CHI_avic_trait_composite_wings_flex
		icon = GFX_generic_mio_trait_icon_armor_value

		relative_position_id = CHI_avic_trait_spaero_integration
		position = { x = -2 y = 1 }
		all_parents = { CHI_avic_trait_spaero_integration }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			armor_value = 0.06
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_spaero_integration
		name = CHI_avic_trait_spaero_integration
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_avic_trait_high_cycle_engines
		position = { x = -2 y = 1 }
		all_parents = { CHI_avic_trait_high_cycle_engines }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
			mio_cat_eq_only_uav
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
			production_capacity_factor = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_advanced_airframe_modularity
		name = CHI_avic_trait_advanced_airframe_modularity
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_avic_trait_streamlined_airframe
		position = { x = 0 y = 1 }
		all_parents = { CHI_avic_trait_streamlined_airframe }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_hybrid_prop_fuselage
		name = CHI_avic_trait_hybrid_prop_fuselage
		icon = GFX_generic_mio_trait_icon_air_attack

		relative_position_id = CHI_avic_trait_spaero_integration
		position = { x = 2 y = 1 }
		all_parents = { CHI_avic_trait_spaero_integration }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			air_attack = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_stealth_fuel_tanks
		name = CHI_avic_trait_stealth_fuel_tanks
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_avic_trait_spaero_integration
		position = { x = 0 y = 1 }
		all_parents = { CHI_avic_trait_spaero_integration }

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
		}

		equipment_bonus = {
			air_agility = 0.04
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_flow_rate_optimisation
		name = CHI_avic_trait_flow_rate_optimisation
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_avic_trait_spaero_integration
		position = { x = 0 y = 2 }
		all_parents = {
			CHI_avic_trait_composite_wings_flex
			CHI_avic_trait_stealth_fuel_tanks
			CHI_avic_trait_hybrid_prop_fuselage
		}

		limit_to_equipment_type = {
			mio_cat_eq_only_all_light_aircraft
			mio_cat_eq_only_large_aircraft
			mio_cat_eq_only_uav
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.10
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_avic_trait_high_lift_rotor_design
		name = CHI_avic_trait_high_lift_rotor_design
		icon = GFX_generic_mio_trait_icon_attackheli_speed

		position = { x = 7 y = 0 }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			maximum_speed = 0.02
			soft_attack = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_modern_rotor_composites
		name = CHI_avic_trait_modern_rotor_composites
		icon = GFX_generic_mio_trait_icon_transport_heli_reliability

		relative_position_id = CHI_avic_trait_high_lift_rotor_design
		position = { x = 0 y = 1 }
		all_parents = { CHI_avic_trait_high_lift_rotor_design }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_coaxial_counterrotor
		name = CHI_avic_trait_coaxial_counterrotor
		icon = GFX_generic_mio_trait_icon_attackheli_breakthrough

		relative_position_id = CHI_avic_trait_high_lift_rotor_design
		position = { x = -2 y = 1 }
		all_parents = { CHI_avic_trait_high_lift_rotor_design }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			breakthrough = 0.03
			maximum_speed = 0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_heavy_lift_transmission
		name = CHI_avic_trait_heavy_lift_transmission
		icon = GFX_generic_mio_trait_icon_attackheli_reliability

		relative_position_id = CHI_avic_trait_high_lift_rotor_design
		position = { x = 2 y = 1 }
		all_parents = { CHI_avic_trait_high_lift_rotor_design }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.025
			fuel_consumption = -0.01
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_tiltrotor_transition_mech
		name = CHI_avic_trait_tiltrotor_transition_mech
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_avic_trait_coaxial_counterrotor
		position = { x = 0 y = 1 }
		all_parents = { CHI_avic_trait_coaxial_counterrotor }

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			maximum_speed = 0.015
			air_range = 0.02
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_avic_trait_rotary_maintenance_modularity
		name = CHI_avic_trait_rotary_maintenance_modularity
		icon = GFX_generic_mio_trait_icon_transport_heli_resources

		relative_position_id = CHI_avic_trait_modern_rotor_composites
		position = { x = 0 y = 2 }
		all_parents = {
			CHI_avic_trait_modern_rotor_composites
			CHI_avic_trait_tiltrotor_transition_mech
		}

		limit_to_equipment_type = {
			mio_cat_helicopters
		}

		equipment_bonus = {
			reliability = 0.02
		}

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_cetc_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_cetc_company

	task_capacity = 18

	equipment_type = {
		cnc_equipment
		mio_cat_eq_only_uav
		medium_tank_rocket_chassis
		medium_tank_aa_chassis
	}

	research_categories = {
		CAT_cnc
		CAT_computing_tech
		CAT_internet_tech
		CAT_air_to_air_weapons
		CAT_aa
		CAT_artillery
		CAT_a_uav
		CAT_drones
	}
	initial_trait = {
		name = CHI_cetc_company_trait


		equipment_bonus = {
			reliability = 0.10
			max_organisation = 0.15
			maximum_speed = 0.05
		}
	}
	trait = {
		token = CHI_cetc_A_root
		name = CHI_cetc_A_root
		icon = GFX_generic_mio_trait_icon_cnc_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = { reliability = 0.02 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_signal_processing_accel
		name = CHI_cetc_A_signal_processing_accel
		icon = GFX_generic_mio_trait_icon_cnc_speed

		relative_position_id = CHI_cetc_A_root
		position = { x = 1 y = 1 }
		all_parents = { CHI_cetc_A_root }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = { maximum_speed = 0.03 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_resilient_datalink
		name = CHI_cetc_A_resilient_datalink
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_cetc_A_root
		position = { x = 2 y = 1 }
		all_parents = { CHI_cetc_A_root }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = { reliability = 0.025 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_org_throughput_boost
		name = CHI_cetc_A_org_throughput_boost
		icon = GFX_generic_mio_trait_icon_cnc_efficiency_cap

		relative_position_id = CHI_cetc_A_root
		position = { x = 0 y = 1 }
		all_parents = { CHI_cetc_A_root }

		limit_to_equipment_type = { cnc_equipment }

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_economy_of_scale
		name = CHI_cetc_A_economy_of_scale
		icon = GFX_generic_mio_trait_icon_cnc_buildcost

		relative_position_id = CHI_cetc_A_root
		position = { x = -1 y = 2 }
		all_parents = { CHI_cetc_A_root }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = { build_cost_ic = -0.03 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_overclocked_dsps
		name = CHI_cetc_A_overclocked_dsps
		icon = GFX_generic_mio_trait_icon_cnc_efficiency_gain

		relative_position_id = CHI_cetc_A_root
		position = { x = 1 y = 2 }
		all_parents = { CHI_cetc_A_signal_processing_accel }

		limit_to_equipment_type = { cnc_equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_adaptive_hopping
		name = CHI_cetc_A_adaptive_hopping
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_cetc_A_root
		position = { x = 2 y = 2 }
		all_parents = { CHI_cetc_A_root }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = {
			reliability = 0.02
			maximum_speed = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_encryption_overhead_opt
		name = CHI_cetc_A_encryption_overhead_opt
		icon = GFX_generic_mio_trait_icon_cnc_defense

		relative_position_id = CHI_cetc_A_root
		position = { x = -1 y = 3 }
		all_parents = { CHI_cetc_A_economy_of_scale }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = {
			defense = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_network_redundancy
		name = CHI_cetc_A_network_redundancy
		icon = GFX_generic_mio_trait_icon_cnc_reliability

		relative_position_id = CHI_cetc_A_root
		position = { x = 0 y = 3 }
		all_parents = { CHI_cetc_A_org_throughput_boost }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = {
			max_organisation = 0.075
			reliability = 0.075
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_latency_reduction_cost
		name = CHI_cetc_A_latency_reduction_cost
		icon = GFX_generic_mio_trait_icon_cnc_buildcost

		relative_position_id = CHI_cetc_A_root
		position = { x = 1 y = 3 }
		all_parents = { CHI_cetc_A_overclocked_dsps }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_scalable_standardization
		name = CHI_cetc_A_scalable_standardization
		icon = GFX_generic_mio_trait_icon_cnc_efficiency_cap

		relative_position_id = CHI_cetc_A_root
		position = { x = 2 y = 3 }
		all_parents = { CHI_cetc_B_prod_efficiency_armored }

		limit_to_equipment_type = { cnc_equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.075
			production_efficiency_cap_factor = 0.075
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_A_ultra_low_latency
		name = CHI_cetc_A_ultra_low_latency
		icon = GFX_generic_mio_trait_icon_cnc

		relative_position_id = CHI_cetc_A_root
		position = { x = -1 y = 4 }
		all_parents = { CHI_cetc_A_encryption_overhead_opt }

		limit_to_equipment_type = { cnc_equipment }

		equipment_bonus = {
			max_organisation = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_cetc_B_root
		name = CHI_cetc_B_root
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 4 y = 0 }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_aa_chassis }

		equipment_bonus = { reliability = 0.02 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_integrated_rocket_module
		name = CHI_cetc_B_integrated_rocket_module
		icon = GFX_generic_mio_trait_icon_mlrs_attack

		relative_position_id = CHI_cetc_B_root
		position = { x = 1 y = 1 }
		all_parents = { CHI_cetc_B_root }

		limit_to_equipment_type = { medium_tank_rocket_chassis }

		equipment_bonus = { soft_attack = 0.03 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_armored_radar_integration
		name = CHI_cetc_B_armored_radar_integration
		icon = GFX_generic_mio_trait_icon_spaa_defence

		relative_position_id = CHI_cetc_B_root
		position = { x = 2 y = 1 }
		all_parents = { CHI_cetc_B_root }

		limit_to_equipment_type = { medium_tank_aa_chassis }

		equipment_bonus = { defense = 0.08 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_prod_efficiency_armored
		name = CHI_cetc_B_prod_efficiency_armored
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_cetc_B_root
		position = { x = -1 y = 2 }
		all_parents = { CHI_cetc_A_resilient_datalink }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_aa_chassis }

		production_bonus = {
			production_efficiency_cap_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_reliability_hardened
		name = CHI_cetc_B_reliability_hardened
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_cetc_B_root
		position = { x = 0 y = 2 }
		all_parents = { CHI_cetc_B_root }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_aa_chassis }

		equipment_bonus = {
			reliability = 0.02
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_lightweight_integration
		name = CHI_cetc_B_lightweight_integration
		icon = GFX_generic_mio_trait_icon_mlrs_buildcost

		relative_position_id = CHI_cetc_B_root
		position = { x = 1 y = 2 }
		all_parents = { CHI_cetc_B_integrated_rocket_module }

		limit_to_equipment_type = { medium_tank_rocket_chassis }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		production_bonus = {
			production_resource_need_factor = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_electronics_shielding
		name = CHI_cetc_B_electronics_shielding
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_cetc_B_root
		position = { x = 2 y = 2 }
		all_parents = { CHI_cetc_B_root }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_aa_chassis }

		equipment_bonus = {
			reliability = 0.015
			build_cost_ic = 0.005
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_modular_payload
		name = CHI_cetc_B_modular_payload
		icon = GFX_generic_mio_trait_icon_mlrs_buildcost

		relative_position_id = CHI_cetc_B_root
		position = { x = -1 y = 4 }
		all_parents = { CHI_cetc_A_scalable_standardization }

		limit_to_equipment_type = { medium_tank_rocket_chassis }

		equipment_bonus = {
			soft_attack = 0.015
			build_cost_ic = -0.015
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_high_output_overheat
		name = CHI_cetc_B_high_output_overheat
		icon = GFX_generic_mio_trait_icon_spaa_breakthrough

		relative_position_id = CHI_cetc_B_root
		position = { x = 0 y = 3 }
		all_parents = { CHI_cetc_B_reliability_hardened }

		limit_to_equipment_type = { medium_tank_aa_chassis }

		equipment_bonus = {
			soft_attack = 0.11
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_B_org_logistics
		name = CHI_cetc_B_org_logistics
		icon = GFX_generic_mio_trait_icon_task

		relative_position_id = CHI_cetc_B_root
		position = { x = 1 y = 3 }
		all_parents = { CHI_cetc_B_lightweight_integration }

		available = {
			CHI = { NOT = { has_idea = CHI_PLA_Business_Ventures } }
		}

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_aa_chassis }

		organization_modifier = {
			military_industrial_organization_task_capacity = 1
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_cetc_C_root
		name = CHI_cetc_C_root
		icon = GFX_generic_mio_trait_icon_uav_reliability

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = { reliability = 0.02 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_adv_sensor_link
		name = CHI_cetc_C_adv_sensor_link
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_cetc_C_root
		position = { x = 1 y = 1 }
		all_parents = { CHI_cetc_C_root }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = { air_range = 0.03 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_uav_agility
		name = CHI_cetc_C_uav_agility
		icon = GFX_generic_mio_trait_icon_uav_agility

		relative_position_id = CHI_cetc_C_root
		position = { x = 2 y = 1 }
		all_parents = { CHI_cetc_C_root }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = { air_agility = 0.025 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_reduced_fuel_signature
		name = CHI_cetc_C_reduced_fuel_signature
		icon = GFX_generic_mio_trait_icon_uav_agility

		relative_position_id = CHI_cetc_C_root
		position = { x = -1 y = 2 }
		all_parents = { CHI_cetc_B_armored_radar_integration }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			fuel_consumption = -0.10
			air_agility = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_uav_reliability_tuning
		name = CHI_cetc_C_uav_reliability_tuning
		icon = GFX_generic_mio_trait_icon_uav_reliability

		relative_position_id = CHI_cetc_C_root
		position = { x = 0 y = 2 }
		all_parents = { CHI_cetc_C_root }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = { reliability = 0.04 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_lightweight_frames
		name = CHI_cetc_C_lightweight_frames
		icon = GFX_generic_mio_trait_icon_uav_speed

		relative_position_id = CHI_cetc_C_root
		position = { x = 1 y = 2 }
		all_parents = { CHI_cetc_C_adv_sensor_link }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			maximum_speed = 0.05
			build_cost_ic = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_sensor_fusion_overhead
		name = CHI_cetc_C_sensor_fusion_overhead
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_cetc_C_root
		position = { x = 2 y = 2 }
		all_parents = { CHI_cetc_C_uav_agility }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			air_range = 0.07
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_counter_jamming_hardened
		name = CHI_cetc_C_counter_jamming_hardened
		icon = GFX_generic_mio_trait_icon_uav_defense

		relative_position_id = CHI_cetc_C_root
		position = { x = -1 y = 3 }
		all_parents = { CHI_cetc_C_reduced_fuel_signature }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			reliability = 0.06
			air_defence = 0.06
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_high_throughput_link
		name = CHI_cetc_C_high_throughput_link
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_cetc_C_root
		position = { x = 0 y = 3 }
		all_parents = { CHI_cetc_C_uav_reliability_tuning }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			air_range = 0.10
			air_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_org_doctrine_eff
		name = CHI_cetc_C_org_doctrine_eff
		icon = GFX_generic_mio_trait_icon_uav_agility

		relative_position_id = CHI_cetc_C_root
		position = { x = 1 y = 3 }
		all_parents = { CHI_cetc_C_lightweight_frames }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			air_agility = 0.08
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_prod_streamlining
		name = CHI_cetc_C_prod_streamlining
		icon = GFX_generic_mio_trait_icon_uav_efficiency_gain

		relative_position_id = CHI_cetc_C_root
		position = { x = 2 y = 3 }
		all_parents = { CHI_cetc_C_sensor_fusion_overhead }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		production_bonus = {
			production_efficiency_gain_factor = 0.10
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_overclocked_comms
		name = CHI_cetc_C_overclocked_comms
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_cetc_C_root
		position = { x = -1 y = 4 }
		all_parents = { CHI_cetc_C_counter_jamming_hardened }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			air_range = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_uav_air_defense_tune
		name = CHI_cetc_C_uav_air_defense_tune
		icon = GFX_generic_mio_trait_icon_uav_defense

		relative_position_id = CHI_cetc_C_root
		position = { x = 0 y = 4 }
		all_parents = { CHI_cetc_C_high_throughput_link }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = { air_defence = 0.07 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cetc_C_air_attack_integration
		name = CHI_cetc_C_air_attack_integration
		icon = GFX_generic_mio_trait_icon_uav

		relative_position_id = CHI_cetc_C_root
		position = { x = 1 y = 4 }
		all_parents = { CHI_cetc_C_org_doctrine_eff }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = { air_attack = 0.08 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_casic_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_casic_company

	task_capacity = 8

	equipment_type = {
		AA_Equipment
		guided_missile_equipment
		sam_missile_equipment
		ballistic_missile_equipment
	}

	research_categories = {
		CAT_aa_missiles
		CAT_missile
		CAT_aa
		CAT_irbm
	}

	tree_header_text = {
		text = "Guided Missile Development"
		x = 1
	}
	tree_header_text = {
		text = "SAM & Air Defense Systems"
		x = 4
	}
	tree_header_text = {
		text = "Ballistic Missile Engineering"
		x = 8
	}


	initial_trait = {
		name = CHI_casic_company_advanced_guidance_bureau

		equipment_bonus = {
			air_agility = 0.10
			anti_air_attack = 0.05
			build_cost_ic = -0.05
		}

		organization_modifier = {
			military_industrial_organization_industrial_manufacturer_assign_cost = -0.25
		}
	}
	trait = {
		token = CHI_casic_guidance_focal_array
		name = CHI_casic_guidance_focal_array
		icon = GFX_generic_mio_trait_icon_guided_missile_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { guided_missile_equipment }

		equipment_bonus = { reliability = 0.4 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = { base = 10 modifier = { factor = 0 check_variable = { FROM.interest_rate > 8 } } }
	}

	trait = {
		token = CHI_casic_mems_mini_sensors
		name = CHI_casic_mems_mini_sensors
		icon = GFX_generic_mio_trait_icon_guided_missile_agility

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = -1 y = 1 }
		all_parents = { CHI_casic_guidance_focal_array }

		limit_to_equipment_type = { guided_missile_equipment }

		equipment_bonus = {
			air_agility = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = { base = 10 modifier = { factor = 0 check_variable = { FROM.interest_rate > 8 } } }
	}

	trait = {
		token = CHI_casic_redundant_guidance_channels
		name = CHI_casic_redundant_guidance_channels
		icon = GFX_generic_mio_trait_icon_guided_missile_reliability

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = 1 y = 1 }
		all_parents = { CHI_casic_guidance_focal_array }

		limit_to_equipment_type = { guided_missile_equipment }

		equipment_bonus = {
			reliability = 0.15
			build_cost_ic = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = { base = 10 modifier = { factor = 0 check_variable = { FROM.interest_rate > 8 } } }
	}

	trait = {
		token = CHI_casic_overclocked_bus_systems
		name = CHI_casic_overclocked_bus_systems
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = 1 y = 2 }
		all_parents = { CHI_casic_redundant_guidance_channels }

		limit_to_equipment_type = { guided_missile_equipment sam_missile_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = { base = 10 modifier = { factor = 0 check_variable = { FROM.interest_rate > 8 } } }
	}

	trait = {
		token = CHI_casic_multispectral_guidance_link
		name = CHI_casic_multispectral_guidance_link
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = 2 y = 2 }
		all_parents = { CHI_casic_redundant_guidance_channels CHI_casic_modular_launcher_architecture }

		limit_to_equipment_type = { guided_missile_equipment sam_missile_equipment }

		equipment_bonus = { reliability = 0.02 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_guided_dual_mode_seekers
		name = CHI_casic_guided_dual_mode_seekers
		icon = GFX_generic_mio_trait_icon_guided_missile_speed

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = -1 y = 2 }
		all_parents = { CHI_casic_mems_mini_sensors }

		limit_to_equipment_type = { guided_missile_equipment }

		equipment_bonus = {
			maximum_speed = 0.06
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_high_energy_propellant
		name = CHI_casic_high_energy_propellant
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = -1 y = 3 }
		all_parents = { CHI_casic_guided_dual_mode_seekers }

		limit_to_equipment_type = { guided_missile_equipment ballistic_missile_equipment }

		equipment_bonus = {
			air_range = 0.10
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_composite_propellant_mix
		name = CHI_casic_composite_propellant_mix
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = 1 y = 3 }
		all_parents = { CHI_casic_overclocked_bus_systems }

		limit_to_equipment_type = { ballistic_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_ground_attack = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_warhead_modular_flexibility
		name = CHI_casic_warhead_modular_flexibility
		icon = GFX_generic_mio_trait_icon_naval_strike_attack

		relative_position_id = CHI_casic_guidance_focal_array
		position = { x = 2 y = 4 }
		all_parents = { CHI_casic_sam_modular_canisters }

		limit_to_equipment_type = { guided_missile_equipment ballistic_missile_equipment }

		equipment_bonus = {
			naval_strike_attack = 0.10
			strategic_attack = 0.08
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_casic_radar_homing_integration
		name = CHI_casic_radar_homing_integration
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 4 y = 0 }

		limit_to_equipment_type = { sam_missile_equipment }

		equipment_bonus = {
			reliability = 0.02
			maximum_speed = 0.005
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_sam_cost_efficiency
		name = CHI_casic_sam_cost_efficiency
		icon = GFX_generic_mio_trait_icon_sam_efficiency_cap

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = 0 y = 1 }
		all_parents = { CHI_casic_radar_homing_integration }

		limit_to_equipment_type = { sam_missile_equipment }

		production_bonus = {
			production_efficiency_cap_factor = 0.10
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_pulse_doppler_filtering
		name = CHI_casic_pulse_doppler_filtering
		icon = GFX_generic_mio_trait_icon_sam_reliability

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = 1 y = 1 }
		all_parents = { CHI_casic_radar_homing_integration }

		limit_to_equipment_type = { sam_missile_equipment }

		equipment_bonus = { reliability = 0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_modular_launcher_architecture
		name = CHI_casic_modular_launcher_architecture
		icon = GFX_generic_mio_trait_icon_sam_buildcost

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = -1 y = 1 }
		all_parents = { CHI_casic_radar_homing_integration }

		limit_to_equipment_type = { sam_missile_equipment }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_sam_ecm_resistant_seekers
		name = CHI_casic_sam_ecm_resistant_seekers
		icon = GFX_generic_mio_trait_icon_sam_agility

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = 1 y = 2 }
		all_parents = { CHI_casic_pulse_doppler_filtering }

		limit_to_equipment_type = { sam_missile_equipment }

		equipment_bonus = {
			air_agility = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_sam_modular_canisters
		name = CHI_casic_sam_modular_canisters
		icon = GFX_generic_mio_trait_icon_sam_buildcost

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = -1 y = 3 }
		all_parents = { CHI_casic_multispectral_guidance_link }

		limit_to_equipment_type = { sam_missile_equipment }

		equipment_bonus = {
			build_cost_ic = -0.02
			air_attack = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_shared_avionics_bus
		name = CHI_casic_shared_avionics_bus
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = 0 y = 2 }
		all_parents = { CHI_casic_sam_cost_efficiency }

		equipment_bonus = { build_cost_ic = -0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_manpads_seeker_upgrade
		name = CHI_casic_manpads_seeker_upgrade
		icon = GFX_generic_mio_trait_icon_aa_anti_air_attack

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = 2 y = 1 }
		all_parents = { CHI_casic_radar_homing_integration }

		limit_to_equipment_type = { AA_Equipment }

		equipment_bonus = { air_attack = 0.06 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_manpads_weight_reduction
		name = CHI_casic_manpads_weight_reduction
		icon = GFX_generic_mio_trait_icon_aa_resource

		relative_position_id = CHI_casic_radar_homing_integration
		position = { x = 2 y = 2 }
		all_parents = { CHI_casic_manpads_seeker_upgrade }

		limit_to_equipment_type = { AA_Equipment }

		production_bonus = {
			production_resource_need_factor = -0.15
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_casic_thermal_stress_hardening
		name = CHI_casic_thermal_stress_hardening
		icon = GFX_generic_mio_trait_icon_icbm_reliability

		position = { x = 8 y = 0 }

		limit_to_equipment_type = { ballistic_missile_equipment }

		equipment_bonus = { reliability = 0.02 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_lightweight_composite_casings
		name = CHI_casic_lightweight_composite_casings
		icon = GFX_generic_mio_trait_icon_icbm_resources

		relative_position_id = CHI_casic_thermal_stress_hardening
		position = { x = -1 y = 1 }
		all_parents = { CHI_casic_thermal_stress_hardening }

		limit_to_equipment_type = { ballistic_missile_equipment }

		production_bonus = {
			production_resource_need_factor = -0.15
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_booster_stage_efficiency
		name = CHI_casic_booster_stage_efficiency
		icon = GFX_generic_mio_trait_icon_icbm_agility

		relative_position_id = CHI_casic_thermal_stress_hardening
		position = { x = 0 y = 1 }
		all_parents = { CHI_casic_thermal_stress_hardening }

		limit_to_equipment_type = { ballistic_missile_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_ballistic_penetrator_cores
		name = CHI_casic_ballistic_penetrator_cores
		icon = GFX_generic_mio_trait_icon_icbm

		relative_position_id = CHI_casic_thermal_stress_hardening
		position = { x = -1 y = 2 }
		all_parents = { CHI_casic_lightweight_composite_casings }

		limit_to_equipment_type = { ballistic_missile_equipment }

		equipment_bonus = { strategic_attack = 0.02 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_ballistic_mirv_bus
		name = CHI_casic_ballistic_mirv_bus
		icon = GFX_generic_mio_trait_icon_icbm

		relative_position_id = CHI_casic_thermal_stress_hardening
		position = { x = -1 y = 3 }
		all_parents = { CHI_casic_ballistic_penetrator_cores }

		limit_to_equipment_type = { ballistic_missile_equipment }

		equipment_bonus = { strategic_attack = 0.15 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_ballistic_astro_inertial
		name = CHI_casic_ballistic_astro_inertial
		icon = GFX_generic_mio_trait_icon_icbm_reliability

		relative_position_id = CHI_casic_thermal_stress_hardening
		position = { x = 1 y = 1 }
		all_parents = { CHI_casic_thermal_stress_hardening }

		limit_to_equipment_type = { ballistic_missile_equipment }

		equipment_bonus = { reliability = 0.05 }

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casic_steering_vanes_control
		name = CHI_casic_steering_vanes_control
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_casic_thermal_stress_hardening
		position = { x = 1 y = 2 }
		all_parents = { CHI_casic_ballistic_astro_inertial }

		limit_to_equipment_type = { ballistic_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_agility = 0.10
		}

		on_complete = {
			if = {
				limit = {
					check_variable = { free_trait_picks > 0 }
				}
				add_to_variable = { free_trait_picks = -1 }
			}
			else = {
				FROM = {
					small_expenditure = yes
				}
			}
		}

		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_casc_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_casc_company

	task_capacity = 8

	equipment_type = {
		nuclear_ballistic_missile_equipment
		nuclear_missile_equipment
	}

	research_categories = {
		CAT_space
		CAT_missile
	}

	tree_header_text = {
		text = "Guidance & Warhead Systems"
		x = 2
	}

	tree_header_text = {
		text = "Propulsion & Structure"
		x = 7
	}
	initial_trait = {
		name = CHI_casc_trait

		equipment_bonus = {
			reliability = 0.06
			maximum_speed = 0.08
			air_range = 0.08
		}

		production_bonus = {
			production_capacity_factor = 0.12
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.08
		}
	}
	trait = {
		token = CHI_casc_guidance_focal_array
		name = CHI_casc_guidance_focal_array
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 2 y = 0 }

		equipment_bonus = { reliability = 0.06 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_mirv_bus_modularization
		name = CHI_casc_mirv_bus_modularization
		icon = GFX_generic_mio_trait_icon_strategic_attack

		relative_position_id = CHI_casc_guidance_focal_array

		position = { x = -2 y = 1 }
		all_parents = { CHI_casc_guidance_focal_array }

		equipment_bonus = { strategic_attack = 0.06 }

		production_bonus = { production_capacity_factor = 0.12 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_hardened_electronics_shield
		name = CHI_casc_hardened_electronics_shield
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_casc_guidance_focal_array

		position = { x = 0 y = 1 }
		all_parents = { CHI_casc_guidance_focal_array }

		equipment_bonus = { reliability = 0.05 }

		organization_modifier = { military_industrial_organization_research_bonus = 0.06 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_penetration_waveform_opt
		name = CHI_casc_penetration_waveform_opt
		icon = GFX_generic_mio_trait_icon_air_ground_attack

		relative_position_id = CHI_casc_guidance_focal_array

		position = { x = 2 y = 1 }
		all_parents = { CHI_casc_guidance_focal_array }

		equipment_bonus = {
			air_ground_attack = 0.06
			maximum_speed = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_advanced_signal_filtering
		name = CHI_casc_advanced_signal_filtering
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_casc_guidance_focal_array

		position = { x = -2 y = 2 }
		all_parents = { CHI_casc_mirv_bus_modularization }

		equipment_bonus = { air_range = 0.08 }

		production_bonus = { production_efficiency_gain_factor = 0.10 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_subterranean_guidance_calibration
		name = CHI_casc_subterranean_guidance_calibration
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_casc_guidance_focal_array

		position = { x = 0 y = 2 }
		all_parents = { CHI_casc_hardened_electronics_shield }

		equipment_bonus = {
			air_range = 0.05
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_quantum_stabilizer_control
		name = CHI_casc_quantum_stabilizer_control
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_casc_guidance_focal_array

		position = { x = 2 y = 2 }
		all_parents = { CHI_casc_penetration_waveform_opt }

		equipment_bonus = {
			maximum_speed = 0.04
			air_agility = 0.04
		}

		organization_modifier = { military_industrial_organization_size_up_requirement = -0.10 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_casc_high_thrust_nuclear_motor
		name = CHI_casc_high_thrust_nuclear_motor
		icon = GFX_generic_mio_trait_icon_maximum_speed
		position = { x = 7 y = 0 }

		equipment_bonus = { maximum_speed = 0.08 }

		production_bonus = { production_capacity_factor = 0.12 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_lightweight_alloy_structure
		name = CHI_casc_lightweight_alloy_structure
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = -1 y = 1 }
		all_parents = { CHI_casc_high_thrust_nuclear_motor }

		production_bonus = { production_efficiency_cap_factor = 0.12 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_fuel_optimization_program
		name = CHI_casc_fuel_optimization_program
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = 1 y = 1 }
		all_parents = { CHI_casc_high_thrust_nuclear_motor }

		production_bonus = { production_resource_need_factor = -0.10 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_conversion_speed_specialist
		name = CHI_casc_conversion_speed_specialist
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = 0 y = 4 }
		all_parents = {
			CHI_casc_reentry_thermal_shielding
			CHI_casc_structural_hardening_research
		}

		production_bonus = {
			production_resource_need_factor = -0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_structural_hardening_research
		name = CHI_casc_structural_hardening_research
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = -1 y = 2 }
		all_parents = { CHI_casc_lightweight_alloy_structure }

		equipment_bonus = { reliability = 0.04 }

		production_bonus = { production_efficiency_gain_factor = 0.12 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_cryogenic_propellant_injection
		name = CHI_casc_cryogenic_propellant_injection
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = 1 y = 2 }
		all_parents = { CHI_casc_fuel_optimization_program }

		equipment_bonus = {
			air_agility = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_reinforced_casing_lattice
		name = CHI_casc_reinforced_casing_lattice
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = 0 y = 5 }
		all_parents = { CHI_casc_conversion_speed_specialist }

		equipment_bonus = {
			air_range = 0.05
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_casc_reentry_thermal_shielding
		name = CHI_casc_reentry_thermal_shielding
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_casc_high_thrust_nuclear_motor

		position = { x = 1 y = 3 }
		all_parents = { CHI_casc_cryogenic_propellant_injection }

		equipment_bonus = { reliability = 0.06 }

		production_bonus = { production_resource_penalty_factor = -0.10 }

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_haig_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_haig_company

	task_capacity = 13

	equipment_type = {
		mio_cat_helicopters
		mio_cat_eq_only_uav
	}

	research_categories = {
		CAT_air_eqp
		CAT_heli
	}
	initial_trait = {
		name = CHI_haig_manufacturer_trait

		equipment_bonus = {
			weight = -0.04
			reliability = 0.04
			maximum_speed = 0.03
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}

		production_bonus = {
			production_capacity_factor = 0.10
			production_efficiency_gain_factor = 0.10
		}
	}

	tree_header_text = {
		text = "Materials & Aerostructures"
		x = 1
	}

	tree_header_text = {
		text = "Avionics & Control"
		x = 6
	}
	trait = {
		token = CHI_haig_composite_skin_weave_tech
		name = CHI_haig_composite_skin_weave_tech
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 1 y = 0 }

		equipment_bonus = {
			weight = -0.04
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_adaptive_blade_materials
		name = CHI_haig_adaptive_blade_materials
		icon = GFX_generic_mio_trait_icon_attackheli_speed

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = 0 y = 1 }
		all_parents = { CHI_haig_composite_skin_weave_tech }

		limit_to_equipment_type = { mio_cat_helicopters }

		equipment_bonus = {
			maximum_speed = 0.06
		}

		production_bonus = {
			production_resource_penalty_factor = -0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_signature_reduction_coating
		name = CHI_haig_signature_reduction_coating
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = 1 y = 1 }
		all_parents = { CHI_haig_composite_skin_weave_tech }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			air_defence = 0.04
			maximum_speed = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_lightweight_structure_lattice
		name = CHI_haig_lightweight_structure_lattice
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = -1 y = 1 }
		all_parents = { CHI_haig_composite_skin_weave_tech }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			weight = -0.05
		}

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_modular_payload_integration
		name = CHI_haig_modular_payload_integration
		icon = GFX_generic_mio_trait_icon_uav_range

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = 2 y = 2 }
		all_parents = { CHI_haig_signature_reduction_coating }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			air_range = 0.05
		}

		production_bonus = {
			production_conversion_speed_factor = 0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_vibration_active_dampers
		name = CHI_haig_vibration_active_dampers
		icon = GFX_generic_mio_trait_icon_transport_heli_reliability

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = 0 y = 2 }
		all_parents = { CHI_haig_adaptive_blade_materials }

		limit_to_equipment_type = { mio_cat_helicopters }

		equipment_bonus = {
			reliability = 0.04
			maximum_speed = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_folding_rotor_designs
		name = CHI_haig_folding_rotor_designs
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = 1 y = 4 }
		all_parents = {
			CHI_haig_vibration_active_dampers
			CHI_haig_advanced_weldless_bonding
		}

		limit_to_equipment_type = { mio_cat_helicopters }

		equipment_bonus = {
			air_range = 0.05
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_corrosion_resistant_composites
		name = CHI_haig_corrosion_resistant_composites
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = -1 y = 2 }
		all_parents = { CHI_haig_lightweight_structure_lattice }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			armor_value = 0.05
			reliability = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_high_strength_fiber_matrix
		name = CHI_haig_high_strength_fiber_matrix
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = -1 y = 3 }
		all_parents = { CHI_haig_corrosion_resistant_composites }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			defense = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_advanced_weldless_bonding
		name = CHI_haig_advanced_weldless_bonding
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_haig_composite_skin_weave_tech
		position = { x = 2 y = 3 }
		all_parents = { CHI_haig_modular_payload_integration }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			reliability = 0.05
			breakthrough = 0.05
			weight = -0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_haig_multi_spectral_sensor_fusion
		name = CHI_haig_multi_spectral_sensor_fusion
		icon = GFX_generic_mio_trait_icon_uav_agility

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			naval_strike_attack = 0.06
			air_agility = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_advanced_composite_joints
		name = CHI_haig_advanced_composite_joints
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = -1 y = 1 }
		all_parents = { CHI_haig_multi_spectral_sensor_fusion }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			reliability = 0.05
			weight = -0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_autonomous_control_algorithms
		name = CHI_haig_autonomous_control_algorithms
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 0 y = 2 }
		all_parents = { CHI_haig_multi_spectral_sensor_fusion }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}

		production_bonus = {
			production_capacity_factor = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_biomimetic_airframe_design
		name = CHI_haig_biomimetic_airframe_design
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 1 y = 1 }
		all_parents = { CHI_haig_multi_spectral_sensor_fusion }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			maximum_speed = 0.02
			air_agility = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_noise_signature_reduction_blades
		name = CHI_haig_noise_signature_reduction_blades
		icon = GFX_generic_mio_trait_icon_attackheli_defense

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 2 y = 2 }
		all_parents = { CHI_haig_biomimetic_airframe_design }

		limit_to_equipment_type = { mio_cat_helicopters }

		equipment_bonus = {
			maximum_speed = 0.05
			defense = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_resilient_edge_geometries
		name = CHI_haig_resilient_edge_geometries
		icon = GFX_generic_mio_trait_icon_defense

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = -1 y = 2 }
		all_parents = { CHI_haig_advanced_composite_joints }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			defense = 0.08
			air_agility = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_adaptive_flight_stability
		name = CHI_haig_adaptive_flight_stability
		icon = GFX_generic_mio_trait_icon_ap_attack

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 0 y = 3 }
		all_parents = { CHI_haig_autonomous_control_algorithms }

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		equipment_bonus = {
			ap_attack = 0.08
			air_agility = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_predictive_maintenance_module
		name = CHI_haig_predictive_maintenance_module
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 2 y = 4 }
		all_parents = {
			CHI_haig_autonomous_control_algorithms
			CHI_haig_noise_signature_reduction_blades
		}

		limit_to_equipment_type = { mio_cat_helicopters mio_cat_eq_only_uav }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		production_bonus = {
			production_capacity_factor = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_secure_comm_encryption
		name = CHI_haig_secure_comm_encryption
		icon = GFX_generic_mio_trait_icon_uav_defense

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 3 y = 3 }
		all_parents = { CHI_haig_noise_signature_reduction_blades }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			air_defence = 0.03
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_haig_dynamic_sensor_reconfiguration
		name = CHI_haig_dynamic_sensor_reconfiguration
		icon = GFX_generic_mio_trait_icon_uav

		relative_position_id = CHI_haig_multi_spectral_sensor_fusion
		position = { x = 0 y = 4 }
		all_parents = { CHI_haig_adaptive_flight_stability }

		limit_to_equipment_type = { mio_cat_eq_only_uav }

		equipment_bonus = {
			naval_strike_targetting = 0.15
			air_ground_attack = 0.15
		}

		production_bonus = {
			production_conversion_speed_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_sac_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_sac_company

	task_capacity = 8

	equipment_type = {
		mio_cat_eq_only_all_light_aircraft
		mio_cat_eq_only_medium_aircraft
	}

	research_categories = {
		CAT_fighter
		CAT_l_fighter
		CAT_air_engine
	}

	tree_header_text = {
		text = "Stealth & Signature Control"
		x = 2
	}

	tree_header_text = {
		text = "Aero-Structures & Integration"
		x = 7
	}

	initial_trait = {
		name = CHI_sac_trait

		equipment_bonus = {
			reliability = 0.04
			air_agility = 0.04
			air_defence = 0.04
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.12
			production_capacity_factor = 0.10
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.08
			military_industrial_organization_design_team_assign_cost = -0.10
		}
	}

	trait = {
		token = CHI_sac_dielectric_radar_absorbers
		name = CHI_sac_dielectric_radar_absorbers
		icon = GFX_generic_mio_trait_icon_defense

		position = { x = 2 y = 0 }

		equipment_bonus = {
			air_defence = 0.06
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_serrated_exhaust_design
		name = CHI_sac_serrated_exhaust_design
		icon = GFX_generic_mio_trait_icon_maximum_speed

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = 0 y = 1 }
		all_parents = { CHI_sac_dielectric_radar_absorbers }

		equipment_bonus = {
			thrust = 0.05
			fuel_consumption = -0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_embedded_antenna_fairings
		name = CHI_sac_embedded_antenna_fairings
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = 1 y = 1 }
		all_parents = { CHI_sac_dielectric_radar_absorbers }

		equipment_bonus = {
			air_range = 0.05
			air_agility = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_adaptive_skin_electrochromics
		name = CHI_sac_adaptive_skin_electrochromics
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = 2 y = 1 }
		all_parents = { CHI_sac_dielectric_radar_absorbers }

		equipment_bonus = {
			reliability = 0.04
			maximum_speed = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_plasma_discharge_surface
		name = CHI_sac_plasma_discharge_surface
		icon = GFX_generic_mio_trait_icon_air_attack

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = -1 y = 1 }
		all_parents = { CHI_sac_dielectric_radar_absorbers }

		equipment_bonus = {
			air_attack = 0.04
			air_defence = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_sawtooth_panel_alignment
		name = CHI_sac_sawtooth_panel_alignment
		icon = GFX_generic_mio_trait_icon_weight

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = 0 y = 2 }
		all_parents = { CHI_sac_serrated_exhaust_design }

		equipment_bonus = {
			air_defence = 0.03
			weight = -0.02
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_edge_vortex_management
		name = CHI_sac_edge_vortex_management
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = 1 y = 2 }
		all_parents = { CHI_sac_embedded_antenna_fairings }

		equipment_bonus = {
			air_agility = 0.05
			maximum_speed = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_rcs_modeling_lab
		name = CHI_sac_rcs_modeling_lab
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = 2 y = 2 }
		all_parents = { CHI_sac_adaptive_skin_electrochromics }

		production_bonus = {
			production_capacity_factor = 0.12
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_low_observable_coatings_line
		name = CHI_sac_low_observable_coatings_line
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_sac_dielectric_radar_absorbers
		position = { x = -1 y = 2 }
		all_parents = { CHI_sac_plasma_discharge_surface }

		production_bonus = {
			production_capacity_factor = 0.14
			production_cost_factor = -0.06
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_nano_composite_core
		name = CHI_sac_nano_composite_core
		icon = GFX_generic_mio_trait_icon_weight

		position = { x = 7 y = 0 }

		equipment_bonus = {
			weight = -0.05
		}

		production_bonus = {
			production_resource_need_factor = -0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_morphing_wing_substructure
		name = CHI_sac_morphing_wing_substructure
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = -1 y = 1 }
		all_parents = { CHI_sac_nano_composite_core }

		equipment_bonus = {
			air_agility = 0.06
			maximum_speed = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_distributed_avionics_network
		name = CHI_sac_distributed_avionics_network
		icon = GFX_generic_mio_trait_icon_research
		relative_position_id = CHI_sac_nano_composite_core
		position = { x = 0 y = 1 }
		all_parents = { CHI_sac_nano_composite_core }

		equipment_bonus = {
			air_agility = 0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_neural_flight_assist
		name = CHI_sac_neural_flight_assist
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = 1 y = 1 }
		all_parents = { CHI_sac_nano_composite_core }

		equipment_bonus = {
			air_agility = 0.04
			maximum_speed = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_adaptive_thermal_management
		name = CHI_sac_adaptive_thermal_management
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = -1 y = 2 }
		all_parents = { CHI_sac_morphing_wing_substructure }

		equipment_bonus = {
			reliability = 0.05
			fuel_consumption = -0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_hybrid_fiber_bulkhead
		name = CHI_sac_hybrid_fiber_bulkhead
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = 0 y = 2 }
		all_parents = { CHI_sac_distributed_avionics_network }

		equipment_bonus = {
			reliability = 0.06
			weight = -0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_embedded_ews_bays
		name = CHI_sac_embedded_ews_bays
		icon = GFX_generic_mio_trait_icon_air_defence

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = 1 y = 2 }
		all_parents = { CHI_sac_neural_flight_assist }

		equipment_bonus = {
			air_defence = 0.04
			air_attack = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_modular_sensor_nosecones
		name = CHI_sac_modular_sensor_nosecones
		icon = GFX_generic_mio_trait_icon_air_attack

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = 0 y = 3 }
		all_parents = { CHI_sac_hybrid_fiber_bulkhead }

		equipment_bonus = {
			air_attack = 0.10
			air_ground_attack = 0.08
		}

		production_bonus = {
			production_conversion_speed_factor = 0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_sac_high_tolerance_panel_fit
		name = CHI_sac_high_tolerance_panel_fit
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_sac_nano_composite_core
		position = { x = -1 y = 3 }
		all_parents = { CHI_sac_adaptive_thermal_management }

		equipment_bonus = {
			maximum_speed = 0.02
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}


# Naval
CHI_cssc_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_China_State_Shipbuilding_Corporation_CHI

	task_capacity = 8

	equipment_type = {
		carrier
		helicopter_operator
		mio_cat_destroyers
		mio_cat_frigates
		mio_cat_only_small_ships
		submarine
		convoy
	}

	research_categories = {
		CAT_naval_all
	}

	tree_header_text = {
		text = "Fleet Systems & Surface Integration"
		x = 2
	}

	tree_header_text = {
		text = "Submarine & Undersea Systems"
		x = 7
	}

	initial_trait = {
		name = CHI_cssc_trait

		equipment_bonus = {
			naval_speed = 0.03
			surface_visibility = -0.03
			max_strength = 0.03
		}

		production_bonus = {
			production_capacity_factor = 0.12
			production_efficiency_cap_factor = 0.10
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.08
		}
	}

	trait = {
		token = CHI_cssc_radar_absorbent_hull_coating
		name = CHI_cssc_radar_absorbent_hull_coating
		icon = GFX_generic_mio_trait_icon_surface_visibility

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates mio_cat_only_small_ships }

		equipment_bonus = {
			surface_visibility = -0.06
			max_strength = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_modular_weapon_mounts
		name = CHI_cssc_modular_weapon_mounts
		icon = GFX_generic_mio_trait_icon_lg_attack

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = -1 y = 1 }
		all_parents = { CHI_cssc_radar_absorbent_hull_coating }

		limit_to_equipment_type = { mio_cat_destroyers mio_cat_frigates mio_cat_only_small_ships }

		production_bonus = {
			production_cost_factor = -0.06
		}

		equipment_bonus = {
			lg_attack = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_integrated_sensor_mast_array
		name = CHI_cssc_integrated_sensor_mast_array
		icon = GFX_generic_mio_trait_icon_surface_detection

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 0 y = 1 }
		all_parents = { CHI_cssc_radar_absorbent_hull_coating }

		limit_to_equipment_type = { mio_cat_destroyers mio_cat_frigates }

		equipment_bonus = {
			surface_detection = 0.07
			anti_air_attack = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_advanced_damage_control_network
		name = CHI_cssc_advanced_damage_control_network
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 1 y = 1 }
		all_parents = { CHI_cssc_radar_absorbent_hull_coating }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates mio_cat_only_small_ships }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		equipment_bonus = {
			max_strength = 0.03
			max_organisation = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_high_thrust_propulsion_drives
		name = CHI_cssc_high_thrust_propulsion_drives
		icon = GFX_generic_mio_trait_icon_naval_speed

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 2 y = 1 }
		all_parents = { CHI_cssc_radar_absorbent_hull_coating }

		limit_to_equipment_type = { carrier mio_cat_destroyers }

		equipment_bonus = {
			naval_speed = 0.05
		}
		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_hull_stress_management_structures
		name = CHI_cssc_hull_stress_management_structures
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = -2 y = 2 }
		all_parents = { CHI_cssc_modular_weapon_mounts }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates }

		equipment_bonus = {
			max_strength = 0.05
			naval_speed = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_stealth_bow_design
		name = CHI_cssc_stealth_bow_design
		icon = GFX_generic_mio_trait_icon_surface_visibility

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = -1 y = 2 }
		all_parents = { CHI_cssc_integrated_sensor_mast_array CHI_cssc_modular_weapon_mounts }

		limit_to_equipment_type = { mio_cat_destroyers mio_cat_frigates mio_cat_only_small_ships }

		equipment_bonus = {
			surface_visibility = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_multi_role_missile_cells
		name = CHI_cssc_multi_role_missile_cells
		icon = GFX_generic_mio_trait_icon_lg_attack

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 0 y = 2 }
		all_parents = { CHI_cssc_integrated_sensor_mast_array }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates }

		equipment_bonus = {
			lg_attack = 0.04
			anti_air_attack = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_high_power_energy_distribution
		name = CHI_cssc_high_power_energy_distribution
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 1 y = 2 }
		all_parents = { CHI_cssc_advanced_damage_control_network }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates }

		production_bonus = {
			production_resource_need_factor = -0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_enhanced_anti_air_radars
		name = CHI_cssc_enhanced_anti_air_radars
		icon = GFX_generic_mio_trait_icon_naval_anti_air_attack

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 2 y = 3 }
		all_parents = { CHI_cssc_high_power_energy_distribution }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates }

		equipment_bonus = {
			anti_air_attack = 0.05
			surface_detection = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_composite_superstructure_frame
		name = CHI_cssc_composite_superstructure_frame
		icon = GFX_generic_mio_trait_icon_armor_value

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = -2 y = 3 }
		all_parents = { CHI_cssc_high_power_energy_distribution }

		limit_to_equipment_type = { carrier mio_cat_destroyers mio_cat_frigates }

		equipment_bonus = {
			armor_value = 0.08
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_electromagnetic_signature_shielding
		name = CHI_cssc_electromagnetic_signature_shielding
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = -1 y = 3 }
		all_parents = { CHI_cssc_stealth_bow_design }

		limit_to_equipment_type = { carrier mio_cat_destroyers }

		equipment_bonus = {
			surface_visibility = -0.03
			max_strength = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_hull_flow_optimization
		name = CHI_cssc_hull_flow_optimization
		icon = GFX_generic_mio_trait_icon_naval_speed

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 0 y = 3 }
		all_parents = { CHI_cssc_stealth_bow_design }

		limit_to_equipment_type = { mio_cat_destroyers mio_cat_frigates mio_cat_only_small_ships }

		equipment_bonus = {
			naval_speed = 0.04
			fuel_consumption = -0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_deck_handling_automation
		name = CHI_cssc_deck_handling_automation
		icon = GFX_generic_mio_trait_icon_carrier

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 1 y = 3 }
		all_parents = { CHI_cssc_multi_role_missile_cells }

		limit_to_equipment_type = { carrier helicopter_operator }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.25
		}

		equipment_bonus = {
			carrier_size = 2
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_replenishment_at_sea_systems
		name = CHI_cssc_replenishment_at_sea_systems
		icon = GFX_generic_mio_trait_icon_naval_range

		relative_position_id = CHI_cssc_radar_absorbent_hull_coating
		position = { x = 0 y = 4 }
		all_parents = { CHI_cssc_deck_handling_automation CHI_cssc_hull_flow_optimization}

		limit_to_equipment_type = { carrier convoy mio_cat_frigates mio_cat_destroyers }

		equipment_bonus = {
			naval_range = 0.08
		}

		production_bonus = {
			production_resource_penalty_factor = -0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_anechoic_tile_layers
		name = CHI_cssc_anechoic_tile_layers
		icon = GFX_generic_mio_trait_icon_submarine_armor

		position = { x = 7 y = 0 }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_visibility = -0.06
			armor_value = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_pump_jet_propulsion_system
		name = CHI_cssc_pump_jet_propulsion_system
		icon = GFX_generic_mio_trait_icon_submarine_speed

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = -1 y = 1 }
		all_parents = { CHI_cssc_anechoic_tile_layers }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			naval_speed = 0.08
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_undersea_network_integration
		name = CHI_cssc_undersea_network_integration
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 0 y = 1 }
		all_parents = { CHI_cssc_anechoic_tile_layers }

		limit_to_equipment_type = { submarine convoy }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}

		equipment_bonus = {
			sub_detection = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_composite_pressure_hull
		name = CHI_cssc_composite_pressure_hull
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 1 y = 1 }
		all_parents = { CHI_cssc_anechoic_tile_layers }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			max_organisation = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_advanced_torpedo_launch_systems
		name = CHI_cssc_advanced_torpedo_launch_systems
		icon = GFX_generic_mio_trait_icon_submarine

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 2 y = 1 }
		all_parents = { CHI_cssc_anechoic_tile_layers }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			torpedo_attack = 0.05
			sub_attack = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_adaptive_ballast_control
		name = CHI_cssc_adaptive_ballast_control
		icon = GFX_generic_mio_trait_icon_submarine

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = -2 y = 2 }
		all_parents = { CHI_cssc_pump_jet_propulsion_system }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			max_strength = 0.04
			sub_attack = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_silent_running_modes
		name = CHI_cssc_silent_running_modes
		icon = GFX_generic_mio_trait_icon_submarine

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = -1 y = 2 }
		all_parents = { CHI_cssc_pump_jet_propulsion_system }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			fuel_consumption = -0.03
			sub_visibility = -0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_hull_flow_optimization_underwater
		name = CHI_cssc_hull_flow_optimization_underwater
		icon = GFX_generic_mio_trait_icon_submarine_speed

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 0 y = 3 }
		all_parents = { CHI_cssc_silent_running_modes CHI_cssc_undersea_network_integration }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			naval_speed = 0.04
			fuel_consumption = -0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_acoustic_signature_masking
		name = CHI_cssc_acoustic_signature_masking
		icon = GFX_generic_mio_trait_icon_sub_visibility

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 1 y = 2 }
		all_parents = { CHI_cssc_undersea_network_integration }

		limit_to_equipment_type = { submarine convoy }

		equipment_bonus = {
			sub_visibility = -0.05
			surface_visibility = -0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_underwater_comm_relay_nodes
		name = CHI_cssc_underwater_comm_relay_nodes
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 2 y = 2 }
		all_parents = {
			CHI_cssc_undersea_network_integration
			CHI_cssc_advanced_torpedo_launch_systems
		}

		limit_to_equipment_type = { submarine convoy }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		equipment_bonus = {
			sub_detection = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_reinforced_pressure_bulkheads
		name = CHI_cssc_reinforced_pressure_bulkheads
		icon = GFX_generic_mio_trait_icon_submarine_armor

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = -2 y = 3 }
		all_parents = { CHI_cssc_adaptive_ballast_control }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			max_strength = 0.05
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_dynamic_sonar_nulling
		name = CHI_cssc_dynamic_sonar_nulling
		icon = GFX_generic_mio_trait_icon_submarine

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = -1 y = 3 }
		all_parents = { CHI_cssc_silent_running_modes }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_visibility = -0.04
			sub_detection = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_low_frequency_towed_array
		name = CHI_cssc_low_frequency_towed_array
		icon = GFX_generic_mio_trait_icon_submarine_range

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 0 y = 4 }
		all_parents = { CHI_cssc_hull_flow_optimization_underwater }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_detection = 0.05
			naval_range = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_cssc_magnetic_anomaly_reduction
		name = CHI_cssc_magnetic_anomaly_reduction
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_cssc_anechoic_tile_layers
		position = { x = 1 y = 3 }
		all_parents = { CHI_cssc_acoustic_signature_masking }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_visibility = -0.04
			fuel_consumption = -0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
CHI_csic_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_China_Shipbuilding_Industry_Corporation_CHI

	task_capacity = 8

	equipment_type = {
		mio_cat_destroyers
		cruiser
		carrier
		submarine
		convoy
	}

	tree_header_text = {
		text = "Surface & Carrier Systems"
		x = 2
	}

	tree_header_text = {
		text = "Submarine & Undersea Systems"
		x = 7
	}

	initial_trait = {
		name = CHI_csic_company_maritime_systems_bureau

		equipment_bonus = {
			naval_speed = 0.02
			surface_visibility = -0.02
			max_strength = 0.02
		}

		production_bonus = {
			production_capacity_factor = 0.10
			production_efficiency_gain_factor = 0.08
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
	}

	trait = {
		token = CHI_csic_radar_absorbent_coating
		name = CHI_csic_radar_absorbent_coating
		icon = GFX_generic_mio_trait_icon_surface_visibility

		position = { x = 2 y = 0 }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser convoy }

		equipment_bonus = {
			surface_visibility = -0.05
			max_strength = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_adaptive_stealth_superstructure
		name = CHI_csic_adaptive_stealth_superstructure
		icon = GFX_generic_mio_trait_icon_surface_visibility

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 0 y = 4 }
		all_parents = {
			CHI_csic_multi_role_drone_launcher
			CHI_csic_shore_support_integration
		}

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser }

		equipment_bonus = {
			surface_visibility = -0.04
			anti_air_attack = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_advanced_fire_control_network
		name = CHI_csic_advanced_fire_control_network
		icon = GFX_generic_mio_trait_icon_naval_anti_air_attack

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 1 y = 1 }
		all_parents = { CHI_csic_radar_absorbent_coating }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser }

		equipment_bonus = {
			anti_air_attack = 0.04
			surface_detection = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_aerodynamic_hull_flow_optimization
		name = CHI_csic_aerodynamic_hull_flow_optimization
		icon = GFX_generic_mio_trait_icon_naval_speed

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 0 y = 5 }
		all_parents = { CHI_csic_adaptive_stealth_superstructure }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser }

		equipment_bonus = {
			naval_speed = 0.03
			fuel_consumption = -0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_modular_munition_cells
		name = CHI_csic_modular_munition_cells
		icon = GFX_generic_mio_trait_icon_lg_attack

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -1 y = 1 }
		all_parents = { CHI_csic_radar_absorbent_coating }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser }

		equipment_bonus = {
			lg_attack = 0.03
			anti_air_attack = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_automated_damage_control
		name = CHI_csic_automated_damage_control
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -2 y = 6 }
		all_parents = { CHI_csic_composite_superstructure_frame }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser convoy }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		equipment_bonus = {
			reliability = 0.02
			max_strength = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_shipyard_efficiency_modulation
		name = CHI_csic_shipyard_efficiency_modulation
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 1 y = 2 }
		all_parents = { CHI_csic_advanced_fire_control_network }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser convoy }

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_fleet_replenishment_logistics
		name = CHI_csic_fleet_replenishment_logistics
		icon = GFX_generic_mio_trait_icon_surface_detection

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 0 y = 6 }
		all_parents = { CHI_csic_aerodynamic_hull_flow_optimization }

		limit_to_equipment_type = { carrier convoy }

		equipment_bonus = {
			surface_detection = 0.02
		}

		organization_modifier = {
			military_industrial_organization_industrial_manufacturer_assign_cost = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_composite_superstructure_frame
		name = CHI_csic_composite_superstructure_frame
		icon = GFX_generic_mio_trait_icon_armor_value

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -2 y = 5 }
		all_parents = { CHI_csic_adaptive_stealth_superstructure }

		limit_to_equipment_type = { carrier cruiser }

		equipment_bonus = {
			armor_value = 0.08
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_multi_role_drone_launcher
		name = CHI_csic_multi_role_drone_launcher
		icon = GFX_generic_mio_trait_icon_surface_detection

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -1 y = 2 }
		all_parents = {
			CHI_csic_modular_munition_cells
		}

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser }

		equipment_bonus = {
			surface_detection = 0.03
			anti_air_attack = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_emergency_power_distribution
		name = CHI_csic_emergency_power_distribution
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 0 y = 7 }
		all_parents = { CHI_csic_fleet_replenishment_logistics }

		limit_to_equipment_type = { carrier mio_cat_destroyers cruiser }

		equipment_bonus = {
			reliability = 0.03
			max_strength = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_csic_hybrid_gas_turbine_drive
		name = CHI_csic_hybrid_gas_turbine_drive
		icon = GFX_generic_mio_trait_icon_naval_speed

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -2 y = 8 }
		all_parents = { CHI_csic_emergency_power_distribution }

		limit_to_equipment_type = { carrier cruiser mio_cat_destroyers }

		equipment_bonus = {
			naval_speed = 0.03
			fuel_consumption = -0.03
		}

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_infrared_decoy_network
		name = CHI_csic_infrared_decoy_network
		icon = GFX_generic_mio_trait_icon_surface_visibility

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 0 y = 8 }
		all_parents = { CHI_csic_emergency_power_distribution }

		limit_to_equipment_type = { carrier cruiser mio_cat_destroyers }

		equipment_bonus = {
			surface_visibility = -0.04
			anti_air_attack = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_electronic_warfare_suite
		name = CHI_csic_electronic_warfare_suite
		icon = GFX_generic_mio_trait_icon_surface_detection

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 2 y = 8 }
		all_parents = { CHI_csic_emergency_power_distribution }

		limit_to_equipment_type = { carrier cruiser }

		equipment_bonus = {
			surface_detection = 0.03
			naval_torpedo_damage_reduction_factor = 0.05
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_hull_integrity_reinforcement
		name = CHI_csic_hull_integrity_reinforcement
		icon = GFX_generic_mio_trait_icon_max_strength

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 2 y = 9 }
		all_parents = { CHI_csic_electronic_warfare_suite }

		limit_to_equipment_type = { carrier cruiser mio_cat_destroyers }

		equipment_bonus = {
			max_strength = 0.04
			reliability = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_automated_magazine_handling
		name = CHI_csic_automated_magazine_handling
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 0 y = 9 }
		all_parents = { CHI_csic_infrared_decoy_network }

		limit_to_equipment_type = { carrier cruiser }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		organization_modifier = {
			military_industrial_organization_design_team_change_cost = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_integrated_battle_networks
		name = CHI_csic_integrated_battle_networks
		icon = GFX_generic_mio_trait_icon_funds

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -2 y = 9 }
		all_parents = { CHI_csic_hybrid_gas_turbine_drive }

		limit_to_equipment_type = { carrier cruiser mio_cat_destroyers }

		equipment_bonus = {
			surface_detection = 0.03
			anti_air_attack = 0.03
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_corrosion_resistant_alloys
		name = CHI_csic_corrosion_resistant_alloys
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = -1 y = 10 }
		all_parents = {
			CHI_csic_automated_magazine_handling
			CHI_csic_integrated_battle_networks
		}

		limit_to_equipment_type = { carrier convoy }

		equipment_bonus = {
			reliability = 0.05
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_advanced_cic_design
		name = CHI_csic_advanced_cic_design
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 1 y = 10 }
		all_parents = {
			CHI_csic_automated_magazine_handling
			CHI_csic_hull_integrity_reinforcement
		}

		limit_to_equipment_type = { carrier cruiser }

		equipment_bonus = {
			surface_detection = 0.02
			anti_air_attack = 0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_underway_repair_facilities
		name = CHI_csic_underway_repair_facilities
		icon = GFX_generic_mio_trait_icon_task

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 2 y = 6 }
		all_parents = { CHI_csic_synthetic_materials_pipeline }

		available = {
			CHI = { NOT = { has_idea = CHI_PLA_Business_Ventures } }
		}

		limit_to_equipment_type = { carrier mio_cat_destroyers }

		organization_modifier = {
			military_industrial_organization_task_capacity = 1
		}

		equipment_bonus = {
			naval_range = 0.08
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_synthetic_materials_pipeline
		name = CHI_csic_synthetic_materials_pipeline
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 2 y = 5 }
		all_parents = { CHI_csic_adaptive_stealth_superstructure }

		limit_to_equipment_type = { carrier mio_cat_destroyers convoy }

		production_bonus = {
			production_resource_need_factor = -0.10
			production_capacity_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_shore_support_integration
		name = CHI_csic_shore_support_integration
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		relative_position_id = CHI_csic_radar_absorbent_coating
		position = { x = 1 y = 3 }
		all_parents = { CHI_csic_shipyard_efficiency_modulation }

		limit_to_equipment_type = { convoy mio_cat_destroyers }

		equipment_bonus = {
			hg_attack = 0.05
			build_cost_ic = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_anechoic_tile_coating
		name = CHI_csic_anechoic_tile_coating
		icon = GFX_generic_mio_trait_icon_submarine

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_visibility = -0.06
			max_strength = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_pump_jet_propulsion
		name = CHI_csic_pump_jet_propulsion
		icon = GFX_generic_mio_trait_icon_submarine_speed

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = -1 y = 1 }
		all_parents = { CHI_csic_anechoic_tile_coating }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			naval_speed = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_modular_pressure_hull
		name = CHI_csic_modular_pressure_hull
		icon = GFX_generic_mio_trait_icon_submarine_armor

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 0 y = 1 }
		all_parents = { CHI_csic_anechoic_tile_coating }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			max_strength = 0.03
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_integrated_sonar_array
		name = CHI_csic_integrated_sonar_array
		icon = GFX_generic_mio_trait_icon_submarine_surface_detection

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 1 y = 1 }
		all_parents = { CHI_csic_anechoic_tile_coating }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_detection = 0.05
			surface_detection = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_silent_running_protocols
		name = CHI_csic_silent_running_protocols
		icon = GFX_generic_mio_trait_icon_submarine_resources

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 0 y = 5 }
		all_parents = {
			CHI_csic_pressure_bulkhead_reinforcement
			CHI_csic_low_frequency_towed_array
		}

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			fuel_consumption = -0.03
			sub_visibility = -0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_adaptive_ballast_control
		name = CHI_csic_adaptive_ballast_control
		icon = GFX_generic_mio_trait_icon_submarine

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = -1 y = 3 }
		all_parents = { CHI_csic_dynamic_sonar_nulling }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			max_strength = 0.03
			sub_attack = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_dynamic_sonar_nulling
		name = CHI_csic_dynamic_sonar_nulling
		icon = GFX_generic_mio_trait_icon_submarine_surface_detection

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 0 y = 2 }
		all_parents = {
			CHI_csic_pump_jet_propulsion
			CHI_csic_modular_pressure_hull
			CHI_csic_integrated_sonar_array
		}

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_visibility = -0.04
			sub_detection = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_undersea_network_relay
		name = CHI_csic_undersea_network_relay
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 1 y = 3 }
		all_parents = { CHI_csic_dynamic_sonar_nulling }

		limit_to_equipment_type = { submarine convoy }

		equipment_bonus = {
			sub_detection = 0.03
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_acoustic_masking_coating
		name = CHI_csic_acoustic_masking_coating
		icon = GFX_generic_mio_trait_icon_submarine_reliability

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 0 y = 6 }
		all_parents = { CHI_csic_silent_running_protocols }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_visibility = -0.05
			reliability = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_pressure_bulkhead_reinforcement
		name = CHI_csic_pressure_bulkhead_reinforcement
		icon = GFX_generic_mio_trait_icon_submarine_armor

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = -1 y = 4 }
		all_parents = { CHI_csic_adaptive_ballast_control }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csic_low_frequency_towed_array
		name = CHI_csic_low_frequency_towed_array
		icon = GFX_generic_mio_trait_icon_submarine_surface_detection

		relative_position_id = CHI_csic_anechoic_tile_coating
		position = { x = 1 y = 4 }
		all_parents = { CHI_csic_undersea_network_relay }

		limit_to_equipment_type = { submarine }

		equipment_bonus = {
			sub_detection = 0.05
			surface_detection = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}
# Material
CHI_csgc_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_China_South_Industries_Group_CHI

	task_capacity = 8

	equipment_type = {
		Inf_equipment
		L_AT_Equipment
	}

	research_categories = {
		CAT_inf
		CAT_l_at
	}

	tree_header_text = {
		text = "Infantry Weapons & Systems"
		x = 1
	}

	tree_header_text = {
		text = "Anti-Tank Guided Missiles"
		x = 6
	}


	initial_trait = {
		name = CHI_csgc_trait

		equipment_bonus = {
			breakthrough = 0.05
			reliability = 0.05
		}

		production_bonus = {
			production_capacity_factor = 0.10
			production_efficiency_gain_factor = 0.08
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = CHI_csgc_polymer_lower_reciever_assemblies
		name = CHI_csgc_polymer_lower_reciever_assemblies
		icon = GFX_generic_mio_trait_icon_smallarms_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			reliability = 0.05
		}

		production_bonus = {
			production_resource_need_factor = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_precision_barrel_rifling
		name = CHI_csgc_precision_barrel_rifling
		icon = GFX_generic_mio_trait_icon_smallarms

		relative_position_id = CHI_csgc_polymer_lower_reciever_assemblies
		position = { x = -1 y = 1 }
		all_parents = { CHI_csgc_polymer_lower_reciever_assemblies }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			ap_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_quick_change_mag_system
		name = CHI_csgc_quick_change_mag_system
		icon = GFX_generic_mio_trait_icon_smallarms_reliability

		relative_position_id = CHI_csgc_polymer_lower_reciever_assemblies
		position = { x = 1 y = 1 }
		all_parents = { CHI_csgc_polymer_lower_reciever_assemblies }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			reliability = 0.02
		}

		production_bonus = {
			production_conversion_speed_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_electro_optical_sighting_module
		name = CHI_csgc_electro_optical_sighting_module
		icon = GFX_generic_mio_trait_icon_smallarms_soft_attack

		relative_position_id = CHI_csgc_precision_barrel_rifling
		position = { x = 0 y = 2 }
		all_parents = { CHI_csgc_precision_barrel_rifling }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_durasteel_bolt_material
		name = CHI_csgc_durasteel_bolt_material
		icon = GFX_generic_mio_trait_icon_smallarms_reliability

		relative_position_id = CHI_csgc_precision_barrel_rifling
		position = { x = 1 y = 1 }
		all_parents = {
			CHI_csgc_precision_barrel_rifling
			CHI_csgc_quick_change_mag_system
		}

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			reliability = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_mass_production_forging
		name = CHI_csgc_mass_production_forging
		icon = GFX_generic_mio_trait_icon_smallarms_efficiency_gain

		relative_position_id = CHI_csgc_quick_change_mag_system
		position = { x = 0 y = 2 }
		all_parents = { CHI_csgc_quick_change_mag_system }

		limit_to_equipment_type = { Inf_equipment }

		production_bonus = {
			production_efficiency_cap_factor = 0.25
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_recoil_compensation_system
		name = CHI_csgc_recoil_compensation_system
		icon = GFX_generic_mio_trait_icon_smallarms_soft_attack

		relative_position_id = CHI_csgc_durasteel_bolt_material
		position = { x = 0 y = 2 }
		all_parents = { CHI_csgc_durasteel_bolt_material }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			soft_attack = 0.05
			reliability = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_modular_accessory_interface
		name = CHI_csgc_modular_accessory_interface
		icon = GFX_generic_mio_trait_icon_smallarms_attack

		relative_position_id = CHI_csgc_recoil_compensation_system
		position = { x = -1 y = 1 }
		all_parents = { CHI_csgc_recoil_compensation_system }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			breakthrough = 0.05
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_coil_actuated_trigger
		name = CHI_csgc_coil_actuated_trigger
		icon = GFX_generic_mio_trait_icon_smallarms_hard_attack

		relative_position_id = CHI_csgc_modular_accessory_interface
		position = { x = 2 y = 0 }
		all_parents = { CHI_csgc_recoil_compensation_system }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			hard_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_stealth_weapon_coating
		name = CHI_csgc_stealth_weapon_coating
		icon = GFX_generic_mio_trait_icon_smallarms_defense

		relative_position_id = CHI_csgc_polymer_lower_reciever_assemblies
		position = { x = 0 y = 6 }
		all_parents = {
			CHI_csgc_coil_actuated_trigger
			CHI_csgc_modular_accessory_interface
		}

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			defense = 0.10
		}

		production_bonus = {
			production_resource_penalty_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_csgc_advanced_guidance_unit
		name = CHI_csgc_advanced_guidance_unit
		icon = GFX_generic_mio_trait_icon_atgm_ap_attack

		position = { x = 6 y = 0 }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			ap_attack = 0.06
			breakthrough = 0.06
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_dual_mode_rocket_propulsion
		name = CHI_csgc_dual_mode_rocket_propulsion
		icon = GFX_generic_mio_trait_icon_atgm_hard_attack

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = -2 y = 1 }
		all_parents = { CHI_csgc_advanced_guidance_unit }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			soft_attack = 0.05
			hard_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_smart_fuze_design
		name = CHI_csgc_smart_fuze_design
		icon = GFX_generic_mio_trait_icon_atgm_ap_attack

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = 0 y = 1 }
		all_parents = { CHI_csgc_advanced_guidance_unit }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			ap_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_backblast_suppression_system
		name = CHI_csgc_backblast_suppression_system
		icon = GFX_generic_mio_trait_icon_atgm_reliability

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = 2 y = 1 }
		all_parents = { CHI_csgc_advanced_guidance_unit }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			reliability = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_modular_launcher_chassis
		name = CHI_csgc_modular_launcher_chassis
		icon = GFX_generic_mio_trait_icon_atgm_efficiency_gain

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = 0 y = 2 }
		all_parents = { CHI_csgc_smart_fuze_design }

		limit_to_equipment_type = { L_AT_Equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.10
		}

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_anti_jam_signal_processing
		name = CHI_csgc_anti_jam_signal_processing
		icon = GFX_generic_mio_trait_icon_atgm_defense

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = -1 y = 3 }
		all_parents = { CHI_csgc_modular_launcher_chassis }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			defense = 0.05
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_lightweight_composite_airshell
		name = CHI_csgc_lightweight_composite_airshell
		icon = GFX_generic_mio_trait_icon_atgm_buildcost

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = 1 y = 3 }
		all_parents = { CHI_csgc_modular_launcher_chassis }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_variable_trajectory_guidance
		name = CHI_csgc_variable_trajectory_guidance
		icon = GFX_generic_mio_trait_icon_atgm_breakthrough

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = 0 y = 4 }
		all_parents = {
			CHI_csgc_anti_jam_signal_processing
			CHI_csgc_lightweight_composite_airshell
		}

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			breakthrough = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_overdrive_booster_stage
		name = CHI_csgc_overdrive_booster_stage
		icon = GFX_generic_mio_trait_icon_atgm_breakthrough

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = 1 y = 5 }
		all_parents = { CHI_csgc_variable_trajectory_guidance }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			breakthrough = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_csgc_self_seeking_submunition
		name = CHI_csgc_self_seeking_submunition
		icon = GFX_generic_mio_trait_icon_atgm_hard_attack

		relative_position_id = CHI_csgc_advanced_guidance_unit
		position = { x = -1 y = 5 }
		all_parents = { CHI_csgc_variable_trajectory_guidance }

		limit_to_equipment_type = { L_AT_Equipment }

		equipment_bonus = {
			hard_attack = 0.06
		}

		production_bonus = {
			production_capacity_factor = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

}
CHI_poly_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_poly_company

	task_capacity = 18

	equipment_type = {
		Inf_equipment
		artillery_equipment
		medium_tank_rocket_chassis
		medium_tank_artillery_chassis
		sam_missile_equipment
		guided_missile_equipment
	}

	research_categories = {
		CAT_inf
		CAT_artillery
		CAT_cm
		CAT_sam
	}

	tree_header_text = {
		text = "Infantry & Artillery Systems"
		x = 1
	}

	tree_header_text = {
		text = "Guided & Rocket Artillery"
		x = 5
	}

	tree_header_text = {
		text = "Surface-to-Air & Guided Missiles"
		x = 8
	}

	initial_trait = {
		name = CHI_poly_trait

		equipment_bonus = {
			soft_attack = 0.02
			reliability = 0.02
		}

		production_bonus = {
			production_capacity_factor = 0.10
			production_efficiency_gain_factor = 0.08
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}
	}
	trait = {
		token = CHI_poly_cold_hammer_forged_barrels
		name = CHI_poly_cold_hammer_forged_barrels
		icon = GFX_generic_mio_trait_icon_smallarms_reliability

		position = { x = 1 y = 0 }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			reliability = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_polymer_receiver_casting
		name = CHI_poly_polymer_receiver_casting
		icon = GFX_generic_mio_trait_icon_smallarms_resources

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = -1 y = 1 }
		all_parents = { CHI_poly_cold_hammer_forged_barrels }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			reliability = 0.02
		}

		production_bonus = {
			production_resource_need_factor = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_modular_rail_system
		name = CHI_poly_modular_rail_system
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 1 y = 1 }
		all_parents = { CHI_poly_cold_hammer_forged_barrels }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			soft_attack = 0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_ergonomic_recoil_buffers
		name = CHI_poly_ergonomic_recoil_buffers
		icon = GFX_generic_mio_trait_icon_smallarms_attack

		relative_position_id = CHI_poly_modular_rail_system
		position = { x = 1 y = 1 }
		all_parents = { CHI_poly_modular_rail_system }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			soft_attack = 0.03
			reliability = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_batch_heat_treatment
		name = CHI_poly_batch_heat_treatment
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 0 y = 2 }
		all_parents = {
			CHI_poly_modular_rail_system
			CHI_poly_polymer_receiver_casting
		}

		limit_to_equipment_type = { Inf_equipment artillery_equipment }

		production_bonus = {
			production_capacity_factor = 0.12
			production_cost_factor = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_corrosion_resistant_finishes
		name = CHI_poly_corrosion_resistant_finishes
		icon = GFX_generic_mio_trait_icon_smallarms_reliability

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = -1 y = 3 }
		all_parents = { CHI_poly_batch_heat_treatment }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			reliability = 0.03
			build_cost_ic = 0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_precision_fuze_machining
		name = CHI_poly_precision_fuze_machining
		icon = GFX_generic_mio_trait_icon_artillery_soft_attack

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 1 y = 3 }
		all_parents = { CHI_poly_batch_heat_treatment }

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_split_trail_refit
		name = CHI_poly_split_trail_refit
		icon = GFX_generic_mio_trait_icon_artillery_defence

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 0 y = 5 }
		all_parents = {
			CHI_poly_smart_propellant_grains
		}

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			defense = 0.03
			breakthrough = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_shells_qc_sampling
		name = CHI_poly_shells_qc_sampling
		icon = GFX_generic_mio_trait_icon_artillery_efficiency_gain

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 2 y = 6 }
		all_parents = { CHI_poly_low_signature_muzzle_brakes }

		limit_to_equipment_type = { artillery_equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_smart_propellant_grains
		name = CHI_poly_smart_propellant_grains
		icon = GFX_generic_mio_trait_icon_artillery_soft_attack

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 0 y = 4 }
		all_parents = {
			CHI_poly_corrosion_resistant_finishes
			CHI_poly_precision_fuze_machining
		}

		limit_to_equipment_type = { artillery_equipment }

		equipment_bonus = {
			soft_attack = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_low_signature_muzzle_brakes
		name = CHI_poly_low_signature_muzzle_brakes
		icon = GFX_generic_mio_trait_icon_smallarms_attack

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 2 y = 5 }
		all_parents = { CHI_poly_smart_propellant_grains }

		limit_to_equipment_type = { Inf_equipment }

		equipment_bonus = {
			soft_attack = 0.03
			breakthrough = 0.08
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_standardized_cartridge_supply
		name = CHI_poly_standardized_cartridge_supply
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_poly_cold_hammer_forged_barrels
		position = { x = 0 y = 6 }
		all_parents = { CHI_poly_split_trail_refit }

		limit_to_equipment_type = { Inf_equipment artillery_equipment }

		production_bonus = {
			production_resource_need_factor = -0.10
		}

		organization_modifier = {
			military_industrial_organization_industrial_manufacturer_assign_cost = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_poly_box_launcher_manifolds
		name = CHI_poly_box_launcher_manifolds
		icon = GFX_generic_mio_trait_icon_mlrs_attack

		position = { x = 4 y = 0 }

		limit_to_equipment_type = { medium_tank_rocket_chassis }

		equipment_bonus = {
			soft_attack = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_gyro_stabilized_mounts
		name = CHI_poly_gyro_stabilized_mounts
		icon = GFX_generic_mio_trait_icon_spg_breaktrough

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 2 y = 0 }

		limit_to_equipment_type = { medium_tank_artillery_chassis }

		equipment_bonus = {
			breakthrough = 0.03
			defense = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_overpressure_crew_capsule
		name = CHI_poly_overpressure_crew_capsule
		icon = GFX_generic_mio_trait_icon_spg_defense

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 0 y = 1 }
		all_parents = { CHI_poly_box_launcher_manifolds }

		limit_to_equipment_type = { medium_tank_artillery_chassis }

		equipment_bonus = {
			defense = 0.03
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_rocket_safety_interlocks
		name = CHI_poly_rocket_safety_interlocks
		icon = GFX_generic_mio_trait_icon_mlrs_reliability

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 2 y = 1 }
		all_parents = { CHI_poly_gyro_stabilized_mounts }

		limit_to_equipment_type = { medium_tank_rocket_chassis }

		equipment_bonus = {
			reliability = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_shared_power_distribution
		name = CHI_poly_shared_power_distribution
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 1 y = 2 }
		all_parents = {
			CHI_poly_overpressure_crew_capsule
			CHI_poly_rocket_safety_interlocks
		}

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_artillery_chassis }

		equipment_bonus = {
			fuel_consumption = -0.05
		}

		production_bonus = {
			production_capacity_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_automated_loader_cycle
		name = CHI_poly_automated_loader_cycle
		icon = GFX_generic_mio_trait_icon_spg_efficiency_cap

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 0 y = 3 }
		all_parents = { CHI_poly_shared_power_distribution }

		limit_to_equipment_type = { medium_tank_artillery_chassis }

		equipment_bonus = {
			soft_attack = 0.04
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_reinforced_torsion_bars
		name = CHI_poly_reinforced_torsion_bars
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 2 y = 3 }
		all_parents = { CHI_poly_shared_power_distribution }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_artillery_chassis }

		equipment_bonus = {
			reliability = 0.03
			breakthrough = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_composite_skirting_panels
		name = CHI_poly_composite_skirting_panels
		icon = GFX_generic_mio_trait_icon_armor_value

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 0 y = 4 }
		all_parents = { CHI_poly_automated_loader_cycle }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_artillery_chassis }

		equipment_bonus = {
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_digital_fire_control_bus
		name = CHI_poly_digital_fire_control_bus
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 2 y = 4 }
		all_parents = { CHI_poly_reinforced_torsion_bars }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_artillery_chassis }

		equipment_bonus = {
			soft_attack = 0.03
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_line_replaceable_units
		name = CHI_poly_line_replaceable_units
		icon = GFX_generic_mio_trait_icon_conversion_speed

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 1 y = 5 }
		all_parents = {
			CHI_poly_digital_fire_control_bus
			CHI_poly_composite_skirting_panels
		}

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_artillery_chassis }

		production_bonus = {
			production_conversion_speed_factor = 0.15
			production_efficiency_gain_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_propellant_handling_protocols
		name = CHI_poly_propellant_handling_protocols
		icon = GFX_generic_mio_trait_icon_mlrs_reliability

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 0 y = 6 }
		all_parents = { CHI_poly_line_replaceable_units }

		limit_to_equipment_type = { medium_tank_rocket_chassis }

		equipment_bonus = {
			reliability = 0.03
			fuel_consumption = -0.01
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_streamlined_hull_fabrication
		name = CHI_poly_streamlined_hull_fabrication
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_poly_box_launcher_manifolds
		position = { x = 2 y = 6 }
		all_parents = { CHI_poly_line_replaceable_units }

		limit_to_equipment_type = { medium_tank_rocket_chassis medium_tank_artillery_chassis }

		production_bonus = {
			production_efficiency_cap_factor = 0.10
			production_resource_penalty_factor = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_poly_dual_pulse_motor_series
		name = CHI_poly_dual_pulse_motor_series
		icon = GFX_generic_mio_trait_icon_maximum_speed

		position = { x = 8 y = 0 }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			maximum_speed = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_thrust_vector_control
		name = CHI_poly_thrust_vector_control
		icon = GFX_generic_mio_trait_icon_air_agility

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 0 y = 1 }
		all_parents = { CHI_poly_dual_pulse_motor_series }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_agility = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_kalman_guidance_filter
		name = CHI_poly_kalman_guidance_filter
		icon = GFX_generic_mio_trait_icon_air_attack

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = -1 y = 2 }
		all_parents = { CHI_poly_thrust_vector_control }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_attack = 0.03
			air_range = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_low_drag_airshells
		name = CHI_poly_low_drag_airshells
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 0 y = 3 }
		all_parents = {
			CHI_poly_kalman_guidance_filter
			CHI_poly_ramjet_hybrid_pathfinder
		}

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_range = 0.06
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_ramjet_hybrid_pathfinder
		name = CHI_poly_ramjet_hybrid_pathfinder
		icon = GFX_generic_mio_trait_icon_guided_missile_speed

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 1 y = 2 }
		all_parents = { CHI_poly_thrust_vector_control }

		limit_to_equipment_type = { guided_missile_equipment }

		equipment_bonus = {
			maximum_speed = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_seekers_ecm_hardening
		name = CHI_poly_seekers_ecm_hardening
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 0 y = 4 }
		all_parents = { CHI_poly_low_drag_airshells }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_attack = 0.02
			reliability = 0.02
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_cold_launch_cells
		name = CHI_poly_cold_launch_cells
		icon = GFX_generic_mio_trait_icon_air_range

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = -1 y = 5 }
		all_parents = { CHI_poly_seekers_ecm_hardening }

		limit_to_equipment_type = { sam_missile_equipment }

		equipment_bonus = {
			air_range = 0.02
		}

		production_bonus = {
			production_capacity_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_propellant_casting_qc
		name = CHI_poly_propellant_casting_qc
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 1 y = 5 }
		all_parents = { CHI_poly_seekers_ecm_hardening }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.18
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_datalink_handshake_protocols
		name = CHI_poly_datalink_handshake_protocols
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 0 y = 6 }
		all_parents = {
			CHI_poly_propellant_casting_qc
			CHI_poly_cold_launch_cells
		}

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			air_attack = 0.02
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_composite_booster_casings
		name = CHI_poly_composite_booster_casings
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = -3 y = 7 }
		all_parents = { CHI_poly_datalink_handshake_protocols }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		equipment_bonus = {
			reliability = 0.03
			armor_value = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_modular_payload_bays
		name = CHI_poly_modular_payload_bays
		icon = GFX_generic_mio_trait_icon_guided_missile

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = 1 y = 7 }
		all_parents = { CHI_poly_datalink_handshake_protocols }

		limit_to_equipment_type = { guided_missile_equipment }

		equipment_bonus = {
			air_ground_attack = 0.03
		}

		production_bonus = {
			production_conversion_speed_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_poly_supply_chain_vendor_pool
		name = CHI_poly_supply_chain_vendor_pool
		icon = GFX_generic_mio_trait_icon_design

		relative_position_id = CHI_poly_dual_pulse_motor_series
		position = { x = -1 y = 7 }
		all_parents = { CHI_poly_datalink_handshake_protocols }

		limit_to_equipment_type = { sam_missile_equipment guided_missile_equipment }

		production_bonus = {
			production_resource_need_factor = -0.12
		}

		organization_modifier = {
			military_industrial_organization_design_team_change_cost = -0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

}
CHI_crrc_manufacturer = {
	allowed = { original_tag = CHI }
	icon = GFX_idea_crrc_company

	task_capacity = 5

	equipment_type = {
		train_equipment
	}

	research_categories = {
		CAT_infrastructure
		CAT_excavation_tech
		CAT_construction_tech
		CAT_renewable
		CAT_3d
		CAT_industry
	}

	tree_header_text = {
		text = "Rail Systems & Rolling Stock"
		x = 2
	}

	tree_header_text = {
		text = "Diversification & Infrastructure"
		x = 7
	}

	initial_trait = {
		name = CHI_crrc_trait

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
			military_industrial_organization_funds_gain = 0.05
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.10
			production_capacity_factor = 0.10
		}
	}

	trait = {
		token = CHI_crrc_high_speed_train_program
		name = CHI_crrc_high_speed_train_program
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 2 y = 0 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_lightweight_carbody_alloys
		name = CHI_crrc_lightweight_carbody_alloys
		icon = GFX_generic_mio_trait_icon_resources

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = -1 y = 1 }
		all_parents = { CHI_crrc_high_speed_train_program }

		limit_to_equipment_type = { train_equipment }

		production_bonus = {
			production_resource_need_factor = -0.075
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_energy_recovery_braking
		name = CHI_crrc_energy_recovery_braking
		icon = GFX_generic_mio_trait_icon_design

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = 1 y = 1 }
		all_parents = { CHI_crrc_high_speed_train_program }

		limit_to_equipment_type = { train_equipment }

		organization_modifier = {
			military_industrial_organization_design_team_assign_cost = -0.25
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_digital_train_network
		name = CHI_crrc_digital_train_network
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = 1 y = 2 }
		all_parents = { CHI_crrc_energy_recovery_braking }

		limit_to_equipment_type = { train_equipment }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_low_rolling_resistance_bogies
		name = CHI_crrc_low_rolling_resistance_bogies
		icon = GFX_generic_mio_trait_icon_reliability

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = -1 y = 2 }
		all_parents = { CHI_crrc_lightweight_carbody_alloys }

		limit_to_equipment_type = { train_equipment }

		equipment_bonus = {
			reliability = 0.10
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_aerodynamic_nose_shaping
		name = CHI_crrc_aerodynamic_nose_shaping
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = 0 y = 3 }
		all_parents = {
			CHI_crrc_low_rolling_resistance_bogies
			CHI_crrc_digital_train_network
		}

		limit_to_equipment_type = { train_equipment }

		equipment_bonus = {
			build_cost_ic = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_crrc_smart_diagnostics_telematics
		name = CHI_crrc_smart_diagnostics_telematics
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = -1 y =4 }
		all_parents = { CHI_crrc_aerodynamic_nose_shaping }

		limit_to_equipment_type = { train_equipment }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.15
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_standardized_coupler_interfaces
		name = CHI_crrc_standardized_coupler_interfaces
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = 1 y = 4 }
		all_parents = { CHI_crrc_aerodynamic_nose_shaping }

		limit_to_equipment_type = { train_equipment }

		production_bonus = {
			production_efficiency_gain_factor = 0.10
			production_resource_need_factor = -0.05
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_crrc_modular_trainset_cabs
		name = CHI_crrc_modular_trainset_cabs
		icon = GFX_generic_mio_trait_icon_production_capacity

		relative_position_id = CHI_crrc_high_speed_train_program
		position = { x = 0 y = 5}
		all_parents = { CHI_crrc_aerodynamic_nose_shaping }

		limit_to_equipment_type = { train_equipment }

		production_bonus = {
			production_cost_factor = -0.06
			production_capacity_factor = 0.12
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
	trait = {
		token = CHI_crrc_urban_transit_systems
		name = CHI_crrc_urban_transit_systems
		icon = GFX_generic_mio_trait_icon_task

		position = { x = 7 y = 0 }

		organization_modifier = {
			custom_modifier_tooltip = CHI_crrc_urban_transit_systems_tt
		}

		on_complete = {
			hidden_effect = {
				CHI = { add_ideas = CHI_crrc_idea1 }
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_metro_automation_packages
		name = CHI_crrc_metro_automation_packages
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = -2 y = 1 }
		all_parents = { CHI_crrc_urban_transit_systems }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}

		on_complete = {
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_export_financing_arm
		name = CHI_crrc_export_financing_arm
		icon = GFX_generic_mio_trait_icon_funds

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = 0 y = 1 }
		all_parents = { CHI_crrc_urban_transit_systems }

		organization_modifier = {
			custom_modifier_tooltip = CHI_crrc_export_financing_arm_tt
		}

		on_complete = {
			hidden_effect = {
				CHI = {
					swap_ideas = {
						remove_idea = CHI_crrc_idea1
						add_idea = CHI_crrc_idea2
					}
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_international_infrastructure_partnerships
		name = CHI_crrc_international_infrastructure_partnerships
		icon = GFX_generic_mio_trait_icon_task

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = 2 y = 1 }
		all_parents = { CHI_crrc_urban_transit_systems }

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.08
			military_industrial_organization_design_team_change_cost = -0.10
		}

		production_bonus = {
			production_resource_need_factor = -0.05
		}

		on_complete = {
			CHI = {
				every_other_country = {
				limit = {
					NOT = {
						has_idea = Non_State_Actor
						has_idea = Lacks_International_Recognition
						has_idea = rival_government
					}
				}
				set_temp_variable = { percent_change = 1 }
				set_temp_variable = { tag_index = CHI }
				set_temp_variable = { influence_target = THIS }
				change_influence_percentage = yes
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_wind_energy_investments
		name = CHI_crrc_wind_energy_investments
		icon = GFX_generic_mio_trait_icon_unique

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = -1 y = 2 }
		all_parents = {
			CHI_crrc_metro_automation_packages
			CHI_crrc_export_financing_arm
		}

		on_complete = {
			CHI = {
				random_owned_state = {
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
				random_owned_state = {
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
				random_owned_state = {
					add_building_construction = {
						type = synthetic_refinery
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_advanced_materials_division
		name = CHI_crrc_advanced_materials_division
		icon = GFX_generic_mio_trait_icon_research

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = 0 y = 3 }
		all_parents = {
			CHI_crrc_wind_energy_investments
			CHI_crrc_green_energy_vehicles
		}

		organization_modifier = {
			custom_modifier_tooltip = CHI_crrc_advanced_materials_division_tt
		}

		on_complete = {
			hidden_effect = {
				CHI = {
					swap_ideas = {
						remove_idea = CHI_crrc_idea3
						add_idea = CHI_crrc_idea4
					}
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_green_energy_vehicles
		name = CHI_crrc_green_energy_vehicles
		icon = GFX_generic_mio_trait_icon_util

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = 1 y = 2 }
		all_parents = {
			CHI_crrc_international_infrastructure_partnerships
			CHI_crrc_export_financing_arm
		}

		organization_modifier = {
			custom_modifier_tooltip = CHI_crrc_green_energy_vehicles_tt
		}

		on_complete = {
			hidden_effect = {
				CHI = {
					swap_ideas = {
						remove_idea = CHI_crrc_idea2
						add_idea = CHI_crrc_idea3
					}
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_heavy_industry_supplier_pool
		name = CHI_crrc_heavy_industry_supplier_pool
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = 0 y = 5 }
		all_parents = { CHI_crrc_inland_logistics_corridors }

		organization_modifier = {
			custom_modifier_tooltip = CHI_crrc_heavy_industry_supplier_pool_tt
		}

		on_complete = {
			hidden_effect = {
				CHI = {
					swap_ideas = {
						remove_idea = CHI_crrc_idea5
						add_idea = CHI_crrc_idea6
					}
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}

	trait = {
		token = CHI_crrc_inland_logistics_corridors
		name = CHI_crrc_inland_logistics_corridors
		icon = GFX_generic_mio_trait_icon_supply_consumption

		relative_position_id = CHI_crrc_urban_transit_systems
		position = { x = 0 y = 4 }
		all_parents = { CHI_crrc_advanced_materials_division }

		organization_modifier = {
			custom_modifier_tooltip = CHI_crrc_inland_logistics_corridors_tt
		}

		on_complete = {
			hidden_effect = {
				CHI = {
					swap_ideas = {
						remove_idea = CHI_crrc_idea4
						add_idea = CHI_crrc_idea5
					}
				}
			}
			if = {
				limit = { check_variable = { free_trait_picks > 0 } }
				add_to_variable = { free_trait_picks = -1 }
			}
			else = { FROM = { small_expenditure = yes } }
		}
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				check_variable = { FROM.interest_rate > 8 }
			}
		}
	}
}

