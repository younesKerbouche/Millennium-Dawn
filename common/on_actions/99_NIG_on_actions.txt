# Niger Delta Crisis Event Triggers
# Note: Historical date-based events (MEND 2006, Amnesty 2009, NDA 2016) are in 00_yearly_effects.txt
on_actions = {

	on_monthly_NIG = {
		random_events = {
			# Random Niger Delta crisis events during active insurgency
			3000 = 0  # Most likely nothing happens

			# Oil Platform Attack - during crisis
			50 = nigeria_delta.2

			# Foreign Worker Kidnapping - during crisis
			40 = nigeria_delta.3

			# Pipeline Sabotage - during crisis
			35 = nigeria_delta.4
		}

		effect = {
			# International pressure when crisis is severe
			if = {
				limit = {
					OR = {
						has_idea = NIG_niger_delta_crisis_2
						has_idea = NIG_niger_delta_crisis_3
					}
					NOT = { has_country_flag = NIG_accepted_international_help }
					NOT = { has_country_flag = NIG_international_pressure_event_fired }
				}
				random = {
					chance = 75
					country_event = { id = nigeria_delta.5 days = 15 random_days = 30 }
					set_country_flag = NIG_international_pressure_event_fired
				}
			}

			# State of emergency trigger when crisis is critical
			if = {
				limit = {
					has_idea = NIG_niger_delta_crisis_3
					has_stability < 0.30
					NOT = { has_country_flag = NIG_niger_delta_state_of_emergency }
				}
				random = {
					chance = 40
					country_event = { id = nigeria_delta.21 days = 7 random_days = 14 }
				}
			}

			# Niger Delta Avengers emergence after amnesty failure (non-historical path)
			if = {
				limit = {
					has_country_flag = NIG_amnesty_failed
					NOT = { has_idea = NIG_niger_delta_avengers_idea }
					NOT = { has_country_flag = NIG_nda_emerged }
					NOT = { has_country_flag = NIG_niger_delta_resolved }
					has_full_control_of_state = 332
				}
				random = {
					chance = 30
					country_event = { id = nigeria_delta.20 days = 30 random_days = 90 }
					set_country_flag = NIG_nda_emerged
				}
			}

			# Crisis escalation over time if ignored
			if = {
				limit = {
					has_idea = NIG_niger_delta_crisis_1
					NOT = { has_country_flag = NIG_negotiating_with_militants }
					NOT = { has_country_flag = NIG_military_solution_path }
				}
				random = {
					chance = 15
					swap_ideas = {
						remove_idea = NIG_niger_delta_crisis_1
						add_idea = NIG_niger_delta_crisis_2
					}
				}
			}

			if = {
				limit = {
					has_idea = NIG_niger_delta_crisis_2
					NOT = { has_country_flag = NIG_negotiating_with_militants }
					NOT = { has_country_flag = NIG_military_solution_path }
				}
				random = {
					chance = 10
					swap_ideas = {
						remove_idea = NIG_niger_delta_crisis_2
						add_idea = NIG_niger_delta_crisis_3
					}
				}
			}
		}
	}
}
