on_actions = {
	on_weekly_JAP = {
		effect = {
			if = {
				limit = {
					USA = {
						has_country_flag = JAP_GUARANTEE_FROM_USA
						NOT = {
							has_guaranteed = JAP
						}
					}
				}
				country_event = Japan.100005204 #Reasserting Security Agreement
			}
		}
	}

	on_monthly_JAP = {
		effect = {
			# Monthly Consciousness Decay
			decay_mdmosjap_conrad_left = yes
			decay_mdmosjap_conrad_right = yes

			# Update guarantees for FOIP
			country_event = Japan.100009350

			# Events that need to have open end dates
			# Koichi Kato Scandal
			if = {
				limit = {
					original_tag = JAP
					date > 2002.3.0
					has_country_flag = MDMOSJAP_KATO_REBELLION_EXECUTED
					has_country_leader = { name = "Koichi Kato" }
					NOT = { has_country_flag = MDMOSJAP_EVENT_KATO_ONCE_QUIT_FROM_DIET }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.801 random_days = 14 } }
			}

			# Koichi Kato leaves diet
			if = {
				limit = {
					original_tag = JAP
					date > 2002.3.0
					OR = {
						has_country_flag = MDMOSJAP_KATO_REBELLION_FAILED_SUCCESSFULLY
						NOT = { has_country_leader = { name = "Koichi Kato" } }
						NOT = { has_country_flag = MDMOSJAP_KATO_REBELLION_EXECUTED }
					}
					NOT = { has_country_flag = MDMOSJAP_EVENT_KATO_ONCE_QUIT_FROM_DIET }
					NOT = { has_country_flag = MDMOSJAP_RETIREMENT_KOICHI_KATO }
				}
				JAP = { country_event = { id = mdmosjap_japan.140402001 random_days = 14 } }
			}

			# Taku Yamasaki Scandal
			if = {
				limit = {
					original_tag = JAP
					date > 2003.1.0
					has_country_leader = { name = "Taku Yamasaki" }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.852 random_days = 28 } }
			}

			# Dissolve NCP (CP)
			if = {
				limit = {
					original_tag = JAP
					date > 2003.11.0 #Date of 2003 Lower House General Election
					has_country_flag = MDMOSJAP_LP
					NOT = { is_in_array = { ruling_party = 6 } }
					NOT = { has_country_flag = MDMOSJAP_NCP_DISSOLUTION }
				}
				JAP = { country_event = { id = mdmosjap_japan.151121001 days = 9 random_days = 14 } }
			}

			# Nisshiren Scandal
			if = {
				limit = {
					original_tag = JAP
					date > 2004.7.0
					NOT = { has_country_leader = { name = "Hiromu Nonaka" } } # Nonoka not PM
					NOT = { has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.901 random_days = 28 } }
			}
			if = {
				limit = {
					original_tag = JAP
					date > 2004.7.0
					NOT = { has_country_leader = { name = "Hiromu Nonaka" } } # Nonoka is PM
					NOT = { has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL }
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.902 random_days = 28 } }
			}

			# Preceding Autumn Equinox Crisis
			if = {
				limit = {
					original_tag = JAP
					date > 2004.8.10
					has_country_leader = { name = "Yohei Kono" }
					has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL
					has_country_flag = MDMOSJAP_KATO_REBELLION_EPILOGUE_KONO_ENDING
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.952 random_days = 14 } }
			}
			if = {
				limit = {
					original_tag = JAP
					date > 2004.8.10
					has_country_leader = { name = "Koichi Kato" }
					has_country_flag = MDMOSJAP_KATO_REBELLION_EPILOGUE_KATO_STAYED
					has_country_flag = MDMOSJAP_EVENT_NONAKA_SCANDAL
					has_country_flag = MDMOSJAP_KATO_REBELLION_EPILOGUE_KONO_ENDING
				}
				JAP = { country_event = { id = mdmosjap_japan_kato.953 random_days = 14 } }
			}

			# Kenkiho Recession
			if = {
				limit = {
					original_tag = JAP
					NOT = { has_country_flag = MDMOSJAP_EVENTEXECUTED_KENKIHO_RECESSION }
					date > 2007.6.0
				}
				JAP = { country_event = { id = mdmosjap_japan.190621001 random_days = 28 } }
			}

			# 2008 Financial Crisis Impact
			if = {
				limit = {
					original_tag = JAP
					has_global_flag = usa_great_fiancial_crisis
					#only if USA was part of FTAAP for crisis to ripple
					USA = {
						has_idea = JAP_ftaap_member
					}
				}
				JAP = { country_event = { id = Japan.100015000 random_days = 28 } } #event: american financial crisis hits japan
			} else_if = {
				limit = {
					original_tag = JAP
					has_global_flag = usa_great_fiancial_crisis
					#part of FTAAP but USA is not a member
					has_idea = JAP_ftaap_member
				}
				every_country = {
					limit = {
						AND = {
							has_idea = JAP_ftaap_member
						}
					}
					country_event = { id = Japan.100015000 } #event: dodged a bullet
				}
			}

			# Kim Hyon-hui petitions to enter Japan
			if = {
				limit = {
					original_tag = JAP
					NOT = { has_country_flag = MDMOSJAP_EVENTEXECUTED_KIM_HYON_HUI }
					OR = {
						has_idea = JAP_abductionleague
						has_country_flag = MDMOSJAP_YES_PYONGYANG_STATEMENT
						has_country_flag = MDMOSJAP_NO_PYONGYANG_STATEMENT
						has_country_flag = MDMOSJAP_POOR_PYONGYANG_STATEMENT
					}
					OR = {
						NKO = { exists = yes }
						KOR = { exists = yes }
					}
					date > 2010.7.0
				}
				JAP = { country_event = { id = mdmosjap_japan.220720001 random_days = 28 } }
			}

			# Completion of new Henoko USFJ Base
			if = {
				limit = {
					original_tag = JAP
					USA = {
						exists = yes
						is_puppet = no
						is_subject = no
					}
					has_country_flag = MDMOSJAP_HENOKO_PREPARATION
					date > 2030.1.0
				}
				JAP = { country_event = { id = mdmosjap_japan.430101001 random_days = 28 } }
			}

			# Retirement of Hiromu Nonaka
			if = {
				limit = {
					date > 2003.10.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_HIROMU_NONAKA } # Will prevent multiple execution
						NOT = { has_country_leader = { name = "Hiromu Nonaka" } }
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.151001001 random_days = 14 } }
			}

			# Retirement of Yohei Kono
			if = {
				limit = {
					date > 2008.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YOHEI_KONO } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.200917001 random_days = 14 } }
			}

			# Retirement of Junichiro Koizumi
			if = {
				limit = {
					date > 2008.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_JUNICHIRO_KOIZUMI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.200926001 random_days = 14 } }
			}

			# Retirement of Yoshiro Mori
			if = {
				limit = {
					date > 2012.7.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YOSHIRO_MORI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.240723001 random_days = 14 } }
			}

			# Retirement of Taku Yamasaki
			if = {
				limit = {
					date > 2012.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_TAKU_YAMASAKI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.240901001 random_days = 14 } }
			}

			# Retirement of Yasuo Fukuda
			if = {
				limit = {
					date > 2012.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YASUO_FUKUDA } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.240927001 random_days = 14 } }
			}

			# Retirement of Yukio Hatoyama
			if = {
				limit = {
					date > 2012.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_YUKIO_HATOYAMA } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.241121001 random_days = 14 } }
			}

			# Retirement of Koichi Kato
			if = {
				limit = {
					date > 2013.4.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_KOICHI_KATO } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.250417001 random_days = 14 } }
			}

			# Death of Takako Doi
			if = {
				limit = {
					date > 2014.9.0
					JAP = {
						NOT = { has_country_flag = MDMOSJAP_RETIREMENT_TAKAKO_DOI } # Will prevent multiple execution
					}
				}
				JAP = { country_event = { id = mdmosjap_japan.260921001 random_days = 14 } }
			}
		}
	}

	on_startup = {
		effect = {
			JAP = {
				set_cosmetic_tag = JAP_western_conservatism

				clr_country_flag = MDMOSJAP_EVENT_THE_GREAT_REFERENDUM_MALCONCLUSION
				build_railway = {	#Ouu Main Line (Yamagata Shinkansen): Fukushima-Yamagata-Shinjo
					level = 2
					path = { 1024 4153 14867 4067 }
					start_province = 1024 target_province = 4067
				}
				build_railway = {	#Uchibo Line: Chiba-Awa Kamogawa
					level = 1
					path = { 4188 4184 }
					start_province = 4188 target_province = 4184
				}
				build_railway = {	#Chuo Main Line: Tokyo-Kofu-Okaya/Shiojiri-Tajimi-Nagoya
					level = 2
					path = { 1182 12072 10100 7187 10125 }
					start_province = 1182 target_province = 10125
				}
				build_railway = {
					level = 1
					path = { 7072 6168 }
					start_province = 7072 target_province = 6168
				}
				build_railway = {	#San'in Main Line: Kyoto-Maizuru
					level = 2
					path = { 11960 14865 1136 }
					start_province = 11960 target_province = 1136
				}
				build_railway = {	#Sanyo Main Line: Kobe-Moji
					level = 1
					path = { 6168 12031 7212 11946 1092 10052 14888 11985 1025 }
					start_province = 6168 target_province = 1025
				}
				build_railway = {	#Seto-Ohashi Line: Okayama-Takamatsu
					level = 2
					path = { 7212 4094 }
					start_province = 7212 target_province = 4094
				}

				build_railway = {	#Dosan Line: Tadotsu-Awa Ikeda
					level = 2
					path = { 4094 12028 }
					start_province = 4094 target_province = 12028
				}

				build_railway = {	#Nagasaki Main Line: Kubota-Nagasaki
					level = 1
					path = { 1158 9950 }
					start_province = 1158 target_province = 9950
				}

				#2000 BOOKMARK
				if = { limit = { date < 2016.12.31 }
					set_global_flag = MDMOSJAP_JAP_STARTS_2000

					#Constitutional Consciousness
					set_variable = { mdmosjap_JAP_var_LeftCon = 70.0 }
					set_variable = { mdmosjap_JAP_var_RightCon = 30.0 }

					CALC_MDMOSJAP_CONCON_MAXLIMIT = yes

					#Popular Radicalism
					set_variable = { mdmosjap_JAP_var_LeftRad = 5.0 }
					set_variable = { mdmosjap_JAP_var_RightRad = 5.0 }

					CALC_MDMOSJAP_CONRAD_MAXLIMIT = yes

					#MILLENNIUM DAWN ACCESS
					set_variable = { election_threshold = 0.00 } #JAPAN HAS NO ELECTION THRESHOLD SYSTEM IN NATURE
					set_country_flag = MDMOSJAP_MDMOSJAP_LOADED
				#	calculate_debt_rate = yes
					set_variable = { check_point_debt = debt }

				}
			}


			### United States of America
			USA = {
				#2017 BOOKMARK
				if = { limit = { date > 2016.12.31 }
					country_event = mdmosjap_japan.1610301										#By NF: JAP_article_five_of_treaty
				}
			}

			### Republic of Korea
			KOR = {
				#2017 BOOKMARK
				if = { limit = { date > 2016.12.31 }
					#HANDOVERED EVENTS' SCHEDULES
					country_event = { id = mdmosjap_japan.1640831 days = 145 }				#2017.05.26 - By NF: JAP_last_apologize
				}
			}
		}
	}

	# on_war = {
	# 	effect = {
	# 		#If peaceful Japan is attacked, begin the punishment kickoff
	# 		if = {
	# 			limit = {
	# 				FROM = {
	# 					original_tag = JAP
	# 					has_completed_focus = JAP_swiss_peace
	# 				}
	# 				ROOT = {
	# 					has_offensive_war_with = JAP
	# 					OR = { # try to limit this to people who can actually end the war if they WP
	# 						is_in_faction = no # isnt in faction
	# 						is_faction_leader = yes # is in faction and is faction leader
	# 						AND = { # is in faction, but faction leader wasnt called
	# 							is_in_faction = yes
	# 							NOT = {
	# 								faction_leader = {
	# 									has_war_with = JAP
	# 								}
	# 							}
	# 						}
	# 					}
	# 				}
	# 			}
	# 			ROOT = {
	# 				set_variable = { jap_compelled_peace = 0 } #Tracks how many times country has refused peace
	# 			}
	# 			activate_mission = JAP_dec_defense_compelled_peace
	# 			country_event = {
	# 				id = Japan.100009200 # warning that country needs to defeat JAP quickly or suffer debuffs
	# 				days = 1 #putting a delay on this so the war doesnt pop, AI immediately chooses peace, gets a white peace and peace event instantly
	# 			}
	# 		}
	# 	}
	# }
}
