on_actions = {
	on_daily = {
        effect = {
            every_controlled_state = {
                if = {
                    limit = {
                        has_state_flag = EH_electric_trap_enabled_flag
                        NOT = {
                            is_frontline_state = yes
                            is_second_line_state = yes
                            is_third_line_state = yes
                        }
                    }
                    clr_state_flag = EH_electric_trap_enabled_flag
                }
            }
            if = {
                limit = {
                    ROOT = {
                        has_country_flag = EH_nation_activated_electric_traps_flag
                        has_war_with = ALN
                    }
                }
                ROOT = {
                    every_controlled_state = {
                        limit = {
							OR = {
								is_frontline_state = yes
								is_second_line_state = yes
							}
                        }
                        set_state_flag = EH_electric_trap_enabled_flag
                    }
                }
            }
            if = {
                limit = {
                    ROOT = {
                        has_completed_focus = EH_investigate_strange_structure
                        NOT = {
                            has_country_flag = EH_country_succeeded_in_drone_mission_flag
                        }
                    }
                }
                ROOT = {
                    EH_drone_mission_calculations_effect = yes
                }
            }
        }
    }

    on_weekly = {
        effect = {
            if = {
                limit = {
                    ROOT = {
                        check_variable = { EH_research_sites_constructed_var > 0 }
                        has_country_flag = EH_research_sites_enabled
                        NOT = {
                            has_country_flag = EH_research_sites_strike_cooldown_flag
                        }
                    }
                }
                ROOT = {
                    random = {
                        chance = 40
                        EH_research_site_strike_effect = yes
                    }
                }
            }

            if = {
                limit = {
                    has_idea = EH_scientist_andrzej_trautman_idea
                }
                ROOT = {
                    random = {
                        chance = 5
                        if = {
                            limit = {
                                is_special_project_being_researched = sp:sp_monitor_portal_energy_emissions_project
                            }
                            sp:sp_monitor_portal_energy_emissions_project = {
                                add_project_progress_ratio = 0.03
                            }
                        }
                    }
                }
            }
        }
    }

    on_monthly = {
        effect = {
            if = {
                limit = {
                    ROOT = {
                        has_completed_focus = EH_study_new_enemy
                        has_war_with = ALN
                        check_variable = { EH_army_attack_factor_var3 < 0.12 }
                    }
                }
                ROOT = {
                    add_to_variable = { EH_army_attack_factor_var3 = 0.02 }
                    add_to_variable = { EH_army_defence_factor_var3 = 0.02 }
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_country_flag = EH_event_fired_flag
                    }
                    random = {
                        chance = 30
                        if = {
                            limit = {
                                NOT = {
                                    has_country_flag = EH_event_1_fired_flag
                                }
                            }
                            country_event = EH_focus_event.9
                        }
                    }
                    random = {
                        chance = 50
                        if = {
                            limit = {
                                NOT = {
                                    has_country_flag = EH_event_2_fired_flag
                                }
                            }
                            country_event = EH_focus_event.10
                        }
                    }
                    random = {
                        chance = 10
                        if = {
                            limit = {
                                NOT = {
                                    has_country_flag = EH_event_3_fired_flag
                                }
                            }
                            country_event = EH_focus_event.11
                        }
                    }
                }
            }
        }
    }

    on_startup = {
        effect = {
            if = {
                limit = {
                    OR = {
                        has_game_rule = {
                            rule = rule_event_horizon_scenario
                            option = BLITZ
                        }
                        has_game_rule = {
                            rule = rule_event_horizon_scenario
                            option = CASUAL
                        }
                        has_game_rule = {
                            rule = rule_event_horizon_scenario
                            option = DELAYED
                        }
                    }
                }
                POL = { # It must be some specific country to trigger the event
                    news_event = project_threshold.1
                }
            }
        }
    }
}