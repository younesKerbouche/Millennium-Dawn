#Author(s): Doolittle, Angriest Bird
scripted_gui = {

	# Opens the actual international system GUI
	open_the_international_scripted_gui = {
		context_type = player_context
		window_name = "IS_open_the_international_system_gui_window"
		parent_window_name = "MapmodesInterface_Ingame"
		dirty = global.num_days

		visible = { is_ai = no }

		effects = {
			open_the_international_system_click = {
				if = { limit = { NOT = { has_country_flag = international_open } }
					set_country_flag = international_open
				}
				else = {
					clr_country_flag = international_open
				}
				if = {
					limit = {
						NOT = {
							has_country_flag = pmc_menu_open
							has_country_flag = state_menu_open
							has_country_flag = counterterror_open
						}
					}
					set_country_flag = pmc_menu_open
				}
				update_international_system_gui = yes
			}
		}
	}

	# We currently only have three tabs and as we continue to expand we have space for additional tabs
	# Tabs:
	# 1. Private Military Companies (PMCs)
	# 2. Counter Terror
	# 3. Statehood
	international_systems_gui = {
		context_type = player_context
		window_name = "IS_main_background_window"

		dirty = global.international_system_refresh_gui

		ai_enabled = { always = yes }
		ai_check = {
			OR = {
				has_political_power > 149
				command_power > 49
			}
		}
		ai_test_interval = 168
		ai_max_weight_taken_per_test = 2

		visible = {
			OR = {
				is_ai = yes
				has_country_flag = international_open
			}
		}

		triggers = {


			counterterror_info_display_visible = {
				counter_terror_system_open = yes
			}
			counterterror_instruct_display_visible = {
				counter_terror_system_open = yes
			}

			# Counter Terror
			ct_region_asia_button_visible = {
				counter_terror_system_open = yes
			}
			ct_region_africa_button_visible = {
				counter_terror_system_open = yes
			}
			ct_region_me_button_visible = {
				counter_terror_system_open = yes
			}
			mor_promote_tolerant_islam_button_visible = {
				counter_terror_system_open = yes
			}
			mor_promote_tolerant_islam_button_click_enabled = {
				original_tag = MOR
				NOT = { has_government = fascism }
				NOT = { has_idea = youth_radicalization }
				custom_trigger_tooltip = {
					tooltip = influences_other_middle_eastern_country_tt
					any_of_scopes = {
						array = global.middle_east_ct_states
						is_influencer = yes
					}
				}

				has_political_power > 50
			}
			oma_promote_tolerant_islam_button_visible = {
				counter_terror_system_open = yes
			}
			oma_promote_tolerant_islam_button_click_enabled = {
				original_tag = OMA
				has_idea = ibadi
				NOT = { has_government = fascism }
				NOT = { has_idea = youth_radicalization }
				custom_trigger_tooltip = {
					tooltip = influences_other_middle_eastern_country_tt
					any_of_scopes = {
						array = global.middle_east_ct_states
						is_influencer = yes
					}
				}

				has_political_power > 50
			}
			ct_fund_deradicalisation_programs_button_visible = {
				OR = {
					is_ai = yes
					AND = {
						has_country_flag = counterterror_open
						OR = {
							is_in_array = { global.asia_ct_states = THIS.id }
							is_in_array = { global.africa_ct_states = THIS.id }
							is_in_array = { global.middle_east_ct_states = THIS.id }
						}
					}
				}
			}
			ct_fund_deradicalisation_programs_button_click_enabled = {
				no_jihadist_government = yes
				custom_trigger_tooltip = {
					tooltip = fund_derad_tt
					NOT = { has_country_flag = funding_derad }
				}
				has_idea = youth_radicalization

				has_political_power > 25
			}
			ct_training_button_visible = {
				OR = {
					is_ai = yes
					AND = {
						has_country_flag = counterterror_open
						OR = {
							is_in_array = { global.asia_ct_states = THIS.id }
							is_in_array = { global.africa_ct_states = THIS.id }
							is_in_array = { global.middle_east_ct_states = THIS.id }
						}
					}
				}
			}
			ct_training_button_click_enabled = {
				no_jihadist_government = yes

				command_power > 20

				custom_trigger_tooltip = {
					tooltip = conduct_training_tt
					NOT = { has_country_flag = conducting_training }
				}
			}
			ct_raid_button_visible = {
				OR = {
					is_ai = yes
					AND = {
						has_country_flag = counterterror_open
						OR = {
							is_in_array = { global.asia_ct_states = THIS.id }
							is_in_array = { global.africa_ct_states = THIS.id }
							is_in_array = { global.middle_east_ct_states = THIS.id }
						}
					}
				}
			}
			ct_raid_button_click_enabled = {
				no_jihadist_government = yes
				custom_trigger_tooltip = {
					tooltip = conduct_raid_tt
					NOT = { has_country_flag = conducting_raid }
				}
				custom_trigger_tooltip = {
					tooltip = low_threat_higher_tt
					check_variable = { threat_level > 10 }
				}
				command_power > 40
			}
			ct_strike_button_visible = {
				OR = {
					is_ai = yes
					AND = {
						has_country_flag = counterterror_open
						OR = {
							is_in_array = { global.asia_ct_states = THIS.id }
							is_in_array = { global.africa_ct_states = THIS.id }
							is_in_array = { global.middle_east_ct_states = THIS.id }
						}
					}
				}
			}
			ct_strike_button_click_enabled = {
				no_jihadist_government = yes
				custom_trigger_tooltip = {
					tooltip = conduct_strike_tt
					NOT = { has_country_flag = conducting_strike }
				}
				OR = {
					has_deployed_air_force_size = {
						size > 9
						type = cas
					}
					has_deployed_air_force_size = {
						size > 9
						type = tactical_bomber
					}
				}
				custom_trigger_tooltip = {
					tooltip = severe_threat_higher_tt
					check_variable = { threat_level > 50 }
				}
				command_power > 40
			}
			ct_deploy_advisors_button_visible = {
				OR = {
					is_ai = yes
					has_country_flag = counterterror_open
				}
			}
			ct_deploy_advisors_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = ct_capable_nation
					scripted_influencer_tags = yes
				}
				meta_trigger = {
					text = {
						custom_trigger_tooltip = {
							tooltip = has_not_sent_advisors
							NOT = { has_country_flag = military_advisors_[ctnation] }
						}
					}
					ctnation = "[?var:ct_state_selected.GetTag]"
				}
				if = { limit = { has_country_flag = ct_selected_me }
					has_country_flag = middle_east_influencer
				}
				else_if = { limit = { has_country_flag = ct_selected_africa }
					has_country_flag = africa_influencer
				}
				else_if = { limit = { has_country_flag = ct_selected_asia }
					has_country_flag = asia_influencer
				}
				var:ct_state_selected = {
					exists = yes
					no_jihadist_government = yes
					custom_trigger_tooltip = {
						tooltip = not_a_main_nation
						NOT = {
							original_tag = ISR
							original_tag = PER
							original_tag = PAL
							original_tag = HAM
							original_tag = HEZ
							original_tag = TUA
							original_tag = SHA
							is_Caucasus = yes
						}
					}
					is_top5_influencer_ct = yes
				}
				custom_trigger_tooltip = {
					tooltip = limited_interventionism_tt
					OR = {
						has_idea = intervention_regional_interventionism
						has_idea = intervention_global_interventionism
						has_idea = intervention_neo_imperialism
						has_idea = intervention_limited_interventionism
					}
				}
				custom_trigger_tooltip = {
					tooltip = superior_officer_law_tt
					if = {
						limit = { var:ct_state_selected = { has_idea = officer_baptism_by_fire } }
						NOT = { has_idea = officer_baptism_by_fire }
					}
					else_if = {
						limit = { var:ct_state_selected = { has_idea = officer_basic_training } }
						NOT = { has_idea = officer_baptism_by_fire }
						NOT = { has_idea = officer_basic_training }
					}
					else_if = {
						limit = { var:ct_state_selected = { has_idea = officer_advanced_training } }
						NOT = { has_idea = officer_baptism_by_fire }
						NOT = { has_idea = officer_basic_training }
						NOT = { has_idea = officer_advanced_training }
					}
					else_if = {
						limit = { var:ct_state_selected = { has_idea = officer_military_school } }
						NOT = { has_idea = officer_baptism_by_fire }
						NOT = { has_idea = officer_basic_training }
						NOT = { has_idea = officer_advanced_training }
						NOT = { has_idea = officer_military_school }
					}
					else_if = {
						limit = { var:ct_state_selected = { has_idea = officer_military_academy } }
						has_idea = officer_international_education
					}
					var:ct_state_selected = { NOT = { has_idea = officer_international_education } }
				}
				command_power > 40
			}
			ct_withdraw_advisors_button_visible = {
				OR = {
					is_ai = yes
					has_country_flag = counterterror_open
				}
			}
			ct_withdraw_advisors_button_click_enabled = {
				meta_trigger = {
					text = {
						custom_trigger_tooltip = {
							tooltip = has_sent_advisors
							has_country_flag = military_advisors_[ctnation]
						}
					}
					ctnation = "[?var:ct_state_selected.GetTag]"
				}
			}
			ct_nation_sel_disp_visible = {
				counter_terror_system_open = yes
			}
			ct_threat_disp_visible = {
				counter_terror_system_open = yes
			}
			ct_rad_disp_visible = {
				counter_terror_system_open = yes
			}
			ct_nation_disp_visible = {
				counter_terror_system_open = yes
			}
		}

		effects = {
			is_close_button_click = {
				clr_country_flag = international_open
				clr_country_flag = state_menu_open
				clr_country_flag = counterterror_open
				clr_country_flag = pmc_menu_open
				clear_array = selected_units
				clear_array = ct_region_selected
				clear_variable = comp_check
				clear_variable = open_state
				clear_variable = ct_state_selected
				clr_country_pmc_flag = yes
				clear_ct_flags = yes
				update_international_system_gui = yes
			}
			pmc_menu_button_click = {
				clr_country_flag = state_menu_open
				clr_country_flag = counterterror_open
				clear_variable = open_state
				set_country_flag = pmc_menu_open
				update_international_system_gui = yes
			}
			counterterror_menu_button_click = {
				clear_array = selected_units
				clear_variable = comp_check
				clr_country_pmc_flag = yes
				clear_variable = open_state
				clr_country_flag = pmc_menu_open
				clr_country_flag = state_menu_open
				set_country_flag = counterterror_open
				if = { limit = { is_in_array = { array = global.asia_ct_states value = THIS } }
					for_each_loop = {
						array = global.asia_ct_states
						value = v

						add_to_array = { ct_region_selected = v }
					}
					set_country_flag = ct_selected_asia
					set_variable = { ct_state_selected = THIS }
				}
				else_if = { limit = { is_in_array = { array = global.africa_ct_states value = THIS } }
					for_each_loop = {
						array = global.africa_ct_states
						value = v

						add_to_array = { ct_region_selected = v }
					}
					set_country_flag = ct_selected_africa
					set_variable = { ct_state_selected = THIS }
				}
				else_if = { limit = { is_in_array = { array = global.middle_east_ct_states value = THIS } }
					for_each_loop = {
						array = global.middle_east_ct_states
						value = v

						add_to_array = { ct_region_selected = v }
					}
					set_country_flag = ct_selected_me
					set_variable = { ct_state_selected = THIS }
				}
				update_international_system_gui = yes
			}
			int_recognition_menu_button_click = {
				clear_array = selected_units
				clear_variable = comp_check
				clr_country_pmc_flag = yes
				clr_country_flag = pmc_menu_open
				clr_country_flag = counterterror_open
				set_country_flag = state_menu_open
				update_international_system_gui = yes
			}


			# Counter Terror Section
			ct_region_asia_button_click = {
				clear_array = ct_region_selected
				clear_ct_flags = yes
				for_each_loop = {
					array = global.asia_ct_states
					value = v

					add_to_array = { ct_region_selected = v }
				}
				set_country_flag = ct_selected_asia
				set_country_flag = {
					flag = ct_change_timer
					days = 270
				}
				update_international_system_gui = yes
			}
			ct_region_africa_button_click = {
				clear_array = ct_region_selected
				clear_ct_flags = yes
				for_each_loop = {
					array = global.africa_ct_states
					value = v

					add_to_array = { ct_region_selected = v }
				}
				set_country_flag = ct_selected_africa
				set_country_flag = {
					flag = ct_change_timer
					days = 270
				}
				update_international_system_gui = yes
			}
			ct_region_me_button_click = {
				clear_array = ct_region_selected
				clear_ct_flags = yes
				for_each_loop = {
					array = global.middle_east_ct_states
					value = v

					add_to_array = { ct_region_selected = v }
				}
				set_country_flag = ct_selected_me
				set_country_flag = {
					flag = ct_change_timer
					days = 270
				}
				update_international_system_gui = yes
			}
			mor_promote_tolerant_islam_button_click = {
				set_temp_variable = { rad_change = -5 }
				every_other_country = {
					limit = {
						is_in_array = { global.middle_east_ct_states = THIS.id }
						is_influencer = yes
					}
					modify_radicalization_effect = yes
				}
				log = "[GetDateText]: [This.GetName]: decision MOR_promote_tolerant_islam executed"
				update_international_system_gui = yes
			}
			oma_promote_tolerant_islam_button_click = {
				set_temp_variable = { rad_change = -5 }
				every_other_country = {
					limit = {
						is_in_array = { global.middle_east_ct_states = THIS.id }
						is_influencer = yes
					}
					modify_radicalization_effect = yes
				}
				log = "[GetDateText]: [This.GetName]: decision OMA_promote_tolerant_islam executed"
				update_international_system_gui = yes
			}
			ct_fund_deradicalisation_programs_button_click = {
				set_country_flag = funding_derad
				activate_mission = terror_fund_deradicalisation_programmes
				update_international_system_gui = yes
			}
			ct_training_button_click = {
				set_country_flag = conducting_training
				activate_mission = terror_ct_training_mission
				update_international_system_gui = yes
			}
			ct_raid_button_click = {
				set_country_flag = conducting_raid
				activate_mission = terror_conduct_raid
				update_international_system_gui = yes
			}
			ct_strike_button_click = {
				set_country_flag = conducting_strike
				activate_mission = terror_conduct_strike
				update_international_system_gui = yes
			}
			ct_deploy_advisors_button_click = {
				log = "[GetDateText]: [This.GetName]: decision deploy_military_advisors executed"
				add_command_power = -40
				add_manpower = -150
				var:ct_state_selected = {
					hidden_effect = {
						PREV = {
							set_country_flag = military_advisors_@PREV
						}
					}
					add_to_variable = { foreign_advisors = 1 }
					hidden_effect = { update_foreign_advisors_effect = yes }
				}
				custom_effect_tooltip = deploy_military_advisors_tt
				update_international_system_gui = yes
			}
			ct_withdraw_advisors_button_click = {
				log = "[GetDateText]: [This.GetName]: decision withdraw_military_advisors executed"
				add_command_power = -40
				add_manpower = 150

				var:ct_state_selected = {
					hidden_effect = {
						PREV = {
							clr_country_flag = military_advisors_@PREV
						}
					}
					subtract_from_variable = { foreign_advisors = 1 }
					hidden_effect = { update_foreign_advisors_effect = yes }
				}
				custom_effect_tooltip = withdraw_military_advisors_tt
				update_international_system_gui = yes
			}
		}

		ai_weights = {
			pmc_menu_button_click = {
				ai_will_do = {
					factor = 100
					modifier = {
						factor = 5
						has_war = yes
					}
				}
			}
			counterterror_menu_button_click = {
				ai_will_do = {
					factor = 100
					modifier = {
						factor = 10
						OR = {
							is_in_array = { global.asia_ct_states = THIS.id }
							is_in_array = { global.africa_ct_states = THIS.id }
							is_in_array = { global.middle_east_ct_states = THIS.id }
						}
					}
				}
			}
			int_recognition_menu_button_click = {
				ai_will_do = {
					factor = 100
				}
			}
			move_embassy_ISR_button_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						add = 10
						has_opinion = {
							target = ISR
							value > 0
						}
					}
					modifier = {
						add = 25
						has_opinion = {
							target = ISR
							value > 25
						}
					}
					modifier = {
						add = 100
						has_opinion = {
							target = ISR
							value > 50
						}
					}
					modifier = {
						add = 300
						has_opinion = {
							target = ISR
							value > 75
						}
					}
					modifier = {
						add = -10000
						has_opinion = {
							target = ISR
							value < 0
						}
					}
				}
			}
			remove_light_inf_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			remove_mot_inf_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			remove_mech_inf_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			remove_hvy_inf_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			remove_spec_inf_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			remove_tank_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			remove_sf_inf_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						has_army_size = { size > 75 }
					}
				}
			}
			grant_recog_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 50
						var:open_state = { ROOT = { has_opinion = { target = PREV value  > 50 } } }
					}

					modifier = {
						add = 75
						var:open_state = { ROOT = { has_opinion = { target = PREV value  > 60 } } }
					}

					modifier = {
						add = 100
						var:open_state = { ROOT = { has_opinion = { target = PREV value  > 70 } } }
					}

					modifier = {
						factor = 0
						check_variable = { var:v = THIS }
					}
				}
			}
			pressure_countries_recog_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 50
						var:open_state = { ROOT = { has_opinion = { target = PREV value  > 50 } } }
					}

					modifier = {
						add = 75
						var:open_state = { ROOT = { has_opinion = { target = PREV value  > 60 } } }
					}

					modifier = {
						add = 100
						var:open_state = { ROOT = { has_opinion = { target = PREV value  > 70 } } }
					}
				}
			}
			rescind_recog_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 50
						var:open_state = { ROOT = { has_opinion = { target = PREV value  < 15 } } }
					}

					modifier = {
						add = 400
						var:open_state = { ROOT = { has_opinion = { target = PREV value  < 0 } } }
					}
				}
			}
			switch_recog_button_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						add = 50
						var:open_state = { ROOT = { has_opinion = { target = PREV value  < 15 } } }
					}

					modifier = {
						add = 400
						var:open_state = { ROOT = { has_opinion = { target = PREV value  < 0 } } }
					}
				}
			}
			campaign_USA_button_click = {
				ai_will_do = {
					factor = 300

					modifier = {
						factor = 0
						meta_trigger = {
							text = {
								USA = {
									has_country_flag = Recognised_[thname]
								}
							}
							thname = "[?THIS.GetTag]"
						}
					}
				}
			}
			campaign_SOV_button_click = {
				ai_will_do = {
					factor = 300

					modifier = {
						factor = 0
						meta_trigger = {
							text = {
								SOV = {
									has_country_flag = Recognised_[thname]
								}
							}
							thname = "[?THIS.GetTag]"
						}
					}
				}
			}
			campaign_CHI_button_click = {
				ai_will_do = {
					factor = 300

					modifier = {
						factor = 0
						meta_trigger = {
							text = {
								CHI = {
									has_country_flag = Recognised_[thname]
								}
							}
							thname = "[?THIS.GetTag]"
						}
					}
				}
			}
			campaign_ENG_button_click = {
				ai_will_do = {
					factor = 300

					modifier = {
						factor = 0
						meta_trigger = {
							text = {
								ENG = {
									has_country_flag = Recognised_[thname]
								}
							}
							thname = "[?THIS.GetTag]"
						}
					}
				}
			}
			campaign_FRA_button_click = {
				ai_will_do = {
					factor = 300

					modifier = {
						factor = 0
						meta_trigger = {
							text = {
								FRA = {
									has_country_flag = Recognised_[thname]
								}
							}
							thname = "[?THIS.GetTag]"
						}
					}
				}
			}
			un_ascension_button_click = {
				ai_will_do = {
					factor = 300
				}
			}

			# Counter Terror section
			ct_region_asia_button_click = {
				ai_will_do = {
					factor = 100

					modifier = {
						factor = 0
						has_country_flag = ct_change_timer
					}
				}
			}
			ct_region_africa_button_click = {
				ai_will_do = {
					factor = 100

					modifier = {
						factor = 0
						has_country_flag = ct_change_timer
					}
				}
			}
			ct_region_me_button_click = {
				ai_will_do = {
					factor = 100

					modifier = {
						factor = 0
						has_country_flag = ct_change_timer
					}
				}
			}
			mor_promote_tolerant_islam_button_click = {
				ai_will_do = {
					factor = 50
				}
			}
			oma_promote_tolerant_islam_button_click = {
				ai_will_do = {
					factor = 50
				}
			}
			ct_fund_deradicalisation_programs_button_click = {
				ai_will_do = {
					factor = 1
					modifier = {
						add = 10
						check_variable = { radicalization < 10 }
					}
					modifier = {
						add = 50
						check_variable = { radicalization > 9 }
						check_variable = { radicalization < 30 }
					}
					modifier = {
						add = 100
						check_variable = { radicalization > 29 }
						check_variable = { radicalization < 50 }
					}
					modifier = {
						add = 200
						check_variable = { radicalization > 49 }
					}
				}
			}
			ct_training_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 10
						has_country_flag = threat_level_low
					}
					modifier = {
						add = 25
						has_country_flag = threat_level_moderate
					}
					modifier = {
						add = 100
						has_country_flag = threat_level_substantial
					}
					modifier = {
						add = 150
						has_country_flag = threat_level_severe
					}
					modifier = {
						add = 200
						has_country_flag = threat_level_critical
					}
				}
			}
			ct_raid_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 10
						has_country_flag = threat_level_low
					}
					modifier = {
						add = 25
						has_country_flag = threat_level_moderate
					}
					modifier = {
						add = 100
						has_country_flag = threat_level_substantial
					}
					modifier = {
						add = 150
						has_country_flag = threat_level_severe
					}
					modifier = {
						add = 200
						has_country_flag = threat_level_critical
					}
				}
			}
			ct_deploy_advisors_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 50
						var:ct_state_selected = {
							has_country_flag = threat_level_moderate
						}
					}
					modifier = {
						add = 100
						var:ct_state_selected = {
							has_country_flag = threat_level_substantial
						}
					}
					modifier = {
						add = 150
						var:ct_state_selected = {
							has_country_flag = threat_level_severe
						}
					}
					modifier = {
						add = 200
						var:ct_state_selected = {
							has_country_flag = threat_level_critical
						}
					}
					modifier = {
						add = -500
						has_war = yes
					}
				}
			}
			ct_withdraw_advisors_button_click = {
				ai_will_do = {
					factor = 1

					modifier = {
						add = 100
						var:ct_state_selected = {
							has_country_flag = threat_level_moderate
						}
					}

					modifier = {
						add = 200
						var:ct_state_selected = {
							has_country_flag = threat_level_low
						}
					}

					modifier = {
						add = 200
						has_war = yes
					}
				}
			}
		}
	}

	international_counterterror_countries_dynamic_lists = {
		context_type = player_context
		parent_scripted_gui = international_systems_gui
		window_name = "IS_counter_terror_states_container"

		dirty = global.international_system_refresh_gui
		ai_enabled = { always = no }
		ai_test_interval = 168
		ai_max_weight_taken_per_test = 1

		visible = {
			OR = {
				is_ai = yes
				has_country_flag = counterterror_open
			}
		}

		dynamic_lists = {
			IS_list_of_counterterror_states = {
				array = ct_region_selected
				entry_container = IS_counter_terror_state_support_list
				ai_weights = {
					name_of_ct_state_button_click = {
						ai_will_do = {
							factor = 1

							modifier = {
								add = 25
								var:ct_state_selected = { ROOT = { has_opinion = { target = PREV value  > 25 } } }
							}
							modifier = {
								add = 25
								var:ct_state_selected = { ROOT = { has_opinion = { target = PREV value  > 50 } } }
							}
							modifier = {
								add = 25
								var:ct_state_selected = { ROOT = { has_opinion = { target = PREV value  > 75 } } }
							}

							modifier = {
								add = 10
								var:v = {
									has_country_flag = threat_level_low
								}
							}
							modifier = {
								add = 25
								var:v = {
									has_country_flag = threat_level_moderate
								}
							}
							modifier = {
								add = 50
								var:v = {
									has_country_flag = threat_level_substantial
								}
							}
							modifier = {
								add = 75
								var:v = {
									has_country_flag = threat_level_severe
								}
							}
							modifier = {
								add = 150
								var:v = {
									has_country_flag = threat_level_critical
								}
							}

							modifier = {
								add = -50
								var:ct_state_selected = { ROOT = { has_opinion = { target = PREV value  < 0 } } }
							}

							#Killswitch for having recently selected a nation to do CT advisors with
							modifier = {
								factor = 0
								has_country_flag = ct_nation_sel_delay
							}
						}
					}
				}
			}
		}

		effects = {
			name_of_ct_state_button_click = {
				set_variable = { ct_state_selected = v }
				if = { limit = { is_ai = yes }
					set_country_flag = {
						flag = ct_nation_sel_delay
						days = 180
					}
				}
				update_international_system_gui = yes
			}
		}
	}

	international_counterterror_stats_dynamic_lists = {
		context_type = player_context
		parent_scripted_gui = international_systems_gui
		window_name = "IS_counter_terror_stats_container"

		dirty = global.international_system_refresh_gui

		visible = {
			OR = {
				is_ai = yes
				has_country_flag = counterterror_open
			}
		}

		dynamic_lists = {
			IS_list_of_counterterror_stats = {
				array = ct_region_selected
				entry_container = counter_terror_stat_list
				change_scope = yes
			}
		}
	}
}
