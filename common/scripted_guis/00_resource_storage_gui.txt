scripted_gui = {
	open_storage_window = {
		window_name = "open_storage_gui"
		context_type = player_context
		parent_window_token = trade_tab
		dirty = global.num_days

		effects = {
			open_storage_window_click = {
				if = {
					limit = { NOT = { has_country_flag = open_storage_screen } }
					set_country_flag = open_storage_screen
				}
				else = {
					clr_country_flag = open_storage_screen
				}
			}
		}
	}

	storage_scripted_gui = {
		window_name = "storage_scripted_gui"
		context_type = player_context
		parent_window_token = trade_tab
		dirty = global.storage_scripted_gui_var

		visible = {
			OR = {
				is_ai = yes
				has_country_flag = open_storage_screen
			}
		}


		effects = {
			close_storage_screen_button_click = {
				clr_country_flag = open_storage_screen
			}
			steel_toggle_button_click = {
				if = {
					limit = { has_country_flag = steel_storage_draw }
					clr_country_flag = steel_storage_draw
				} else = {
					set_country_flag = steel_storage_draw
				}
				update_dirty_resource_storage_var = yes
			}
			light_toggle_button_click = {
				if = {
					limit = { has_country_flag = light_storage_draw }
					clr_country_flag = light_storage_draw
				} else = {
					set_country_flag = light_storage_draw
				}
				update_dirty_resource_storage_var = yes
			}
			rubber_toggle_button_click = {
				if = {
					limit = { has_country_flag = rubber_storage_draw }
					clr_country_flag = rubber_storage_draw
				} else = {
					set_country_flag = rubber_storage_draw
				}
				update_dirty_resource_storage_var = yes
			}
			tech_toggle_button_click = {
				if = {
					limit = { has_country_flag = tech_storage_draw }
					clr_country_flag = tech_storage_draw
				} else = {
					set_country_flag = tech_storage_draw
				}
				update_dirty_resource_storage_var = yes
			}
			precious_toggle_button_click = {
				if = {
					limit = { has_country_flag = precious_storage_draw }
					clr_country_flag = precious_storage_draw
				} else = {
					set_country_flag = precious_storage_draw
				}
				update_dirty_resource_storage_var = yes
			}
		}
		#NOTE: NO AI is needed for this system. AI will be baked in as "always on"
		#This will save performance on the AI, as they would always just click it on anyways
		#This lets AI use the system, while also letting players have more control
	}
}
