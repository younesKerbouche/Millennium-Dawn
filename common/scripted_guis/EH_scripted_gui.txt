scripted_gui = {
	EH_drone_scripted_gui = {
		window_name = "EH_drone_scripted_gui_window"
		context_type = decision_category

		visible = {
			ROOT = {
        	    has_completed_focus = EH_investigate_strange_structure
        	    NOT = {
        	        has_country_flag = EH_country_succeeded_in_drone_mission_flag
        	    }
        	}
		}

		effects = {
			EH_increase_drones_button_click = {
				ROOT = {
					add_to_variable = { EH_selected_drones_var = 1 }
					clamp_variable = {
						var = EH_selected_drones_var
						max = 500
					}
					EH_drone_mission_calculations_effect = yes
				}
			}
			EH_increase_drones_button_control_click = {
				ROOT = {
					add_to_variable = { EH_selected_drones_var = 10 }
					clamp_variable = {
						var = EH_selected_drones_var
						max = 500
					}
					EH_drone_mission_calculations_effect = yes
				}
			}
			EH_increase_drones_button_shift_click = {
				ROOT = {
					add_to_variable = { EH_selected_drones_var = 100 }
					clamp_variable = {
						var = EH_selected_drones_var
						max = 500
					}
					EH_drone_mission_calculations_effect = yes
				}
			}

			EH_decrease_drones_button_click = {
				ROOT = {
					subtract_from_variable = { EH_selected_drones_var = 1 }
					clamp_variable = {
						var = EH_selected_drones_var
						min = 100
					}
					EH_drone_mission_calculations_effect = yes
				}
			}
			EH_decrease_drones_button_control_click = {
				ROOT = {
					subtract_from_variable = { EH_selected_drones_var = 10 }
					clamp_variable = {
						var = EH_selected_drones_var
						min = 100
					}
					EH_drone_mission_calculations_effect = yes
				}
			}
			EH_decrease_drones_button_shift_click = {
				ROOT = {
					subtract_from_variable = { EH_selected_drones_var = 100 }
					clamp_variable = {
						var = EH_selected_drones_var
						min = 100
					}
					EH_drone_mission_calculations_effect = yes
				}
			}

			EH_launch_mission_button_click = {
				ROOT = {
					EH_drone_mission_effect = yes
				}
			}
        }

		triggers = {
			EH_increase_drones_button_click_enabled = {
				ROOT = {
					check_variable = { EH_selected_drones_var < 501 }
				}
			}

			EH_decrease_drones_button_click_enabled = {
				ROOT = {
					check_variable = { EH_selected_drones_var > 99 }
				}
			}

			EH_launch_mission_button_click_enabled = {
				ROOT = {
					has_deployed_air_force_size = {
    					size > EH_selected_drones_var
    					type = suicide
					}
				}
			}
		}

		ai_enabled = {
			always = yes
		}

		ai_weights = {
			EH_increase_drones_button_shift_click = {
				ai_will_do = {
					base = 100

					modifier = {
						factor = 0
						has_deployed_air_force_size = {
    						size < EH_selected_drones_var
    						type = suicide
						}
					}
				}
			}

			EH_launch_mission_button_click = { # AI takes low risk here, cuz it's stupid in equipment production so let's not make them waste all drones
				ai_will_do = {
					base = 0

					modifier = {
						add = 10
						check_variable = { EH_selected_drones_var > 299 }
					}
					modifier = {
						add = 50
						check_variable = { EH_selected_drones_var > 499 }
					}
					modifier = {
						add = 40
						check_variable = { air_intel@ALN > 50 }
					}
					modifier = {
						factor = 0
						check_variable = { air_intel@ALN < 35 }
					}
				}
			}
		}
	}

	EH_research_sites_scripted_gui = {
		window_name = "EH_research_sites_scripted_gui_window"
		context_type = decision_category

		visible = {
			ROOT = {
			    has_country_flag = EH_research_sites_enabled
			}
		}

		effects = {
			EH_hire_Jennifer_Doudna_button_click = {
				add_ideas = EH_scientist_jennifer_doudna_idea
				set_country_flag = EH_hired_jennifer_doudna_flag
				if = {
					limit = {
						has_active_mission = EH_doudna_or_charpentier_project_mission
					}
					add_days_mission_timeout = {
						mission = EH_doudna_or_charpentier_project_mission
						days = -50
					}
				}
				else = {
					activate_mission = EH_doudna_or_charpentier_project_mission
				}
			}
			EH_hire_Fabiola_Gianotti_button_click = {
				add_ideas = EH_scientist_fabiola_gianotti_idea
				set_country_flag = EH_hired_fabiola_gianotti_flag
				newline = yes
				custom_effect_tooltip = EH_fabiola_gianotti_special_effect_tt
			}
			EH_hire_Lene_Hau_button_click = {
				add_ideas = EH_scientist_lene_hau_idea
				set_country_flag = EH_hired_lene_hau_flag
				newline = yes
				custom_effect_tooltip = EH_lene_hau_special_effect_tt
			}
			EH_hire_Emmanuelle_Charpentier_button_click = {
				add_ideas = EH_scientist_emmanuelle_charpentier_idea
				set_country_flag = EH_hired_emmanuelle_charpentier_flag
				if = {
					limit = {
						has_active_mission = EH_doudna_or_charpentier_project_mission
					}
					add_days_mission_timeout = {
						mission = EH_doudna_or_charpentier_project_mission
						days = -50
					}
				}
				else = {
					activate_mission = EH_doudna_or_charpentier_project_mission
				}
			}
			EH_hire_Andrzej_Trautman_button_click = {
				add_ideas = EH_scientist_andrzej_trautman_idea
				set_country_flag = EH_hired_andrzej_trautman_flag
				newline = yes
				custom_effect_tooltip = EH_andrzej_trautman_special_effect_tt
			}
		}

		triggers = {
			EH_scientist_Jennifer_Doudna_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 0 }
				}
				hidden_trigger = {
					has_country_flag = EH_hired_jennifer_doudna_flag
				}
				ALN = {
					casualties_inflicted_by = {
						opponent = ROOT
						thousands > 10
					}
				}
			}
			EH_hire_Jennifer_Doudna_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 0 }
				}
				NOT = {
					has_country_flag = EH_hired_jennifer_doudna_flag
				}
				ALN = {
					casualties_inflicted_by = {
						opponent = ROOT
						thousands > 10
					}
				}
			}

			EH_scientist_Fabiola_Gianotti_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 1 }
				}
				hidden_trigger = {
					has_country_flag = EH_hired_fabiola_gianotti_flag
				}
				has_completed_focus = EH_find_new_veins
			}
			EH_hire_Fabiola_Gianotti_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 1 }
				}
				NOT = {
					has_country_flag = EH_hired_fabiola_gianotti_flag
				}
				has_completed_focus = EH_find_new_veins
			}

			EH_scientist_Lene_Hau_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 2 }
				}
				hidden_trigger = {
					has_country_flag = EH_hired_lene_hau_flag
				}
				is_special_project_completed = sp:sp_monitor_portal_energy_emissions_project
			}
			EH_hire_Lene_Hau_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 2 }
				}
				NOT = {
					has_country_flag = EH_hired_lene_hau_flag
				}
				is_special_project_completed = sp:sp_monitor_portal_energy_emissions_project
			}

			EH_scientist_Emmanuelle_Charpentier_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 3 }
				}
				hidden_trigger = {
					has_country_flag = EH_hired_emmanuelle_charpentier_flag
				}
				ALN = {
					casualties_inflicted_by = {
						opponent = ROOT
						thousands > 10
					}
				}
			}
			EH_hire_Emmanuelle_Charpentier_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 3 }
				}
				NOT = {
					has_country_flag = EH_hired_emmanuelle_charpentier_flag
				}
				ALN = {
					casualties_inflicted_by = {
						opponent = ROOT
						thousands > 10
					}
				}
			}

			EH_scientist_Andrzej_Trautman_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 4 }
				}
				hidden_trigger = {
					has_country_flag = EH_hired_andrzej_trautman_flag
				}
				has_country_flag = EH_country_succeeded_in_drone_mission_flag
			}
			EH_hire_Andrzej_Trautman_button_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = EH_scientist_is_alive_tt
					is_in_array = { EH_scientists_array = 4 }
				}
				NOT = {
					has_country_flag = EH_hired_andrzej_trautman_flag
				}
				has_country_flag = EH_country_succeeded_in_drone_mission_flag
			}
		}
	}

	EH_open_randallite_scripted_gui = {
		window_name = "EH_open_randallite_tab_gui_window"
		context_type = player_context
		parent_window_token = production_tab

		visible = {
			# ROOT = {
			#     has_completed_focus = EH_a_new_resource
			# }
			always = yes
		}

		effects = {
			EH_open_randallite_tab_button_click = {
				if = {
					limit = {
						has_country_flag = EH_randallite_tab_open_flag
					}
					clr_country_flag = EH_randallite_tab_open_flag
				}
				else = {
					set_country_flag = EH_randallite_tab_open_flag
				}
			}
		}
	}

	EH_randallite_scripted_gui = {
		window_name = "EH_randallite_scripted_gui_window"
		context_type = player_context
		parent_window_token = production_tab

		visible = {
			ROOT = {
			    has_country_flag = EH_randallite_tab_open_flag
			}
		}

		properties = {
			EH_mech_production_progress_bar_1 = { frame = THIS.EH_mech_production_progress_1 }
			EH_mech_production_progress_bar_2 = { frame = THIS.EH_mech_production_progress_2 }
			EH_mech_production_progress_bar_3 = { frame = THIS.EH_mech_production_progress_3 }
			EH_mech_production_progress_bar_4 = { frame = THIS.EH_mech_production_progress_4 }
			EH_mech_production_progress_bar_5 = { frame = THIS.EH_mech_production_progress_5 }
		}

		effects = {
			EH_mech_production_start_factory_1_click = {
				ROOT = { EH_start_mech_production_factory_1_effect = yes }
			}
			EH_mech_production_start_factory_2_click = {
				ROOT = { EH_start_mech_production_factory_2_effect = yes }
			}
			EH_mech_production_start_factory_3_click = {
				ROOT = { EH_start_mech_production_factory_3_effect = yes }
			}
			EH_mech_production_start_factory_4_click = {
				ROOT = { EH_start_mech_production_factory_4_effect = yes }
			}
			EH_mech_production_start_factory_5_click = {
				ROOT = { EH_start_mech_production_factory_5_effect = yes }
			}

			EH_select_mech_1_click = {
				set_country_flag = EH_mech_selected_flag
				set_country_flag = EH_mech_1_selected_flag
				set_variable = { EH_mech_production_cost_var = 5 }
			}

			EH_increase_mechs_button_click = {
				ROOT = {
					add_to_variable = { EH_selected_mechs_var = 1 }
					clamp_variable = {
						var = EH_selected_mechs_var
						max = 999
					}
				}
			}
			EH_increase_mechs_button_control_click = {
				ROOT = {
					add_to_variable = { EH_selected_mechs_var = 10 }
					clamp_variable = {
						var = EH_selected_mechs_var
						max = 999
					}
				}
			}
			EH_increase_mechs_button_shift_click = {
				ROOT = {
					add_to_variable = { EH_selected_mechs_var = 100 }
					clamp_variable = {
						var = EH_selected_mechs_var
						max = 999
					}
				}
			}

			EH_decrease_mechs_button_click = {
				ROOT = {
					subtract_from_variable = { EH_selected_mechs_var = 1 }
					clamp_variable = {
						var = EH_selected_mechs_var
						min = 0
					}
				}
			}
			EH_decrease_mechs_button_control_click = {
				ROOT = {
					subtract_from_variable = { EH_selected_mechs_var = 10 }
					clamp_variable = {
						var = EH_selected_mechs_var
						min = 0
					}
				}
			}
			EH_decrease_mechs_button_shift_click = {
				ROOT = {
					subtract_from_variable = { EH_selected_mechs_var = 100 }
					clamp_variable = {
						var = EH_selected_mechs_var
						min = 0
					}
				}
			}
		}

		triggers = {
			EH_mech_production_start_factory_1_visible = {
				ROOT = { NOT = { has_country_flag = EH_mech_production_1_in_progress_flag } }
			}
			EH_mech_production_start_factory_2_visible = {
				ROOT = { NOT = { has_country_flag = EH_mech_production_2_in_progress_flag } }
			}
			EH_mech_production_start_factory_3_visible = {
				ROOT = { NOT = { has_country_flag = EH_mech_production_3_in_progress_flag } }
			}
			EH_mech_production_start_factory_4_visible = {
				ROOT = { NOT = { has_country_flag = EH_mech_production_4_in_progress_flag } }
			}
			EH_mech_production_start_factory_5_visible = {
				ROOT = { NOT = { has_country_flag = EH_mech_production_5_in_progress_flag } }
			}

			EH_mech_production_start_factory_1_click_enabled = {
				EH_mech_production_available_trigger = yes
			}
			EH_mech_production_start_factory_2_click_enabled = {
				EH_mech_production_available_trigger = yes
			}
			EH_mech_production_start_factory_3_click_enabled = {
				EH_mech_production_available_trigger = yes
			}
			EH_mech_production_start_factory_4_click_enabled = {
				EH_mech_production_available_trigger = yes
			}
			EH_mech_production_start_factory_5_click_enabled = {
				EH_mech_production_available_trigger = yes
			}

			EH_mech_production_start_cancel_1_visible = {
				ROOT = { has_country_flag = EH_mech_production_1_in_progress_flag }
			}
			EH_mech_production_start_cancel_2_visible = {
				ROOT = { has_country_flag = EH_mech_production_2_in_progress_flag }
			}
			EH_mech_production_start_cancel_3_visible = {
				ROOT = { has_country_flag = EH_mech_production_3_in_progress_flag }
			}
			EH_mech_production_start_cancel_4_visible = {
				ROOT = { has_country_flag = EH_mech_production_4_in_progress_flag }
			}
			EH_mech_production_start_cancel_5_visible = {
				ROOT = { has_country_flag = EH_mech_production_5_in_progress_flag }
			}

			EH_select_mech_1_click_enabled = {
				OR = {
					is_special_project_completed = sp:sp_bf_38_atlas_project
					is_special_project_completed = sp:sp_gsk_41_bogatyr_project
				}
				hidden_trigger = {
					NOT = {
						has_country_flag = EH_mech_1_selected_flag
					}
				}
			}
		}
	}
}