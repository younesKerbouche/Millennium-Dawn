#category = short_term medium_term or long_term

faction_goal_resource_control = {
	name = resource_control_goal_name
	description = resource_control_goal_desc
	category = long_term
	group = resources_to_market_icon
	visible = {

	}
	available = {
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = oil
			amount < 500
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = rubber
			amount < 200
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = aluminium
			amount < 200
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = chromium
			amount < 200
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = tungsten
			amount < 200
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
	}
	completed = {
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = oil
			amount > 499
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = rubber
			amount > 199
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = aluminium
			amount > 199
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = chromium
			amount > 199
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}
		has_resources_in_collection = {
			collection = {
				input = game:scope
				operators =  { faction_members }
				name = FACTION
			}
			resource = tungsten
			amount > 199
			extracted = yes # (optional, default: no) checks extracted amount instead of country balance
		}


	}
	complete_effect = {
		add_faction_power_projection = 500
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = THE_FACTION_LEADER
		add_faction_initiative = 1
		custom_effect_tooltip = generic_skip_one_line_tt
		every_faction_member = {
			tooltip = INFLUENCE_TOP_THREE
			visible_when_empty = yes
			limit = {
				faction_influence_rank < 4
			}
			add_political_power = 100
		}
	}
	ai_will_do = {
		base = 1
	}
}

faction_goal_eastern_european_security = {
	name = eastern_european_security_goal_name
	description = eastern_european_security_goal_desc
	category = long_term
	group = FOCUS_FILTER_POLITICAL_CHARACTER
	allowed = {
		tag = SOV
	}
	completed = {
		count_triggers = {
				amount = 6

			POL = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			ROM = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			HUN = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			CZE = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			BUL = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			GRE = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			SER = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			TUR = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			SLV = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			CRO = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			BOS = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			KOS = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			ALB = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			FYR = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			MLV = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			PMR = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
			SLO = {
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
		}
	}
	complete_effect = {
		add_faction_power_projection = 1000
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = INFLUENCE_ABOVE_30_PERCENT
		every_faction_member = {
			limit = { faction_influence_ratio > 0.3}
			add_political_power = 200
			add_faction_initiative = 1
		}
	}
	ai_will_do = {
		base = 0
		modifier = {
			add = 1
			date > 1938.1.1
		}
		modifier = {
			add = 9 # SOV should always prio this
			date > 1938.1.1
			original_tag = SOV
		}
	}
}

### Units/Deployment

# faction_goal_rule_the_waves = {
# 	name = rule_the_waves_goal_name
# 	description = rule_the_waves_goal_desc
# 	category = long_term
# 	group = FOCUS_FILTER_NAVY_XP
# 	visible = {
# 		OR = {
# 			original_tag = ENG # Britannia always wants to Rule!
# 			num_of_naval_factories > 19
# 		}
# 	}
# 	available = {
# 		OR = {
# 			NOT = { has_government = democratic }
# 			NOT = { has_idea = MTG_naval_treaty_adherent }
# 		}
# 	}
# 	completed = {
# 		has_war = yes
# 		count_in_collection = {
# 			collection = {
# 				input = game:scope
# 				operators = { faction_members }
# 				name = FACTION
# 			}
# 			unit = capital_ship
# 			size > 59
# 		}
# 		alliance_naval_strength_ratio > 2
# 	}
# 	complete_effect = {
# 		add_faction_power_projection = 300
# 		custom_effect_tooltip = generic_skip_one_line_tt
# 		custom_effect_tooltip = INFLUENCE_TOP_TWO
# 		every_faction_member = {
# 			limit = { faction_influence_rank < 3}
# 			add_faction_initiative = 1

# 		}
# 		custom_effect_tooltip = ALL_FACTION_MEMBERS
# 		every_faction_member = {
# 			random_character = {
# 				tooltip = ONE_ADMIRAL
# 				visible_when_empty = yes
# 				limit = {
# 					is_navy_leader = yes
# 					NOT = { has_trait = seawolf }
# 					NOT = { has_trait = battleship_adherent }
# 				}
# 				gain_xp = 400
# 				add_coordination = 1
# 				add_trait = { trait = battleship_adherent }
# 			}
# 			add_mastery = {
# 				amount = 100
# 				track = capital_ships
# 			}
# 			add_tech_bonus = {
# 				name = rule_the_waves_tech_bonus
# 				bonus = 1
# 				uses = 1
# 				category = CAT_naval_all
# 			}
# 		}
# 	}
# 	ai_will_do = {
# 		base = 0
# 		modifier = {
# 			add = 1 # Don't bother unless you're somewhat likely to be able to do it
# 			count_in_collection = {
# 				collection = {
# 					input = game:scope
# 					operators = { faction_members }
# 					name = FACTION
# 				}
# 				unit = capital_ship
# 				size > 19
# 			}
# 			alliance_naval_strength_ratio > 0.6
# 		}
# 		modifier = {
# 			add = 1 # If you got a bunch of dockyards odds of succeeding go up + indication nation is gunning for navy
# 			num_of_naval_factories > 59
# 		}
# 		modifier = {
# 			add = 10 # These boys always want to give it a shot
# 			OR = {
# 				original_tag = ENG
# 				original_tag = USA
# 				original_tag = JAP
# 			}
# 			is_historical_focus_on = yes
# 		}
# 	}
# }

faction_goal_strategic_bombing_campaign = {
	name = strategic_bombing_campaign_goal_name
	description = strategic_bombing_campaign_goal_desc
	category = long_term
	group = FOCUS_FILTER_AIR_XP
	available = {
		OR = {
			count_in_collection = {
				collection = {
					input = game:scope
					operators = { faction_members }
					name = FACTION
				}
				unit = strategic_bomber
				size < 200
			}
			collection_size = {
				input = {
					input = game:all_states
					operators = {
						limit = {
							owner = {
								has_war_with = root
							}
							is_core_of = OWNER
							days_since_last_strategic_bombing < 30
						}
					}
					name = ENEMY_FACTION_STATES_BOMBED
				}
				value < 3
			}
		}
	}
	completed = {
		count_in_collection = {
			collection = {
				input = game:scope
				operators = { faction_members }
				name = FACTION
			}
			unit = strategic_bomber
			size > 199
		}
		collection_size = {
			input = {
				input = game:all_states
				operators = {
					limit = {
						owner = {
							has_war_with = root
						}
						is_core_of = OWNER
						days_since_last_strategic_bombing < 30
					}
				}
				name = ENEMY_FACTION_STATES_BOMBED
			}
			value > 2
		}
	}
	complete_effect = {
		add_faction_power_projection = 100
		custom_effect_tooltip = generic_skip_one_line_tt
		every_collection_element = {
			input = {
				input = game:scope
				operators = {
					faction_members
					limit = {
						has_army_size = {
							size > 49
							type = strategic_bomber
						}
					}
				}
				name = ALL_FACTION_MEMBERS_WITH_50_BOMBERS
			}
			add_faction_initiative = 1
			add_war_support = 0.1
			air_experience = 50
			add_mastery = {
				amount = 100
				track = heavy_aircraft
			}
		}
	}
	ai_will_do = {
		base = 0
		modifier = {
			add = 1 # Powers with few military factories should probably not care about expensive bombers
			num_of_military_factories > 49
		}
		modifier = {
			add = 1 # Factions with decent number of military factories should probably start caring more about strat bombing - because they can
			count_in_collection = {
				collection = {
					input = game:scope
					operators = { faction_members }
					name = FACTION_NAME
				}
				buildings = { arms_factory }
				size > 149
			}
		}
	}
}


### War Waging

faction_goal_liberate_territory = {
	name = liberate_territory_goal_name
	description = liberate_territory_goal_desc
	category = long_term
	group = FOCUS_FILTER_ANNEXATION
	visible = {
		collection_size = {
			input = {
				input = collection:faction_owned_core_states
				operators = {
					limit = {
						NOT = { is_fully_controlled_by = OWNER }
					}
				}
				name = FACTION_CORE_STATES_NOT_FULLY_CONTROLLED
			}
			value > 0
		}
	}
	completed = {
		collection_size = {
			input = {
				input = collection:faction_owned_core_states
				operators = {
					limit = {
						NOT = { is_fully_controlled_by = OWNER }
					}
				}
				name = FACTION_CORE_STATES_NOT_FULLY_CONTROLLED
			}
			value < 1
		}
	}
	complete_effect = {
		add_faction_power_projection = 100
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = THE_FACTION_LEADER
		add_faction_initiative = 1
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_stability = 0.1
		}
	}
	ai_will_do = {
		base = 1
		modifier = {
			add = 4 # If lots of territory, prioritize this
			collection_size = {
				input = {
					input = collection:faction_owned_core_states
					operators = {
						limit = {
							NOT = { is_fully_controlled_by = OWNER }
						}
					}
					name = FACTION_CORE_STATES_NOT_FULLY_CONTROLLED
				}
				value > 4
			}
		}
		modifier = {
			add = 5 # If even more territory, prioritize this A LOT
			collection_size = {
				input = {
					input = collection:faction_owned_core_states
					operators = {
						limit = {
							NOT = { is_fully_controlled_by = OWNER }
						}
					}
					name = FACTION_CORE_STATES_NOT_FULLY_CONTROLLED
				}
				value > 10
			}
		}
	}
}

faction_goal_great_offensive = {
	name = great_offensive_goal_name
	description = great_offensive_goal_desc
	category = long_term
	group = FOCUS_FILTER_ANNEXATION
	visible = {
		has_war = yes
		collection_size = {
			input = {
				input = game:all_states
				operators = {
					limit = {
						owner = {
							has_war_with = ROOT
						}
						is_core_of = OWNER
						is_controlled_by_ROOT_or_ally = yes
					}
				}
				name = ENEMY_FACTION_CORE_STATES_CONTROLLED_BY_US
			}
			value < 1
		}
	}
	completed = {
		collection_size = {
			input = {
				input = game:all_states
				operators = {
					limit = {
						owner = {
							has_war_with = ROOT
						}
						is_core_of = OWNER
						is_controlled_by_ROOT_or_ally = yes
					}
				}
				name = ENEMY_FACTION_CORE_STATES_CONTROLLED_BY_US
			}
			value > 0
		}
	}
	complete_effect = {
		add_faction_power_projection = 100
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_war_support = 0.1
		}
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = TARGET_STATE_CONTROLLERS
		every_faction_member = {
			visible_when_empty = yes
			limit = {
				any_controlled_state = {
					owner = {
						has_war_with = ROOT
					}
					is_core_of = OWNER
				}
			}
			add_faction_initiative = 1
		}
	}
	ai_will_do = {
		base = 0
		modifier = {
			add = 1 # If healthy equipment stockpiles, go for it
			stockpile_ratio = {
				archetype = Inf_equipment
				ratio > 1
			}
			stockpile_ratio = {
				archetype = artillery_equipment
				ratio > 1
			}
		}
		modifier = {
			add = 1 # If we're in a secure position we can probably push
			collection_size = {
				input = {
					input = collection:faction_owned_core_states
					operators = {
						limit = {
							NOT = { is_fully_controlled_by = OWNER }
						}
					}
					name = FACTION_CORE_STATES_NOT_FULLY_CONTROLLED
				}
				value < 1
			}
		}
	}
}

faction_goal_defeating_our_enemies = {
	name = defeating_our_enemies_goal_name
	description = defeating_our_enemies_goal_desc
	category = long_term
	group = FOCUS_FILTER_ANNEXATION
	visible = {
		NOT = { has_country_flag = peace_winner_flag }
	}
	completed = {
		custom_trigger_tooltip = {
			tooltip = is_victor_in_pc_tt
			ROOT = { has_country_flag = peace_winner_flag }
		}

	}
	complete_effect = {
		add_faction_power_projection = 200
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_war_support = 0.1
		}
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = PEACE_CONFERENCE_WINNERS
		every_faction_member = {
			visible_when_empty = yes
			limit = {
				has_country_flag = peace_winner_flag
			}
			add_faction_initiative = 1
		}
	}
}
### Tech

### Ideology based

# Defeat of Communism
faction_goal_defeat_of_communism = {
	name = defeat_of_communism_goal_name
	description = defeat_of_communism_goal_desc
	category = long_term
	group = FOCUS_FILTER_CONSOLIDATION
	visible = {
		collection_size = {
			input = {
				input = game:scope
				operators = {
					faction_members
					limit = {
						has_government = communism
					}
				}
				name = FACTION
			}
			value < 1
		}
	}
	available = {
		collection_size = {
			input = {
				input = collection:communist_controlled_states_my_continent
				name = COLLECTION_AMOUNT_OF_COMMUNIST_CONTROLLED_STATES_SAME_CONTINENT
			}
			value > 0
		}
	}
	completed = {
		collection_size = {
			input = {
				input = collection:communist_controlled_states_my_continent
				name = COLLECTION_AMOUNT_OF_COMMUNIST_CONTROLLED_STATES_SAME_CONTINENT
			}
			value < 1
		}

	}
	complete_effect = {
		add_faction_power_projection = 500
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = THE_FACTION_LEADER
		add_faction_initiative = 1
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_popularity = {
				ideology = communism
				popularity = -0.15
			}
			add_political_power = 100
		}
	}
}

# Defeat of Fascism
faction_goal_defeat_of_fascism = {
	name = defeat_of_fascism_goal_name
	description = defeat_of_fascism_goal_desc
	category = long_term
	group = FOCUS_FILTER_CONSOLIDATION
	visible = {
		collection_size = {
			input = {
				input = game:scope
				operators = {
					faction_members
					limit = {
						has_government = fascism
					}
				}
				name = FACTION
			}
			value < 1
		}
	}
	available = {
		collection_size = {
			input = {
				input = collection:fascist_controlled_states_my_continent
				name = COLLECTION_AMOUNT_OF_FASCIST_CONTROLLED_STATES_SAME_CONTINENT
			}
			value > 0
		}
	}
	completed = {
		collection_size = {
			input = {
				input = collection:fascist_controlled_states_my_continent
				name = COLLECTION_AMOUNT_OF_FASCIST_CONTROLLED_STATES_SAME_CONTINENT
			}
			value < 1
		}

	}
	complete_effect = {
		add_faction_power_projection = 500
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = THE_FACTION_LEADER
		add_faction_initiative = 1
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_popularity = {
				ideology = fascism
				popularity = -0.15
			}
			add_political_power = 100
		}
	}
}

# Defeat of Anti-communists
faction_goal_defeat_of_anti_communists = {
	name = defeat_of_anti_communists_goal_name
	description = defeat_of_anti_communists_goal_desc
	category = long_term
	group = FOCUS_FILTER_INTERNAL_CONSOLIDATION
	visible = {
		collection_size = {
			input = {
				input = game:scope
				operators = {
					faction_members
					limit = {
						OR = {
							has_government = fascism
							has_government = democratic
						}
					}
				}
				name = FACTION
			}
			value < 1
		}
	}
	available = {
		collection_size = {
			input = {
				input = collection:anti_communist_controlled_states_my_continent
				name = COLLECTION_AMOUNT_OF_ANTI_COMMUNIST_CONTROLLED_STATES_SAME_CONTINENT
			}
			value > 0
		}
	}
	completed = {
		collection_size = {
			input = {
				input = collection:anti_communist_controlled_states_my_continent
				name = COLLECTION_AMOUNT_OF_ANTI_COMMUNIST_CONTROLLED_STATES_SAME_CONTINENT
			}
			value < 1
		}

	}
	complete_effect = {
		add_faction_power_projection = 500
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = THE_FACTION_LEADER
		add_faction_initiative = 1
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
			add_political_power = 100
		}
	}
	ai_will_do = {
		base = 0
		modifier = {
			add = 1 # If war with communists you probably hate them
			any_enemy_country = {
				has_government = communism
			}
		}
	}
}

faction_goal_long_live_the_revolution = {
	name = long_live_the_revolution
	description = long_live_the_revolution_desc
	category = long_term
	group = FOCUS_FILTER_INTERNAL_CONSOLIDATION
	visible = {
		has_faction_template = faction_template_pol_rep
	}
	completed = {
		collection_size = {
			input = {
				input = game:scope
				operators = {
					faction_members
					limit = {
						communism > 0.75
					}
				}
				name = FACTION_MEMBERS_ABOVE_75_COMMUNISM
			}
			value > 19
		}
	}
	complete_effect = {
		add_faction_power_projection = 200
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = THE_FACTION_LEADER
		add_faction_initiative = 1
		custom_effect_tooltip = generic_skip_one_line_tt
		custom_effect_tooltip = ALL_FACTION_MEMBERS
		every_faction_member = {
			add_ideas = POL_long_live_the_revolution_idea
		}
	}
	ai_will_do = {
		base = 5
		modifier = { # Don't force when at war
			add = -4
			has_war = yes
		}
	}
}