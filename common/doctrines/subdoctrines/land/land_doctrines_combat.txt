#Operational Doctrines
#Structure Doctrines
centralized_command = {
	track = structure_doctrine
    name = SUBDOCTRINE_STRUCTURE_CENTRAL_COMMAND
    description = SUBDOCTRINE_STRUCTURE_CENTRAL_COMMAND_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	max_planning = 0.05
	planning_speed = 0.10

    rewards = {
        division_structure = {
			additional_brigade_column_size = 2
	 		category_army = {
	 			soft_attack = 0.05
	 			hard_attack = 0.025
	 			breakthrough = 0.05
	 			defense = 0.025
	 		}
        }
		high_level_command_initiative = {
			planning_speed = 0.10
	 		max_planning_factor = 0.10
	 		coordination_bonus = 0.15
        }
        company_level_maneuver = {
			org_loss_when_moving = -0.05
 			army_attack_factor = 0.10
        }
        expanded_battalion_maneuver = {
			combat_width_factor = -0.25
        }
		central_command_planning = {
			max_planning_factor = 0.05
			planning_decay_rate_factor = -0.25
		}
    }
}

decentralized_command = {
	track = structure_doctrine
    name = SUBDOCTRINE_STRUCTURE_DECENTRAL_COMMAND
    description = SUBDOCTRINE_STRUCTURE_DECENTRAL_COMMAND_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	planning_speed = 0.05
	initiative_factor = 0.1

    rewards = {
        brigade_structure = {
			category_army = {
	 			max_organisation = 3
	 			soft_attack = 0.25
	 			hard_attack = 0.15
	 			breakthrough = 0.20
	 			defense = 0.25
	 		}
			additional_brigade_column_size = 1
 			coordination_bonus = 0.10
        }
		mid_level_command_initiative = {
			initiative_factor = 0.05
 			max_planning_factor = 0.05
 			coordination_bonus = 0.10
        }
        company_level_maneuver = {
			org_loss_when_moving = -0.05
 			army_attack_factor = 0.10
        }
        armored_formations = {
			army_armor_attack_factor = 0.15
			experience_gain_armor_Bat_combat_factor = 0.25
			experience_gain_L_arm_Bat_combat_factor = 0.25
        }
		dispersed_level_planning = {
			max_planning_factor = 0.025
			planning_speed = 0.025
			planning_decay_rate_factor = -0.15
		}
    }
}

battalion_combat_teams = {
	track = structure_doctrine
    name = SUBDOCTRINE_STRUCTURE_BCT
    description = SUBDOCTRINE_STRUCTURE_BCT_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	max_planning_factor = -0.1
	planning_speed = 0.1
	initiative_factor = 0.15

    rewards = {
         battalion_structure = {
			category_army = {
	 			max_organisation = 3
	 			soft_attack = 0.25
	 			hard_attack = 0.15
	 			breakthrough = 0.20
	 			defense = 0.25
	 		}
 			coordination_bonus = 0.10
        }
		low_level_command_initiative = {
			initiative_factor = 0.15
 			recon_factor = 0.15
 			coordination_bonus = 0.05
        }
        platoon_level_maneuver = {
			coordination_bonus = 0.10
 			army_attack_factor = 0.05
        }
        combined_arms_formations = {
			mechanized_attack_factor = 0.15
 			experience_gain_Mech_Inf_Bat_combat_factor = 0.25
 			experience_gain_Arm_Inf_Bat_combat_factor = 0.25
        }
		company_level_planning = {
			initiative_factor = 0.1
			planning_speed = 0.05
			planning_decay_rate_factor = -0.05
		}
    }
}
#Logistics Doctrines
decentralized_supply_theory = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_DECENTRALIZED_SUPPLY
    description = SUBDOCTRINE_OPERATION_DECENTRALIZED_SUPPLY_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
		NOT = { has_country_flag = has_supply_doctrine }
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	no_supply_grace = 120
 	army_fuel_capacity_factor = 0.05
	effect = {
		set_country_flag = has_supply_doctrine
	}

    rewards = {
        dispersed_supply_depots = {
			out_of_supply_factor = -0.05
        }
        combat_supply_theory = {
			supply_consumption_factor = -0.05
        }
        decentralized_maintenance = {
			category_front_line = {
				reliability_factor = 0.02
			}
        }
        unit_level_supply = {
			army_fuel_capacity_factor = 0.15
	 		max_fuel_factor = -0.10
        }
		permit_scavenging = {
			equipment_capture_factor = 0.10
		}
    }
}

centralized_supply_theory = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_CENTRALIZED_SUPPLY
    description = SUBDOCTRINE_OPERATION_CENTRALIZED_SUPPLY_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = has_supply_doctrine }
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	no_supply_grace = 96
	army_fuel_capacity_factor = 0.10

	effect = {
		set_country_flag = has_supply_doctrine
	}

    rewards = {
        concentrated_supply_depots = {
			army_fuel_capacity_factor = 0.15
        }
        combat_supply_theory = {
			supply_consumption_factor = -0.05
        }
        centralized_maintenance = {
			combat_service_support_company = {
				recovery = 0.15
			}
			helicopter_combat_service_support = {
				recovery = 0.15
			}
        }
        joint_supply_theory = {
			army_fuel_capacity_factor = -0.10
	 		max_fuel_factor = 0.15
        }
		discourage_scavenging = {
			equipment_capture_factor = -0.10
	 		no_supply_grace = 96
		}
    }
}

scavenging_supply_theory = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_SCAVENGING_SUPPLY
    description = SUBDOCTRINE_OPERATION_SCAVENGING_SUPPLY_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = has_supply_doctrine }
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	no_supply_grace = 128

	effect = {
		set_country_flag = has_supply_doctrine
	}

    rewards = {
        battlefield_recovery_efforts = {
			combat_service_support_company = {
				recovery = 0.25
			}
			helicopter_combat_service_support = {
				recovery = 0.25
			}
        }
        equipment_capture_training = {
			combat_service_support_company = {
				equipment_capture_factor = 0.15
			}
			helicopter_combat_service_support = {
				equipment_capture_factor = 0.15
			}
        }
        isolated_supply_missions = {
			pocket_penalty = -0.25
        }
        low_supply_needs = {
			supply_consumption_factor = -0.15
        }
		with_sticks_and_stones = {
			out_of_supply_factor = -0.15
		}
    }
}
#COIN / Volunteer Doctrines
volunteer_fighting_force = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_VOLUNTEER
    description = SUBDOCTRINE_OPERATION_VOLUNTEER_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = volunteer_fighting_force }
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	send_volunteer_divisions_required = -0.5

	effect = {
		set_country_flag = volunteer_fighting_force
	}

    rewards = {
        shield_the_innocent = {
			army_attack_factor = 0.025
			army_defence_factor = 0.05
        }
        expanded_allied_missions = {
			lend_lease_tension = -0.5
        }
        peace_through_firepower = {
			send_volunteer_size = 4
			air_volunteer_cap = 2
        }
        limited_air_support = {
			air_volunteer_cap = 2
        }
		special_forces_advisors = {
			air_volunteer_cap = 2
			send_volunteer_size = 4
		}
    }
}
#Offensive Doctrines
deep_battle = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_DEEP_BATTLE
    description = SUBDOCTRINE_OPERATION_DEEP_BATTLE_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = deep_battle }
    }

    ai_will_do = {
        base = 1
    }

	effect = {
		set_country_flag = deep_battle
	}
    # EFFECTS
	enable_tactic = tactic_deep_battle_push
 	enable_tactic = tactic_deep_battle_assault
 	enable_tactic = tactic_deep_battle_encirclement

 	no_supply_grace = 196
 	org_loss_when_moving = -0.05

    rewards = {
        massed_force_assaults = {
			army_armor_attack_factor = 0.05
 			army_armor_speed_factor = 0.05
			army_strength_factor = 0.15
        }
        probing_attacks = {
			recon_factor = 0.10
        }
        recon_in_force = {
			intel_from_combat_factor = 0.15
        }
        offensive_fires = {
			breakthrough_factor = 0.025
        }
		massed_penetration_missions = {
			breakthrough_factor = 0.05
			army_attack_factor = 0.1
		}
    }
}

thunder_run = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_THUNDER_RUN
    description = SUBDOCTRINE_OPERATION_THUNDER_RUN_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = thunder_run }
    }

    ai_will_do = {
        base = 1
    }

	effect = {
		set_country_flag = thunder_run
	}
    # EFFECTS
	enable_tactic = tactic_thunder_run_breakthrough

 	org_loss_when_moving = -0.15
	army_fuel_consumption_factor = -0.15

    rewards = {
        rapid_attacks = {
			army_speed_factor = 0.075
	 		land_night_attack = 0.05

	 		enable_tactic = tactic_thunder_run
	 		enable_tactic = tactic_thunder_run_push
	 		enable_tactic = tactic_thunder_run_maneuver
        }
        probing_attacks = {
			initiative_factor = 0.10
        }
        force_reconassiance = {
			recon_factor = 0.15
        }
        offensive_fires = {
			breakthrough_factor = 0.025
        }
		rapid_maneuver_force = {
			army_speed_factor = 0.05
			army_org_factor = 0.025
			army_org_regain = 0.05
		}
    }
}

light_infantry_warfare = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_LIGHT_INFANTRY
    description = SUBDOCTRINE_OPERATION_LIGHT_INFANTRY_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = light_infantry_warfare }
    }

    ai_will_do = {
        base = 1
    }

	effect = {
		set_country_flag = light_infantry_warfare
	}
    # EFFECTS
	category_all_infantry = {
		soft_attack = 0.15
		hard_attack = 0.1
	}

    rewards = {
        infiltration_groups = {
			recon_factor = 0.1
			initiative_factor = 0.1
        }
        coordinated_pre_mission_bombardments = {
			L_Recce_Comp = {
				battalion_mult = {
					category = category_artillery
					soft_attack = 0.25
					hard_attack = 0.15
					breakthrough = 0.1
				}
			}

			Mot_Recce_Comp = {
				battalion_mult = {
					category = category_artillery
					soft_attack = 0.25
					hard_attack = 0.15
					breakthrough = 0.1
				}
			}
        }
        dedicated_tank_hunters = {
			category_all_infantry = {
				ap_attack = 0.35
				hard_attack = 0.1
			}
        }
        urban_combat_operations = {
			L_Inf_Bat = {
				urban = {
					attack = 0.15
					defence = 0.15
				}
				supercity = {
					attack = 0.15
					defence = 0.15
				}
			}

			Mot_Inf_Bat = {
				urban = {
					attack = 0.15
					defence = 0.15
				}
				supercity = {
					attack = 0.15
					defence = 0.15
				}
			}

			Militia_Bat = {
				urban = {
					attack = 0.15
					defence = 0.15
				}
				supercity = {
					attack = 0.15
					defence = 0.15
				}
			}

			Mot_Militia_Bat = {
				urban = {
					attack = 0.15
					defence = 0.15
				}
				supercity = {
					attack = 0.15
					defence = 0.15
				}
			}
        }
		massed_infantry_assaults = {
			category_all_infantry = {
				soft_attack = 0.15
				hard_attack = 0.15
				breakthrough = 0.2
			}
		}
    }
}

guerrilla_fighters = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_GUERRILLA
    description = SUBDOCTRINE_OPERATION_GUERRILLA_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
		NOT = { has_country_flag = guerrilla_fighters }
		has_doctrine = guerrilla_warfare
    }

    ai_will_do = {
        base = 1
    }

	effect = {
		set_country_flag = guerrilla_fighters
	}
    # EFFECTS
	army_infantry_attack_factor = 0.1

    rewards = {
        hit_and_run_raids = {
			army_attack_speed_factor = 0.25
			army_speed_factor = 0.15
        }
        close_observation = {
			intel_from_combat_factor = 0.25
        }
        propaganda_campaigns = {
			recruitable_population_factor = 0.15
        }
        city_offensive_operations = {
			L_Inf_Bat = {
				urban = {
					movement = 0.2
					attack = 0.25
				}
				supercity = {
					movement = 0.15
					attack = 0.2
				}
			}

			Militia_Bat = {
				urban = {
					movement = 0.25
					attack = 0.3
				}
				supercity = {
					movement = 0.2
					attack = 0.25
				}
			}

			Mot_Inf_Bat = {
				urban = {
					movement = 0.2
					attack = 0.15
				}
				supercity = {
					movement = 0.1
					attack = 0.2
				}
			}

			Mot_Militia_Bat = {
				urban = {
					movement = 0.15
					attack = 0.2
				}
				supercity = {
					movement = 0.2
					attack = 0.15
				}
			}
        }
		lay_of_the_land = {
			terrain_penalty_reduction = 0.35
		}
    }
}
#Defensive Doctrines
static_defense = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_STATIC_DEFENSE
    description = SUBDOCTRINE_OPERATION_STATIC_DEFENSE_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = static_defense }
    }

    ai_will_do = {
        base = 1
    }

	effect = {
		set_country_flag = static_defense
	}
    # EFFECTS
	max_dig_in_factor = 0.25
 	recon_factor_while_entrenched = 0.25

    rewards = {
        forward_defensive_deployments = {
			max_dig_in = 3
 			dig_in_speed_factor = 0.15
        }
        anti_tank_ambushes = {
			category_front_line = {
	 			hard_attack = 0.10
	 			ap_attack = 0.10
	 		}

	 		category_all_infantry = {
	 			ap_attack = 0.25
	 		}
        }
        defensive_position_exploitation = {
			max_dig_in_factor = 0.05
	 		L_Inf_Bat = {
	 			fort = {
	 				defence = 0.15
	 			}
	 		}
	 		Mot_Inf_Bat = {
	 			fort = {
	 				defence = 0.15
	 			}
	 		}
	 		Mech_Inf_Bat = {
	 			fort = {
	 				defence = 0.15
	 			}
	 		}
	 		Arm_Inf_Bat = {
	 			fort = {
	 				defence = 0.15
	 			}
	 		}
		}
        minefield_defences = {
			army_defence_factor = 0.10
			#todo: add some special ability here to mine states / provinces
        }
		defence_in_depth = {
			army_core_defence_factor = 0.15
		}
    }
}

elastic_defense = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_ELASTIC_DEFENSE
    description = SUBDOCTRINE_OPERATION_ELASTIC_DEFENSE_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = elastic_defense }
    }

    ai_will_do = {
        base = 1
    }

	effect = {
		set_country_flag = elastic_defense
	}

    # EFFECTS
	max_dig_in_factor = 0.1
 	dig_in_speed_factor = 0.1

    rewards = {
        static_to_kinetic = {
			max_dig_in_factor = 0.05
 			org_loss_when_moving = -0.04
        }
        rapid_force_relocation = {
			army_retreat_speed_factor = 0.15
        }
        pocket_defence = {
			pocket_penalty = -0.40
        }
        kill_boxes = {
			army_core_defence_factor = 0.05
 			army_core_attack_factor = 0.10
        }
		flexible_defensive_lines = {
			org_loss_at_low_org_factor = -0.15
 			org_loss_when_moving = -0.15
		}
    }
}

mobile_defense = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_MOBILE_DEFENSE
    description = SUBDOCTRINE_OPERATION_MOBILE_DEFENSE_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        NOT = { has_country_flag = mobile_defense }
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	dig_in_speed_factor = 0.25
 	army_defence_factor = 0.025

	effect = {
		set_country_flag = mobile_defense
	}

    rewards = {
        fire_brigades = {
			land_night_attack = 0.05
 			org_loss_when_moving = -0.075
        }
        delay = {
			cas_damage_reduction = 0.10
 			coordination_bonus = 0.10
        }
        freedom_of_maneuver = {
			army_speed_factor = 0.075
 			initiative_factor = 0.05
        }
        counter_punch = {
			land_night_attack = 0.05
 			army_core_attack_factor = 0.10
        }
		collapsing_defense = {
			army_speed_factor = 0.05
 			land_reinforce_rate = 0.05
		}
    }
}

insurgent_operations = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_INSURGENT
    description = SUBDOCTRINE_OPERATION_INSURGENT_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
		NOT = { has_country_flag = insurgent_operations }
		has_doctrine = guerrilla_warfare
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	army_infantry_defence_factor = 0.1

	effect = {
		set_country_flag = insurgent_operations
	}
    rewards = {
        urban_insurgent_ops = {
			L_Inf_Bat = {
	 			urban = {
					movement = 0.2
	 				defence = 0.25
	 			}
	 			supercity = {
	 				movement = 0.15
	 				defence = 0.25
	 			}
	 		}

	 		Militia_Bat = {
	 			urban = {
	 				movement = 0.2
	 				defence = 0.3
	 			}
	 			supercity = {
	 				movement = 0.2
	 				defence = 0.3
	 			}
	 		}

	 		Mot_Inf_Bat = {
	 			urban = {
	 				movement = 0.1
	 				defence = 0.15
	 			}
	 			supercity = {
	 				movement = 0.1
	 				defence = 0.15
	 			}
	 		}

	 		Mot_Militia_Bat = {
	 			urban = {
	 				movement = 0.15
	 				defence = 0.2
	 			}
	 			supercity = {
	 				movement = 0.15
	 				defence = 0.2
	 			}
	 		}
        }
        repair_and_replace = {
			category_militia = {
				equipment_capture_factor = 0.4
				recovery = 0.4
			}
        }
        asture_insurgent_ops = {
			L_Inf_Bat = {
				mountain = {
					movement = 0.2
					defence = 0.25
				}
				hills = {
					movement = 0.15
					defence = 0.2
				}
				jungle = {
					movement = 0.15
					defence = 0.25
				}
			}

			Militia_Bat = {
				mountain = {
					movement = 0.25
					defence = 0.3
				}
				hills = {
					movement = 0.2
					defence = 0.25
				}
				jungle = {
					movement = 0.2
					defence = 0.3
				}
			}

			Mot_Inf_Bat = {
				mountain = {
					movement = 0.2
					defence = 0.15
				}
				hills = {
					movement = 0.1
					defence = 0.2
				}
				jungle = {
					movement = 0.2
					defence = 0.15
				}
			}

			Mot_Militia_Bat = {
				mountain = {
					movement = 0.15
					defence = 0.2
				}
				hills = {
					movement = 0.2
					defence = 0.15
				}
				jungle = {
					movement = 0.15
					defence = 0.2
				}
			}
        }
        dedicated_hideouts = {
			cas_damage_reduction = 0.5
			max_dig_in_factor = 0.25
        }
		hit_and_run_defence = {
			army_retreat_speed_factor = 0.4
		}
    }
}
#Special Operational Doctrines
adverse_condition_ops = {
	track = operational_theory
    name = SUBDOCTRINE_OPERATION_ADVERSE
    description = SUBDOCTRINE_OPERATION_ADVERSE_DESC
    icon = GFX_doctrine_mobile_infantry_medium

    xp_cost = 75
    xp_type = army

    available = {
        always = yes
    }

    ai_will_do = {
        base = 1
    }

    # EFFECTS
	org_loss_when_moving = -0.15
	org_loss_at_low_org_factor = -0.05

    rewards = {
        night_operations = {
			land_night_attack = 0.15
        }
        under_hostile_skies = {
			cas_damage_reduction = 0.35
        }
        adverse_terrain_training = {
			terrain_penalty_reduction = 0.15
        }
        high_experience_units = {
			experience_gain_army_unit_factor = 0.15
			experience_loss_factor = -0.15
        }
		coordinated_missions = {
			coordination_bonus = 0.15
		}
    }
}