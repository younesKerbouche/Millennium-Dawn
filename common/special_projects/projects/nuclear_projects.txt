# Author(s): AngriestBird, TheGeneral
# Nuclear Missile Configurations
# Nuclear Missiles require you to have Gotterdammerung due to their requirements on the new missiles
sp_nuclear_energy = {
	icon = GFX_sp_commercial_nuclear_reactor

	specialization = specialization_nuclear

	project_tags = { sp_tag_energy sp_tag_civilian }

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	breakthrough_cost = {
		specialization_nuclear = 2
	}

	project_output = {
		country_effects = {
			set_technology = {
				nuclear_technology = 1
				popup = no
			}
		}
	}

	generic_prototype_rewards = {
		sp_civilian_generic_reward_scientist_xp_1
		sp_civilian_generic_reward_scientist_xp_2
		sp_civilian_generic_reward_scientist_xp_3
		sp_civilian_generic_reward_major_progress_1
		sp_civilian_generic_reward_major_progress_2
		sp_civilian_generic_reward_major_progress_3
		sp_civilian_generic_reward_test_failure_1
		sp_civilian_generic_reward_test_failure_2
		sp_civilian_generic_reward_test_failure_3
		sp_civilian_generic_reward_resource_scarcity
		sp_civilian_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
	}
}
sp_thorium_nuclear_fuel = {
	icon = GFX_sp_thorium_fuel
	specialization = specialization_nuclear

	project_tags = sp_tag_energy

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.insane

	breakthrough_cost = {
		specialization_nuclear = 3
	}

	available = {
		FROM = {
			has_tech = reactor3
			has_nuclear_reactors = yes
		}
	}

	special_project_parent = {
		sp_nuclear_energy
	}

	resource_cost = {
		resources = { tungsten = 3 chromium = 2 }
	}

	project_output = {
		country_effects = {
			add_ideas = sp_thorium_nuclear_fuel_idea
		}
	}

	generic_prototype_rewards = {
		sp_civilian_generic_reward_scientist_xp_1
		sp_civilian_generic_reward_scientist_xp_2
		sp_civilian_generic_reward_scientist_xp_3
		sp_civilian_generic_reward_major_progress_1
		sp_civilian_generic_reward_major_progress_2
		sp_civilian_generic_reward_major_progress_3
		sp_civilian_generic_reward_test_failure_1
		sp_civilian_generic_reward_test_failure_2
		sp_civilian_generic_reward_test_failure_3
		sp_civilian_generic_reward_resource_scarcity
		sp_civilian_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
		modifier = {
			add = 10
			FROM = {
				has_nuclear_reactors = yes
			}
		}
	}
}
sp_fusion_reactors = {

	specialization = specialization_nuclear

	project_tags = sp_tag_energy

	available = {
		FROM = {
			has_tech = reactor9
			has_nuclear_reactors = yes
		}
	}

	special_project_parent = {
		sp_nuclear_energy
	}

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.large

	project_output = {
		country_effects = {
			add_ideas = sp_fusion_reactors_special_project_idea
		}
	}

	generic_prototype_rewards = {
		sp_civilian_generic_reward_scientist_xp_1
		sp_civilian_generic_reward_scientist_xp_2
		sp_civilian_generic_reward_scientist_xp_3
		sp_civilian_generic_reward_major_progress_1
		sp_civilian_generic_reward_major_progress_2
		sp_civilian_generic_reward_major_progress_3
		sp_civilian_generic_reward_test_failure_1
		sp_civilian_generic_reward_test_failure_2
		sp_civilian_generic_reward_test_failure_3
		sp_civilian_generic_reward_resource_scarcity
		sp_civilian_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_improved_nuclear_reactor_centrifuge_technology = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_improved_nuclear_reactor_centrifuge_technology_option

				iteration_output = {
					country_effects = {
						add_ideas = sp_improved_nuclear_reactor_centrifuge_technology_idea
						FROM = {
							add_project_progress_ratio = constant:sp_progress.gain.low
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
		modifier = {
			add = 10
			has_nuclear_reactors = yes
		}
		modifier = {
			factor = 0
			has_nuclear_reactors = no
		}
	}
}
sp_nuclear_bomb = {
	icon = GFX_sp_nuclear_bomb

	specialization = specialization_air

	project_tags = sp_tag_civilian

	prototype_time = sp_time.prototype.long

	complexity = sp_complexity.large

	special_project_parent = {
		sp_nuclear_energy
	}

	breakthrough_cost = {
		specialization_nuclear = 2
	}

	project_output = { #Do we have bombs in MD?
		country_effects = {
			custom_effect_tooltip = sp_nuclear_bomb_tt
		}
	}

	generic_prototype_rewards = {
		sp_civilian_generic_reward_scientist_xp_1
		sp_civilian_generic_reward_scientist_xp_2
		sp_civilian_generic_reward_scientist_xp_3
		sp_civilian_generic_reward_major_progress_1
		sp_civilian_generic_reward_major_progress_2
		sp_civilian_generic_reward_major_progress_3
		sp_civilian_generic_reward_test_failure_1
		sp_civilian_generic_reward_test_failure_2
		sp_civilian_generic_reward_test_failure_3
		sp_civilian_generic_reward_resource_scarcity
		sp_civilian_generic_reward_critical_failure
	}

	ai_will_do = {
		base = 1
	}
}
sp_nuclear_warhead_program = {
	allowed = { has_dlc = "Gotterdammerung" }
	specialization = specialization_air

	project_tags = sp_tag_nuclear_weapons

	available = {
		FROM = {
			has_tech = ballistic_missile
			if = {
				limit = {
					tag = GER
				}
				NOT = { has_country_flag = GER_no_nuclear }
			}
		}
	}

	special_project_parent = {
		sp_nuclear_bomb
	}

	breakthrough_cost = {
		specialization_nuclear = 3
	}

	prototype_time = sp_time.prototype.very_long

	complexity = sp_complexity.insane

	project_output = {
		country_effects = {
			set_country_flag = NPROG_completed
			custom_effect_tooltip = sp_nuclear_warhead_program_tt
		}
		enable_equipment_modules = {
			spec_nuclear_consent
		}
	}

	generic_prototype_rewards = {
		sp_land_generic_reward_scientist_xp_1
		sp_land_generic_reward_scientist_xp_2
		sp_land_generic_reward_scientist_xp_3
		sp_land_generic_reward_army_xp_1
		sp_land_generic_reward_army_xp_2
		sp_land_generic_reward_army_xp_3
		sp_land_generic_reward_major_progress_1
		sp_land_generic_reward_major_progress_2
		sp_land_generic_reward_major_progress_3
		sp_land_generic_reward_test_failure_1
		sp_land_generic_reward_test_failure_2
		sp_land_generic_reward_test_failure_3
		sp_land_generic_reward_infantry_tech_1
		sp_land_generic_reward_infantry_tech_2
		sp_land_generic_reward_infantry_tech_3
		sp_land_generic_reward_resource_scarcity
		sp_land_generic_reward_critical_failure
	}

	unique_prototype_rewards = {
		sp_improved_nuclear_ballistic_warhead_delivery_systems = {
			fire_only_once = yes

			threshold = {
				min = 0
				max = 100
			}

			weight = {
				base = 1
			}

			option = {
				token = sp_improved_nuclear_ballistic_warhead_delivery_systems_option

				iteration_output = {
					equipment_bonus = {
						nuclear_ballistic_missile_equipment = {
							air_range = 300
						}
						nuclear_missile_equipment = {
							air_range = 300
						}
					}

					country_effects = {
						FROM = {
							add_project_progress_ratio = constant:sp_progress.gain.low
						}
					}
				}
			}
		}
	}

	ai_will_do = {
		base = 1
	}
}
